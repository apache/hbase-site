<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>BalancerClusterState (Apache HBase 2.6.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.hadoop.hbase.master.balancer, class: BalancerClusterState">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/BalancerClusterState.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.hadoop.hbase.master.balancer</a></div>
<h1 title="Class BalancerClusterState" class="title">Class BalancerClusterState</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.hadoop.hbase.master.balancer.BalancerClusterState</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@Private
</span><span class="modifiers">class </span><span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-51">BalancerClusterState</a></span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">An efficient array based implementation similar to ClusterState for keeping the status of the
 cluster in terms of region assignment and distribution. LoadBalancers, such as
 StochasticLoadBalancer uses this Cluster object because of hundreds of thousands of hashmap
 manipulations are very costly, which is why this class uses mostly indexes and arrays.
 <p/>
 BalancerClusterState tracks a list of unassigned regions, region assignments, and the server
 topology in terms of server names, hostnames and racks.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>(package private) static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="BalancerClusterState.DefaultRackManager.html" class="type-name-link" title="class in org.apache.hadoop.hbase.master.balancer">BalancerClusterState.DefaultRackManager</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) static enum&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="BalancerClusterState.LocalityType.html" class="type-name-link" title="enum in org.apache.hadoop.hbase.master.balancer">BalancerClusterState.LocalityType</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#clusterState" class="member-name-link">clusterState</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) org.agrona.collections.Int2IntCounterMap[]</code></div>
<div class="col-second odd-row-color"><code><a href="#colocatedReplicaCountsPerHost" class="member-name-link">colocatedReplicaCountsPerHost</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) org.agrona.collections.Int2IntCounterMap[]</code></div>
<div class="col-second even-row-color"><code><a href="#colocatedReplicaCountsPerRack" class="member-name-link">colocatedReplicaCountsPerRack</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) org.agrona.collections.Int2IntCounterMap[]</code></div>
<div class="col-second odd-row-color"><code><a href="#colocatedReplicaCountsPerServer" class="member-name-link">colocatedReplicaCountsPerServer</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) boolean</code></div>
<div class="col-second even-row-color"><code><a href="#hasRegionReplicas" class="member-name-link">hasRegionReplicas</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#hosts" class="member-name-link">hosts</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#hostsToIndex" class="member-name-link">hostsToIndex</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int[]</code></div>
<div class="col-second odd-row-color"><code><a href="#initialRegionIndexToServerIndex" class="member-name-link">initialRegionIndexToServerIndex</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) float[]</code></div>
<div class="col-second even-row-color"><code><a href="#localityPerServer" class="member-name-link">localityPerServer</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private static final org.slf4j.Logger</code></div>
<div class="col-second odd-row-color"><code><a href="#LOG" class="member-name-link">LOG</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) boolean</code></div>
<div class="col-second even-row-color"><code><a href="#multiServersPerHost" class="member-name-link">multiServersPerHost</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int</code></div>
<div class="col-second odd-row-color"><code><a href="#numHosts" class="member-name-link">numHosts</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int[]</code></div>
<div class="col-second even-row-color"><code><a href="#numMaxRegionsPerTable" class="member-name-link">numMaxRegionsPerTable</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int</code></div>
<div class="col-second odd-row-color"><code><a href="#numMovedRegions" class="member-name-link">numMovedRegions</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int</code></div>
<div class="col-second even-row-color"><code><a href="#numRacks" class="member-name-link">numRacks</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int</code></div>
<div class="col-second odd-row-color"><code><a href="#numRegions" class="member-name-link">numRegions</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html" title="class or interface in java.util" class="external-link">Comparator</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#numRegionsComparator" class="member-name-link">numRegionsComparator</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int[][]</code></div>
<div class="col-second odd-row-color"><code><a href="#numRegionsPerServerPerTable" class="member-name-link">numRegionsPerServerPerTable</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int[]</code></div>
<div class="col-second even-row-color"><code><a href="#numRegionsPerTable" class="member-name-link">numRegionsPerTable</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int</code></div>
<div class="col-second odd-row-color"><code><a href="#numServers" class="member-name-link">numServers</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int</code></div>
<div class="col-second even-row-color"><code><a href="#numTables" class="member-name-link">numTables</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private float[][]</code></div>
<div class="col-second odd-row-color"><code><a href="#rackLocalities" class="member-name-link">rackLocalities</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private final <a href="../RackManager.html" title="class in org.apache.hadoop.hbase.master">RackManager</a></code></div>
<div class="col-second even-row-color"><code><a href="#rackManager" class="member-name-link">rackManager</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#racks" class="member-name-link">racks</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#racksToIndex" class="member-name-link">racksToIndex</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Float.html" title="class or interface in java.lang" class="external-link">Float</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#regionCacheRatioOnOldServerMap" class="member-name-link">regionCacheRatioOnOldServerMap</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private <a href="RegionLocationFinder.html" title="class in org.apache.hadoop.hbase.master.balancer">RegionLocationFinder</a></code></div>
<div class="col-second even-row-color"><code><a href="#regionFinder" class="member-name-link">regionFinder</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Float.html" title="class or interface in java.lang" class="external-link">Float</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#regionIndexServerIndexRegionCachedRatio" class="member-name-link">regionIndexServerIndexRegionCachedRatio</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int[]</code></div>
<div class="col-second even-row-color"><code><a href="#regionIndexToPrimaryIndex" class="member-name-link">regionIndexToPrimaryIndex</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int[]</code></div>
<div class="col-second odd-row-color"><code><a href="#regionIndexToServerIndex" class="member-name-link">regionIndexToServerIndex</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int[]</code></div>
<div class="col-second even-row-color"><code><a href="#regionIndexToTableIndex" class="member-name-link">regionIndexToTableIndex</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" title="class or interface in java.util" class="external-link">Deque</a>&lt;<a href="BalancerRegionLoad.html" title="class in org.apache.hadoop.hbase.master.balancer">BalancerRegionLoad</a>&gt;[]</code></div>
<div class="col-second odd-row-color"><code><a href="#regionLoads" class="member-name-link">regionLoads</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int[][]</code></div>
<div class="col-second even-row-color"><code><a href="#regionLocations" class="member-name-link">regionLocations</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#regions" class="member-name-link">regions</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private int[]</code></div>
<div class="col-second even-row-color"><code><a href="#regionServerIndexWithBestRegionCachedRatio" class="member-name-link">regionServerIndexWithBestRegionCachedRatio</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int[][]</code></div>
<div class="col-second odd-row-color"><code><a href="#regionsPerHost" class="member-name-link">regionsPerHost</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int[][]</code></div>
<div class="col-second even-row-color"><code><a href="#regionsPerRack" class="member-name-link">regionsPerRack</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int[][]</code></div>
<div class="col-second odd-row-color"><code><a href="#regionsPerServer" class="member-name-link">regionsPerServer</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#regionsToIndex" class="member-name-link">regionsToIndex</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private int[][]</code></div>
<div class="col-second odd-row-color"><code><a href="#regionsToMostLocalEntities" class="member-name-link">regionsToMostLocalEntities</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int[]</code></div>
<div class="col-second even-row-color"><code><a href="#serverIndexToHostIndex" class="member-name-link">serverIndexToHostIndex</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int[]</code></div>
<div class="col-second odd-row-color"><code><a href="#serverIndexToRackIndex" class="member-name-link">serverIndexToRackIndex</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int[]</code></div>
<div class="col-second even-row-color"><code><a href="#serverIndexToRegionsOffset" class="member-name-link">serverIndexToRegionsOffset</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#serverIndicesSortedByLocality" class="member-name-link">serverIndicesSortedByLocality</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#serverIndicesSortedByRegionCount" class="member-name-link">serverIndicesSortedByRegionCount</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#servers" class="member-name-link">servers</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) int[][]</code></div>
<div class="col-second even-row-color"><code><a href="#serversPerHost" class="member-name-link">serversPerHost</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) int[][]</code></div>
<div class="col-second odd-row-color"><code><a href="#serversPerRack" class="member-name-link">serversPerRack</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../net/Address.html" title="class in org.apache.hadoop.hbase.net">Address</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#serversToIndex" class="member-name-link">serversToIndex</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#tables" class="member-name-link">tables</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#tablesToIndex" class="member-name-link">tablesToIndex</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier</div>
<div class="table-header col-second">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>(package private)</code></div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.util.Collection,java.util.Map,java.util.Map,org.apache.hadoop.hbase.master.balancer.RegionLocationFinder,org.apache.hadoop.hbase.master.RackManager,java.util.Map)" class="member-name-link">BalancerClusterState</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&nbsp;unassignedRegions,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;clusterState,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" title="class or interface in java.util" class="external-link">Deque</a>&lt;<a href="BalancerRegionLoad.html" title="class in org.apache.hadoop.hbase.master.balancer">BalancerRegionLoad</a>&gt;&gt;&nbsp;loads,
 <a href="RegionLocationFinder.html" title="class in org.apache.hadoop.hbase.master.balancer">RegionLocationFinder</a>&nbsp;regionFinder,
 <a href="../RackManager.html" title="class in org.apache.hadoop.hbase.master">RackManager</a>&nbsp;rackManager,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Float.html" title="class or interface in java.lang" class="external-link">Float</a>&gt;&gt;&nbsp;oldRegionServerRegionCacheRatio)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private)</code></div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(java.util.Map,java.util.Map,org.apache.hadoop.hbase.master.balancer.RegionLocationFinder,org.apache.hadoop.hbase.master.RackManager)" class="member-name-link">BalancerClusterState</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;clusterState,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" title="class or interface in java.util" class="external-link">Deque</a>&lt;<a href="BalancerRegionLoad.html" title="class in org.apache.hadoop.hbase.master.balancer">BalancerRegionLoad</a>&gt;&gt;&nbsp;loads,
 <a href="RegionLocationFinder.html" title="class in org.apache.hadoop.hbase.master.balancer">RegionLocationFinder</a>&nbsp;regionFinder,
 <a href="../RackManager.html" title="class in org.apache.hadoop.hbase.master">RackManager</a>&nbsp;rackManager)</code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected </code></div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.util.Map,java.util.Map,org.apache.hadoop.hbase.master.balancer.RegionLocationFinder,org.apache.hadoop.hbase.master.RackManager,java.util.Map)" class="member-name-link">BalancerClusterState</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;clusterState,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" title="class or interface in java.util" class="external-link">Deque</a>&lt;<a href="BalancerRegionLoad.html" title="class in org.apache.hadoop.hbase.master.balancer">BalancerRegionLoad</a>&gt;&gt;&nbsp;loads,
 <a href="RegionLocationFinder.html" title="class in org.apache.hadoop.hbase.master.balancer">RegionLocationFinder</a>&nbsp;regionFinder,
 <a href="../RackManager.html" title="class in org.apache.hadoop.hbase.master">RackManager</a>&nbsp;rackManager,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Float.html" title="class or interface in java.lang" class="external-link">Float</a>&gt;&gt;&nbsp;oldRegionServerRegionCacheRatio)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) int[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addRegion(int%5B%5D,int)" class="member-name-link">addRegion</a><wbr>(int[]&nbsp;regions,
 int&nbsp;regionIndex)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) int[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addRegionSorted(int%5B%5D,int)" class="member-name-link">addRegionSorted</a><wbr>(int[]&nbsp;regions,
 int&nbsp;regionIndex)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkLocationForPrimary(int,org.agrona.collections.Int2IntCounterMap%5B%5D,int)" class="member-name-link">checkLocationForPrimary</a><wbr>(int&nbsp;location,
 org.agrona.collections.Int2IntCounterMap[]&nbsp;colocatedReplicaCountsPerLocation,
 int&nbsp;primary)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Common method for better solution check.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#computeCachedLocalities()" class="member-name-link">computeCachedLocalities</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Computes and caches the locality for each region/rack combinations, as well as storing a
 mapping of region -> server and region -> rack such that server and rack have the highest
 locality for region</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#computeRegionServerRegionCacheRatio()" class="member-name-link">computeRegionServerRegionCacheRatio</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Populate the maps containing information about how much a region is cached on a region server.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#contains(int%5B%5D,int)" class="member-name-link">contains</a><wbr>(int[]&nbsp;arr,
 int&nbsp;val)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doAction(org.apache.hadoop.hbase.master.balancer.BalanceAction)" class="member-name-link">doAction</a><wbr>(<a href="BalanceAction.html" title="class in org.apache.hadoop.hbase.master.balancer">BalanceAction</a>&nbsp;action)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doAssignRegion(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.ServerName)" class="member-name-link">doAssignRegion</a><wbr>(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLocalityOfRegion(int,int)" class="member-name-link">getLocalityOfRegion</a><wbr>(int&nbsp;region,
 int&nbsp;server)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLowestLocalityRegionOnServer(int)" class="member-name-link">getLowestLocalityRegionOnServer</a><wbr>(int&nbsp;serverIndex)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNumRegions(int)" class="member-name-link">getNumRegions</a><wbr>(int&nbsp;server)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html" title="class or interface in java.util" class="external-link">Comparator</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNumRegionsComparator()" class="member-name-link">getNumRegionsComparator</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOrComputeLocality(int,int,org.apache.hadoop.hbase.master.balancer.BalancerClusterState.LocalityType)" class="member-name-link">getOrComputeLocality</a><wbr>(int&nbsp;region,
 int&nbsp;entity,
 <a href="BalancerClusterState.LocalityType.html" title="enum in org.apache.hadoop.hbase.master.balancer">BalancerClusterState.LocalityType</a>&nbsp;type)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Looks up locality from cache of localities.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>float[][]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOrComputeRackLocalities()" class="member-name-link">getOrComputeRackLocalities</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves and lazily initializes a field storing the locality of every region/server
 combination</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOrComputeRegionCacheRatio(int,int)" class="member-name-link">getOrComputeRegionCacheRatio</a><wbr>(int&nbsp;region,
 int&nbsp;server)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOrComputeRegionsToMostLocalEntities(org.apache.hadoop.hbase.master.balancer.BalancerClusterState.LocalityType)" class="member-name-link">getOrComputeRegionsToMostLocalEntities</a><wbr>(<a href="BalancerClusterState.LocalityType.html" title="enum in org.apache.hadoop.hbase.master.balancer">BalancerClusterState.LocalityType</a>&nbsp;type)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Lazily initializes and retrieves a mapping of region -> server for which region has the highest
 the locality</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOrComputeServerWithBestRegionCachedRatio()" class="member-name-link">getOrComputeServerWithBestRegionCachedRatio</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOrComputeWeightedLocality(int,int,org.apache.hadoop.hbase.master.balancer.BalancerClusterState.LocalityType)" class="member-name-link">getOrComputeWeightedLocality</a><wbr>(int&nbsp;region,
 int&nbsp;server,
 <a href="BalancerClusterState.LocalityType.html" title="enum in org.apache.hadoop.hbase.master.balancer">BalancerClusterState.LocalityType</a>&nbsp;type)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns locality weighted by region size in MB.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOrComputeWeightedRegionCacheRatio(int,int)" class="member-name-link">getOrComputeWeightedRegionCacheRatio</a><wbr>(int&nbsp;region,
 int&nbsp;server)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the weighted cache ratio of a region on the given region server</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRackForRegion(int)" class="member-name-link">getRackForRegion</a><wbr>(int&nbsp;region)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Maps region index to rack index</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected float</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRegionCacheRatioOnRegionServer(int,int)" class="member-name-link">getRegionCacheRatioOnRegionServer</a><wbr>(int&nbsp;region,
 int&nbsp;regionServerIndex)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the amount by which a region is cached on a given region server.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRegionSizeMB(int)" class="member-name-link">getRegionSizeMB</a><wbr>(int&nbsp;region)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the size in MB from the most recent RegionLoad for region</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTotalRegionHFileSizeMB(int)" class="member-name-link">getTotalRegionHFileSizeMB</a><wbr>(int&nbsp;region)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the size of hFiles from the most recent RegionLoad for region</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#populateRegionPerLocationFromServer(int%5B%5D%5B%5D,org.agrona.collections.Int2IntCounterMap%5B%5D,int%5B%5D%5B%5D)" class="member-name-link">populateRegionPerLocationFromServer</a><wbr>(int[][]&nbsp;regionsPerLocation,
 org.agrona.collections.Int2IntCounterMap[]&nbsp;colocatedReplicaCountsPerLocation,
 int[][]&nbsp;serversPerLocation)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#regionMoved(int,int,int)" class="member-name-link">regionMoved</a><wbr>(int&nbsp;region,
 int&nbsp;oldServer,
 int&nbsp;newServer)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#registerRegion(org.apache.hadoop.hbase.client.RegionInfo,int,int,java.util.Map,org.apache.hadoop.hbase.master.balancer.RegionLocationFinder)" class="member-name-link">registerRegion</a><wbr>(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region,
 int&nbsp;regionIndex,
 int&nbsp;serverIndex,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" title="class or interface in java.util" class="external-link">Deque</a>&lt;<a href="BalancerRegionLoad.html" title="class in org.apache.hadoop.hbase.master.balancer">BalancerRegionLoad</a>&gt;&gt;&nbsp;loads,
 <a href="RegionLocationFinder.html" title="class in org.apache.hadoop.hbase.master.balancer">RegionLocationFinder</a>&nbsp;regionFinder)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Helper for Cluster constructor to handle a region</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) int[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeRegion(int%5B%5D,int)" class="member-name-link">removeRegion</a><wbr>(int[]&nbsp;regions,
 int&nbsp;regionIndex)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) int[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#replaceRegion(int%5B%5D,int,int)" class="member-name-link">replaceRegion</a><wbr>(int[]&nbsp;regions,
 int&nbsp;regionIndex,
 int&nbsp;newRegionIndex)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#serverHasTooFewRegions(int)" class="member-name-link">serverHasTooFewRegions</a><wbr>(int&nbsp;server)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true iff a given server has less regions than the balanced amount</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setNumMovedRegions(int)" class="member-name-link">setNumMovedRegions</a><wbr>(int&nbsp;numMovedRegions)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setNumRegions(int)" class="member-name-link">setNumRegions</a><wbr>(int&nbsp;numRegions)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#sortServersByRegionCount()" class="member-name-link">sortServersByRegionCount</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateForLocation(int%5B%5D,int%5B%5D%5B%5D,org.agrona.collections.Int2IntCounterMap%5B%5D,int,int,int,int)" class="member-name-link">updateForLocation</a><wbr>(int[]&nbsp;serverIndexToLocation,
 int[][]&nbsp;regionsPerLocation,
 org.agrona.collections.Int2IntCounterMap[]&nbsp;colocatedReplicaCountsPerLocation,
 int&nbsp;oldServer,
 int&nbsp;newServer,
 int&nbsp;primary,
 int&nbsp;region)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Common method for per host and per Location region index updates when a region is moved.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#wouldLowerAvailability(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.ServerName)" class="member-name-link">wouldLowerAvailability</a><wbr>(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return true if the placement of region on server would lower the availability of the region in
 question</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOG">
<h3>LOG</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">org.slf4j.Logger</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-54">LOG</a></span></div>
</section>
</li>
<li>
<section class="detail" id="servers">
<h3>servers</h3>
<div class="member-signature"><span class="return-type"><a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-56">servers</a></span></div>
</section>
</li>
<li>
<section class="detail" id="hosts">
<h3>hosts</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-58">hosts</a></span></div>
</section>
</li>
<li>
<section class="detail" id="racks">
<h3>racks</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-59">racks</a></span></div>
</section>
</li>
<li>
<section class="detail" id="multiServersPerHost">
<h3>multiServersPerHost</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-60">multiServersPerHost</a></span></div>
</section>
</li>
<li>
<section class="detail" id="tables">
<h3>tables</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-62">tables</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regions">
<h3>regions</h3>
<div class="member-signature"><span class="return-type"><a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-63">regions</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionLoads">
<h3>regionLoads</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" title="class or interface in java.util" class="external-link">Deque</a>&lt;<a href="BalancerRegionLoad.html" title="class in org.apache.hadoop.hbase.master.balancer">BalancerRegionLoad</a>&gt;[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-64">regionLoads</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionFinder">
<h3>regionFinder</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="RegionLocationFinder.html" title="class in org.apache.hadoop.hbase.master.balancer">RegionLocationFinder</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-65">regionFinder</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionLocations">
<h3>regionLocations</h3>
<div class="member-signature"><span class="return-type">int[][]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-67">regionLocations</a></span></div>
</section>
</li>
<li>
<section class="detail" id="serverIndexToHostIndex">
<h3>serverIndexToHostIndex</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-69">serverIndexToHostIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="serverIndexToRackIndex">
<h3>serverIndexToRackIndex</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-70">serverIndexToRackIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionsPerServer">
<h3>regionsPerServer</h3>
<div class="member-signature"><span class="return-type">int[][]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-72">regionsPerServer</a></span></div>
</section>
</li>
<li>
<section class="detail" id="serverIndexToRegionsOffset">
<h3>serverIndexToRegionsOffset</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-73">serverIndexToRegionsOffset</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionsPerHost">
<h3>regionsPerHost</h3>
<div class="member-signature"><span class="return-type">int[][]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-74">regionsPerHost</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionsPerRack">
<h3>regionsPerRack</h3>
<div class="member-signature"><span class="return-type">int[][]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-75">regionsPerRack</a></span></div>
</section>
</li>
<li>
<section class="detail" id="colocatedReplicaCountsPerServer">
<h3>colocatedReplicaCountsPerServer</h3>
<div class="member-signature"><span class="return-type">org.agrona.collections.Int2IntCounterMap[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-76">colocatedReplicaCountsPerServer</a></span></div>
</section>
</li>
<li>
<section class="detail" id="colocatedReplicaCountsPerHost">
<h3>colocatedReplicaCountsPerHost</h3>
<div class="member-signature"><span class="return-type">org.agrona.collections.Int2IntCounterMap[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-78">colocatedReplicaCountsPerHost</a></span></div>
</section>
</li>
<li>
<section class="detail" id="colocatedReplicaCountsPerRack">
<h3>colocatedReplicaCountsPerRack</h3>
<div class="member-signature"><span class="return-type">org.agrona.collections.Int2IntCounterMap[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-80">colocatedReplicaCountsPerRack</a></span></div>
</section>
</li>
<li>
<section class="detail" id="serversPerHost">
<h3>serversPerHost</h3>
<div class="member-signature"><span class="return-type">int[][]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-83">serversPerHost</a></span></div>
</section>
</li>
<li>
<section class="detail" id="serversPerRack">
<h3>serversPerRack</h3>
<div class="member-signature"><span class="return-type">int[][]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-84">serversPerRack</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionIndexToServerIndex">
<h3>regionIndexToServerIndex</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-85">regionIndexToServerIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="initialRegionIndexToServerIndex">
<h3>initialRegionIndexToServerIndex</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-86">initialRegionIndexToServerIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionIndexToTableIndex">
<h3>regionIndexToTableIndex</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-87">regionIndexToTableIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="numRegionsPerServerPerTable">
<h3>numRegionsPerServerPerTable</h3>
<div class="member-signature"><span class="return-type">int[][]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-88">numRegionsPerServerPerTable</a></span></div>
</section>
</li>
<li>
<section class="detail" id="numRegionsPerTable">
<h3>numRegionsPerTable</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-89">numRegionsPerTable</a></span></div>
</section>
</li>
<li>
<section class="detail" id="numMaxRegionsPerTable">
<h3>numMaxRegionsPerTable</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-90">numMaxRegionsPerTable</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionIndexToPrimaryIndex">
<h3>regionIndexToPrimaryIndex</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-91">regionIndexToPrimaryIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="hasRegionReplicas">
<h3>hasRegionReplicas</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-92">hasRegionReplicas</a></span></div>
</section>
</li>
<li>
<section class="detail" id="serverIndicesSortedByRegionCount">
<h3>serverIndicesSortedByRegionCount</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-94">serverIndicesSortedByRegionCount</a></span></div>
</section>
</li>
<li>
<section class="detail" id="serverIndicesSortedByLocality">
<h3>serverIndicesSortedByLocality</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-95">serverIndicesSortedByLocality</a></span></div>
</section>
</li>
<li>
<section class="detail" id="serversToIndex">
<h3>serversToIndex</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../net/Address.html" title="class in org.apache.hadoop.hbase.net">Address</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-97">serversToIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="hostsToIndex">
<h3>hostsToIndex</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-98">hostsToIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="racksToIndex">
<h3>racksToIndex</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-99">racksToIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="tablesToIndex">
<h3>tablesToIndex</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-100">tablesToIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionsToIndex">
<h3>regionsToIndex</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-101">regionsToIndex</a></span></div>
</section>
</li>
<li>
<section class="detail" id="localityPerServer">
<h3>localityPerServer</h3>
<div class="member-signature"><span class="return-type">float[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-102">localityPerServer</a></span></div>
</section>
</li>
<li>
<section class="detail" id="numServers">
<h3>numServers</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-104">numServers</a></span></div>
</section>
</li>
<li>
<section class="detail" id="numHosts">
<h3>numHosts</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-105">numHosts</a></span></div>
</section>
</li>
<li>
<section class="detail" id="numRacks">
<h3>numRacks</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-106">numRacks</a></span></div>
</section>
</li>
<li>
<section class="detail" id="numTables">
<h3>numTables</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-107">numTables</a></span></div>
</section>
</li>
<li>
<section class="detail" id="numRegions">
<h3>numRegions</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-108">numRegions</a></span></div>
</section>
</li>
<li>
<section class="detail" id="numMovedRegions">
<h3>numMovedRegions</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-110">numMovedRegions</a></span></div>
</section>
</li>
<li>
<section class="detail" id="clusterState">
<h3>clusterState</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-111">clusterState</a></span></div>
</section>
</li>
<li>
<section class="detail" id="rackManager">
<h3>rackManager</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../RackManager.html" title="class in org.apache.hadoop.hbase.master">RackManager</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-113">rackManager</a></span></div>
</section>
</li>
<li>
<section class="detail" id="rackLocalities">
<h3>rackLocalities</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">float[][]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-115">rackLocalities</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionsToMostLocalEntities">
<h3>regionsToMostLocalEntities</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int[][]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-117">regionsToMostLocalEntities</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionIndexServerIndexRegionCachedRatio">
<h3>regionIndexServerIndexRegionCachedRatio</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Float.html" title="class or interface in java.lang" class="external-link">Float</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-119">regionIndexServerIndexRegionCachedRatio</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionServerIndexWithBestRegionCachedRatio">
<h3>regionServerIndexWithBestRegionCachedRatio</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-121">regionServerIndexWithBestRegionCachedRatio</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionCacheRatioOnOldServerMap">
<h3>regionCacheRatioOnOldServerMap</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Float.html" title="class or interface in java.lang" class="external-link">Float</a>&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-123">regionCacheRatioOnOldServerMap</a></span></div>
</section>
</li>
<li>
<section class="detail" id="numRegionsComparator">
<h3>numRegionsComparator</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html" title="class or interface in java.util" class="external-link">Comparator</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-930">numRegionsComparator</a></span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.util.Map,java.util.Map,org.apache.hadoop.hbase.master.balancer.RegionLocationFinder,org.apache.hadoop.hbase.master.RackManager)">
<h3>BalancerClusterState</h3>
<div class="member-signature"><span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-132">BalancerClusterState</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;clusterState,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" title="class or interface in java.util" class="external-link">Deque</a>&lt;<a href="BalancerRegionLoad.html" title="class in org.apache.hadoop.hbase.master.balancer">BalancerRegionLoad</a>&gt;&gt;&nbsp;loads,
 <a href="RegionLocationFinder.html" title="class in org.apache.hadoop.hbase.master.balancer">RegionLocationFinder</a>&nbsp;regionFinder,
 <a href="../RackManager.html" title="class in org.apache.hadoop.hbase.master">RackManager</a>&nbsp;rackManager)</span></div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(java.util.Map,java.util.Map,org.apache.hadoop.hbase.master.balancer.RegionLocationFinder,org.apache.hadoop.hbase.master.RackManager,java.util.Map)">
<h3>BalancerClusterState</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-138">BalancerClusterState</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;clusterState,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" title="class or interface in java.util" class="external-link">Deque</a>&lt;<a href="BalancerRegionLoad.html" title="class in org.apache.hadoop.hbase.master.balancer">BalancerRegionLoad</a>&gt;&gt;&nbsp;loads,
 <a href="RegionLocationFinder.html" title="class in org.apache.hadoop.hbase.master.balancer">RegionLocationFinder</a>&nbsp;regionFinder,
 <a href="../RackManager.html" title="class in org.apache.hadoop.hbase.master">RackManager</a>&nbsp;rackManager,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Float.html" title="class or interface in java.lang" class="external-link">Float</a>&gt;&gt;&nbsp;oldRegionServerRegionCacheRatio)</span></div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(java.util.Collection,java.util.Map,java.util.Map,org.apache.hadoop.hbase.master.balancer.RegionLocationFinder,org.apache.hadoop.hbase.master.RackManager,java.util.Map)">
<h3>BalancerClusterState</h3>
<div class="member-signature"><span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-144">BalancerClusterState</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&nbsp;unassignedRegions,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;clusterState,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" title="class or interface in java.util" class="external-link">Deque</a>&lt;<a href="BalancerRegionLoad.html" title="class in org.apache.hadoop.hbase.master.balancer">BalancerRegionLoad</a>&gt;&gt;&nbsp;loads,
 <a href="RegionLocationFinder.html" title="class in org.apache.hadoop.hbase.master.balancer">RegionLocationFinder</a>&nbsp;regionFinder,
 <a href="../RackManager.html" title="class in org.apache.hadoop.hbase.master">RackManager</a>&nbsp;rackManager,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Float.html" title="class or interface in java.lang" class="external-link">Float</a>&gt;&gt;&nbsp;oldRegionServerRegionCacheRatio)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="populateRegionPerLocationFromServer(int[][],org.agrona.collections.Int2IntCounterMap[],int[][])">
<h3>populateRegionPerLocationFromServer</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-369">populateRegionPerLocationFromServer</a></span><wbr><span class="parameters">(int[][]&nbsp;regionsPerLocation,
 org.agrona.collections.Int2IntCounterMap[]&nbsp;colocatedReplicaCountsPerLocation,
 int[][]&nbsp;serversPerLocation)</span></div>
</section>
</li>
<li>
<section class="detail" id="registerRegion(org.apache.hadoop.hbase.client.RegionInfo,int,int,java.util.Map,org.apache.hadoop.hbase.master.balancer.RegionLocationFinder)">
<h3>registerRegion</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-397">registerRegion</a></span><wbr><span class="parameters">(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region,
 int&nbsp;regionIndex,
 int&nbsp;serverIndex,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" title="class or interface in java.util" class="external-link">Deque</a>&lt;<a href="BalancerRegionLoad.html" title="class in org.apache.hadoop.hbase.master.balancer">BalancerRegionLoad</a>&gt;&gt;&nbsp;loads,
 <a href="RegionLocationFinder.html" title="class in org.apache.hadoop.hbase.master.balancer">RegionLocationFinder</a>&nbsp;regionFinder)</span></div>
<div class="block">Helper for Cluster constructor to handle a region</div>
</section>
</li>
<li>
<section class="detail" id="serverHasTooFewRegions(int)">
<h3>serverHasTooFewRegions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-440">serverHasTooFewRegions</a></span><wbr><span class="parameters">(int&nbsp;server)</span></div>
<div class="block">Returns true iff a given server has less regions than the balanced amount</div>
</section>
</li>
<li>
<section class="detail" id="getOrComputeRackLocalities()">
<h3>getOrComputeRackLocalities</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">float[][]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-450">getOrComputeRackLocalities</a></span>()</div>
<div class="block">Retrieves and lazily initializes a field storing the locality of every region/server
 combination</div>
</section>
</li>
<li>
<section class="detail" id="getOrComputeRegionsToMostLocalEntities(org.apache.hadoop.hbase.master.balancer.BalancerClusterState.LocalityType)">
<h3>getOrComputeRegionsToMostLocalEntities</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-461">getOrComputeRegionsToMostLocalEntities</a></span><wbr><span class="parameters">(<a href="BalancerClusterState.LocalityType.html" title="enum in org.apache.hadoop.hbase.master.balancer">BalancerClusterState.LocalityType</a>&nbsp;type)</span></div>
<div class="block">Lazily initializes and retrieves a mapping of region -> server for which region has the highest
 the locality</div>
</section>
</li>
<li>
<section class="detail" id="getOrComputeLocality(int,int,org.apache.hadoop.hbase.master.balancer.BalancerClusterState.LocalityType)">
<h3>getOrComputeLocality</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-471">getOrComputeLocality</a></span><wbr><span class="parameters">(int&nbsp;region,
 int&nbsp;entity,
 <a href="BalancerClusterState.LocalityType.html" title="enum in org.apache.hadoop.hbase.master.balancer">BalancerClusterState.LocalityType</a>&nbsp;type)</span></div>
<div class="block">Looks up locality from cache of localities. Will create cache if it does not already exist.</div>
</section>
</li>
<li>
<section class="detail" id="getOrComputeWeightedLocality(int,int,org.apache.hadoop.hbase.master.balancer.BalancerClusterState.LocalityType)">
<h3>getOrComputeWeightedLocality</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-487">getOrComputeWeightedLocality</a></span><wbr><span class="parameters">(int&nbsp;region,
 int&nbsp;server,
 <a href="BalancerClusterState.LocalityType.html" title="enum in org.apache.hadoop.hbase.master.balancer">BalancerClusterState.LocalityType</a>&nbsp;type)</span></div>
<div class="block">Returns locality weighted by region size in MB. Will create locality cache if it does not
 already exist.</div>
</section>
</li>
<li>
<section class="detail" id="getRegionSizeMB(int)">
<h3>getRegionSizeMB</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-495">getRegionSizeMB</a></span><wbr><span class="parameters">(int&nbsp;region)</span></div>
<div class="block">Returns the size in MB from the most recent RegionLoad for region</div>
</section>
</li>
<li>
<section class="detail" id="computeCachedLocalities()">
<h3>computeCachedLocalities</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-509">computeCachedLocalities</a></span>()</div>
<div class="block">Computes and caches the locality for each region/rack combinations, as well as storing a
 mapping of region -> server and region -> rack such that server and rack have the highest
 locality for region</div>
</section>
</li>
<li>
<section class="detail" id="getTotalRegionHFileSizeMB(int)">
<h3>getTotalRegionHFileSizeMB</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-549">getTotalRegionHFileSizeMB</a></span><wbr><span class="parameters">(int&nbsp;region)</span></div>
<div class="block">Returns the size of hFiles from the most recent RegionLoad for region</div>
</section>
</li>
<li>
<section class="detail" id="getOrComputeWeightedRegionCacheRatio(int,int)">
<h3>getOrComputeWeightedRegionCacheRatio</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-561">getOrComputeWeightedRegionCacheRatio</a></span><wbr><span class="parameters">(int&nbsp;region,
 int&nbsp;server)</span></div>
<div class="block">Returns the weighted cache ratio of a region on the given region server</div>
</section>
</li>
<li>
<section class="detail" id="getRegionCacheRatioOnRegionServer(int,int)">
<h3>getRegionCacheRatioOnRegionServer</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-570">getRegionCacheRatioOnRegionServer</a></span><wbr><span class="parameters">(int&nbsp;region,
 int&nbsp;regionServerIndex)</span></div>
<div class="block">Returns the amount by which a region is cached on a given region server. If the region is not
 currently hosted on the given region server, then find out if it was previously hosted there
 and return the old cache ratio.</div>
</section>
</li>
<li>
<section class="detail" id="computeRegionServerRegionCacheRatio()">
<h3>computeRegionServerRegionCacheRatio</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-615">computeRegionServerRegionCacheRatio</a></span>()</div>
<div class="block">Populate the maps containing information about how much a region is cached on a region server.</div>
</section>
</li>
<li>
<section class="detail" id="getOrComputeRegionCacheRatio(int,int)">
<h3>getOrComputeRegionCacheRatio</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-658">getOrComputeRegionCacheRatio</a></span><wbr><span class="parameters">(int&nbsp;region,
 int&nbsp;server)</span></div>
</section>
</li>
<li>
<section class="detail" id="getOrComputeServerWithBestRegionCachedRatio()">
<h3>getOrComputeServerWithBestRegionCachedRatio</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-672">getOrComputeServerWithBestRegionCachedRatio</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getRackForRegion(int)">
<h3>getRackForRegion</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-685">getRackForRegion</a></span><wbr><span class="parameters">(int&nbsp;region)</span></div>
<div class="block">Maps region index to rack index</div>
</section>
</li>
<li>
<section class="detail" id="doAction(org.apache.hadoop.hbase.master.balancer.BalanceAction)">
<h3>doAction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-694">doAction</a></span><wbr><span class="parameters">(<a href="BalanceAction.html" title="class in org.apache.hadoop.hbase.master.balancer">BalanceAction</a>&nbsp;action)</span></div>
</section>
</li>
<li>
<section class="detail" id="wouldLowerAvailability(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.ServerName)">
<h3>wouldLowerAvailability</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-735">wouldLowerAvailability</a></span><wbr><span class="parameters">(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName)</span></div>
<div class="block">Return true if the placement of region on server would lower the availability of the region in
 question</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true or false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkLocationForPrimary(int,org.agrona.collections.Int2IntCounterMap[],int)">
<h3>checkLocationForPrimary</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-788">checkLocationForPrimary</a></span><wbr><span class="parameters">(int&nbsp;location,
 org.agrona.collections.Int2IntCounterMap[]&nbsp;colocatedReplicaCountsPerLocation,
 int&nbsp;primary)</span></div>
<div class="block">Common method for better solution check.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>colocatedReplicaCountsPerLocation</code> - colocatedReplicaCountsPerHost or
                                          colocatedReplicaCountsPerRack</dd>
<dt>Returns:</dt>
<dd>1 for better, -1 for no better, 0 for unknown</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doAssignRegion(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.ServerName)">
<h3>doAssignRegion</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-802">doAssignRegion</a></span><wbr><span class="parameters">(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName)</span></div>
</section>
</li>
<li>
<section class="detail" id="regionMoved(int,int,int)">
<h3>regionMoved</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-811">regionMoved</a></span><wbr><span class="parameters">(int&nbsp;region,
 int&nbsp;oldServer,
 int&nbsp;newServer)</span></div>
</section>
</li>
<li>
<section class="detail" id="updateForLocation(int[],int[][],org.agrona.collections.Int2IntCounterMap[],int,int,int,int)">
<h3>updateForLocation</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-851">updateForLocation</a></span><wbr><span class="parameters">(int[]&nbsp;serverIndexToLocation,
 int[][]&nbsp;regionsPerLocation,
 org.agrona.collections.Int2IntCounterMap[]&nbsp;colocatedReplicaCountsPerLocation,
 int&nbsp;oldServer,
 int&nbsp;newServer,
 int&nbsp;primary,
 int&nbsp;region)</span></div>
<div class="block">Common method for per host and per Location region index updates when a region is moved.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serverIndexToLocation</code> - serverIndexToHostIndex or serverIndexToLocationIndex</dd>
<dd><code>regionsPerLocation</code> - regionsPerHost or regionsPerLocation</dd>
<dd><code>colocatedReplicaCountsPerLocation</code> - colocatedReplicaCountsPerHost or
                                          colocatedReplicaCountsPerRack</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeRegion(int[],int)">
<h3>removeRegion</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-867">removeRegion</a></span><wbr><span class="parameters">(int[]&nbsp;regions,
 int&nbsp;regionIndex)</span></div>
</section>
</li>
<li>
<section class="detail" id="addRegion(int[],int)">
<h3>addRegion</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-881">addRegion</a></span><wbr><span class="parameters">(int[]&nbsp;regions,
 int&nbsp;regionIndex)</span></div>
</section>
</li>
<li>
<section class="detail" id="addRegionSorted(int[],int)">
<h3>addRegionSorted</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-888">addRegionSorted</a></span><wbr><span class="parameters">(int[]&nbsp;regions,
 int&nbsp;regionIndex)</span></div>
</section>
</li>
<li>
<section class="detail" id="replaceRegion(int[],int,int)">
<h3>replaceRegion</h3>
<div class="member-signature"><span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-903">replaceRegion</a></span><wbr><span class="parameters">(int[]&nbsp;regions,
 int&nbsp;regionIndex,
 int&nbsp;newRegionIndex)</span></div>
</section>
</li>
<li>
<section class="detail" id="sortServersByRegionCount()">
<h3>sortServersByRegionCount</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-914">sortServersByRegionCount</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getNumRegions(int)">
<h3>getNumRegions</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-918">getNumRegions</a></span><wbr><span class="parameters">(int&nbsp;server)</span></div>
</section>
</li>
<li>
<section class="detail" id="getNumRegionsComparator()">
<h3>getNumRegionsComparator</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html" title="class or interface in java.util" class="external-link">Comparator</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-922">getNumRegionsComparator</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="contains(int[],int)">
<h3>contains</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-926">contains</a></span><wbr><span class="parameters">(int[]&nbsp;arr,
 int&nbsp;val)</span></div>
</section>
</li>
<li>
<section class="detail" id="getLowestLocalityRegionOnServer(int)">
<h3>getLowestLocalityRegionOnServer</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-932">getLowestLocalityRegionOnServer</a></span><wbr><span class="parameters">(int&nbsp;serverIndex)</span></div>
</section>
</li>
<li>
<section class="detail" id="getLocalityOfRegion(int,int)">
<h3>getLocalityOfRegion</h3>
<div class="member-signature"><span class="return-type">float</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-970">getLocalityOfRegion</a></span><wbr><span class="parameters">(int&nbsp;region,
 int&nbsp;server)</span></div>
</section>
</li>
<li>
<section class="detail" id="setNumRegions(int)">
<h3>setNumRegions</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-979">setNumRegions</a></span><wbr><span class="parameters">(int&nbsp;numRegions)</span></div>
</section>
</li>
<li>
<section class="detail" id="setNumMovedRegions(int)">
<h3>setNumMovedRegions</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-983">setNumMovedRegions</a></span><wbr><span class="parameters">(int&nbsp;numMovedRegions)</span></div>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/BalancerClusterState.html#line-987">toString</a></span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2007&#x2013;2020 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
