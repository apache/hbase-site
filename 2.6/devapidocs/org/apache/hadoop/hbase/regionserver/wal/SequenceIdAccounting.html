<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>SequenceIdAccounting (Apache HBase 2.6.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.hadoop.hbase.regionserver.wal, class: SequenceIdAccounting">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/SequenceIdAccounting.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.hadoop.hbase.regionserver.wal</a></div>
<h1 title="Class SequenceIdAccounting" class="title">Class SequenceIdAccounting</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.hadoop.hbase.regionserver.wal.SequenceIdAccounting</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@Private
</span><span class="modifiers">class </span><span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-51">SequenceIdAccounting</a></span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Accounting of sequence ids per region and then by column family. So we can keep our accounting
 current, call startCacheFlush and then finishedCacheFlush or abortCacheFlush so this instance can
 keep abreast of the state of sequence id persistence. Also call update per append.
 <p>
 For the implementation, we assume that all the <code>encodedRegionName</code> passed in are gotten by
 <a href="../../client/RegionInfo.html#getEncodedNameAsBytes()"><code>RegionInfo.getEncodedNameAsBytes()</code></a>. So it is safe to use
 it as a hash key. And for family name, we use <a href="../../util/ImmutableByteArray.html" title="class in org.apache.hadoop.hbase.util"><code>ImmutableByteArray</code></a> as key. This is because
 hash based map is much faster than RBTree or CSLM and here we are on the critical write path. See
 HBASE-16278 for more details.
 </p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../util/ImmutableByteArray.html" title="class in org.apache.hadoop.hbase.util">ImmutableByteArray</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#flushingSequenceIds" class="member-name-link">flushingSequenceIds</a></code></div>
<div class="col-last even-row-color">
<div class="block">Map of encoded region names and family names to their lowest or OLDEST sequence/edit id
 currently being flushed out to hfiles.</div>
</div>
<div class="col-first odd-row-color"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#highestSequenceIds" class="member-name-link">highestSequenceIds</a></code></div>
<div class="col-last odd-row-color">
<div class="block">
 Map of region encoded names to the latest/highest region sequence id.</div>
</div>
<div class="col-first even-row-color"><code>private static final org.slf4j.Logger</code></div>
<div class="col-second even-row-color"><code><a href="#LOG" class="member-name-link">LOG</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;<a href="../../util/ImmutableByteArray.html" title="class in org.apache.hadoop.hbase.util">ImmutableByteArray</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#lowestUnflushedSequenceIds" class="member-name-link">lowestUnflushedSequenceIds</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Map of encoded region names and family names to their OLDEST -- i.e.</div>
</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color"><code><a href="#tieLock" class="member-name-link">tieLock</a></code></div>
<div class="col-last even-row-color">
<div class="block">This lock ties all operations on <a href="#flushingSequenceIds"><code>flushingSequenceIds</code></a> and
 <a href="#lowestUnflushedSequenceIds"><code>lowestUnflushedSequenceIds</code></a> Maps.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">SequenceIdAccounting</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#abortCacheFlush(byte%5B%5D)" class="member-name-link">abortCacheFlush</a><wbr>(byte[]&nbsp;encodedRegionName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#areAllLower(java.util.Map)" class="member-name-link">areAllLower</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;sequenceids)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">See if passed <code>sequenceids</code> are lower -- i.e.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#completeCacheFlush(byte%5B%5D,long)" class="member-name-link">completeCacheFlush</a><wbr>(byte[]&nbsp;encodedRegionName,
 long&nbsp;maxFlushedSeqId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;byte[]&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#findLower(java.util.Map)" class="member-name-link">findLower</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;sequenceids)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Iterates over the given Map and compares sequence ids with corresponding entries in
 <a href="#lowestUnflushedSequenceIds"><code>lowestUnflushedSequenceIds</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private &lt;T extends <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;?,<wbr>
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&gt;<br><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#flattenToLowestSequenceId(java.util.Map)" class="member-name-link">flattenToLowestSequenceId</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr>T&gt;&nbsp;src)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLowestSequenceId(byte%5B%5D)" class="member-name-link">getLowestSequenceId</a><wbr>(byte[]&nbsp;encodedRegionName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the lowest unflushed sequence id for the region.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLowestSequenceId(byte%5B%5D,byte%5B%5D)" class="member-name-link">getLowestSequenceId</a><wbr>(byte[]&nbsp;encodedRegionName,
 byte[]&nbsp;familyName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getLowestSequenceId(java.util.Map)" class="member-name-link">getLowestSequenceId</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;?,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;sequenceids)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;<a href="../../util/ImmutableByteArray.html" title="class in org.apache.hadoop.hbase.util">ImmutableByteArray</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOrCreateLowestSequenceIds(byte%5B%5D)" class="member-name-link">getOrCreateLowestSequenceIds</a><wbr>(byte[]&nbsp;encodedRegionName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onRegionClose(byte%5B%5D)" class="member-name-link">onRegionClose</a><wbr>(byte[]&nbsp;encodedRegionName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clear all the records of the given region as it is going to be closed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#resetHighest()" class="member-name-link">resetHighest</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Reset the accounting of highest sequenceid by regionname.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startCacheFlush(byte%5B%5D,java.util.Map)" class="member-name-link">startCacheFlush</a><wbr>(byte[]&nbsp;encodedRegionName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;familyToSeq)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startCacheFlush(byte%5B%5D,java.util.Set)" class="member-name-link">startCacheFlush</a><wbr>(byte[]&nbsp;encodedRegionName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;byte[]&gt;&nbsp;families)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(byte%5B%5D,java.util.Set,long,boolean)" class="member-name-link">update</a><wbr>(byte[]&nbsp;encodedRegionName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;byte[]&gt;&nbsp;families,
 long&nbsp;sequenceid,
 boolean&nbsp;lowest)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We've been passed a new sequenceid for the region.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateStore(byte%5B%5D,byte%5B%5D,java.lang.Long,boolean)" class="member-name-link">updateStore</a><wbr>(byte[]&nbsp;encodedRegionName,
 byte[]&nbsp;familyName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;sequenceId,
 boolean&nbsp;onlyIfGreater)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Update the store sequence id, e.g., upon executing in-memory compaction</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOG">
<h3>LOG</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">org.slf4j.Logger</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-53">LOG</a></span></div>
</section>
</li>
<li>
<section class="detail" id="tieLock">
<h3>tieLock</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-71">tieLock</a></span></div>
<div class="block">This lock ties all operations on <a href="#flushingSequenceIds"><code>flushingSequenceIds</code></a> and
 <a href="#lowestUnflushedSequenceIds"><code>lowestUnflushedSequenceIds</code></a> Maps. <a href="#lowestUnflushedSequenceIds"><code>lowestUnflushedSequenceIds</code></a> has the lowest
 outstanding sequence ids EXCEPT when flushing. When we flush, the current lowest set for the
 region/column family are moved (atomically because of this lock) to
 <a href="#flushingSequenceIds"><code>flushingSequenceIds</code></a>.
 <p>
 The two Maps are tied by this locking object EXCEPT when we go to update the lowest entry; see
 <a href="#lowestUnflushedSequenceIds"><code>lowestUnflushedSequenceIds</code></a>. In here is a putIfAbsent call on
 <a href="#lowestUnflushedSequenceIds"><code>lowestUnflushedSequenceIds</code></a>. In this latter case, we will add this lowest sequence id
 if we find that there is no entry for the current column family. There will be no entry only if
 we just came up OR we have moved aside current set of lowest sequence ids because the current
 set are being flushed (by putting them into <a href="#flushingSequenceIds"><code>flushingSequenceIds</code></a>). This is how we pick
 up the next 'lowest' sequence id per region per column family to be used figuring what is in
 the next flush.</div>
</section>
</li>
<li>
<section class="detail" id="lowestUnflushedSequenceIds">
<h3>lowestUnflushedSequenceIds</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;<a href="../../util/ImmutableByteArray.html" title="class in org.apache.hadoop.hbase.util">ImmutableByteArray</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-85">lowestUnflushedSequenceIds</a></span></div>
<div class="block">Map of encoded region names and family names to their OLDEST -- i.e. their first, the
 longest-lived, their 'earliest', the 'lowest' -- sequence id.
 <p>
 When we flush, the current lowest sequence ids get cleared and added to
 <a href="#flushingSequenceIds"><code>flushingSequenceIds</code></a>. The next append that comes in, is then added here to
 <a href="#lowestUnflushedSequenceIds"><code>lowestUnflushedSequenceIds</code></a> as the next lowest sequenceid.
 <p>
 If flush fails, currently server is aborted so no need to restore previous sequence ids.
 <p>
 Needs to be concurrent Maps because we use putIfAbsent updating oldest.</div>
</section>
</li>
<li>
<section class="detail" id="flushingSequenceIds">
<h3>flushingSequenceIds</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../util/ImmutableByteArray.html" title="class in org.apache.hadoop.hbase.util">ImmutableByteArray</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-94">flushingSequenceIds</a></span></div>
<div class="block">Map of encoded region names and family names to their lowest or OLDEST sequence/edit id
 currently being flushed out to hfiles. Entries are moved here from
 <a href="#lowestUnflushedSequenceIds"><code>lowestUnflushedSequenceIds</code></a> while the lock <a href="#tieLock"><code>tieLock</code></a> is held (so movement
 between the Maps is atomic).</div>
</section>
</li>
<li>
<section class="detail" id="highestSequenceIds">
<h3>highestSequenceIds</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-107">highestSequenceIds</a></span></div>
<div class="block"><p>
 Map of region encoded names to the latest/highest region sequence id. Updated on each call to
 append.
 </p>
 <p>
 This map uses byte[] as the key, and uses reference equality. It works in our use case as we
 use <a href="../../client/RegionInfo.html#getEncodedNameAsBytes()"><code>RegionInfo.getEncodedNameAsBytes()</code></a> as keys. For a
 given region, it always returns the same array.
 </p></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>SequenceIdAccounting</h3>
<div class="member-signature"><span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-52">SequenceIdAccounting</a></span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getLowestSequenceId(byte[])">
<h3>getLowestSequenceId</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-114">getLowestSequenceId</a></span><wbr><span class="parameters">(byte[]&nbsp;encodedRegionName)</span></div>
<div class="block">Returns the lowest unflushed sequence id for the region.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Lowest outstanding unflushed sequenceid for <code>encodedRegionName</code>. Will return
         <a href="../../HConstants.html#NO_SEQNUM"><code>HConstants.NO_SEQNUM</code></a> when none.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLowestSequenceId(byte[],byte[])">
<h3>getLowestSequenceId</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-129">getLowestSequenceId</a></span><wbr><span class="parameters">(byte[]&nbsp;encodedRegionName,
 byte[]&nbsp;familyName)</span></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Lowest outstanding unflushed sequenceid for <code>encodedRegionname</code> and
         <code>familyName</code>. Returned sequenceid may be for an edit currently being
         flushed.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="resetHighest()">
<h3>resetHighest</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-155">resetHighest</a></span>()</div>
<div class="block">Reset the accounting of highest sequenceid by regionname.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Return the previous accounting Map of regions to the last sequence id written into
         each.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="update(byte[],java.util.Set,long,boolean)">
<h3>update</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-167">update</a></span><wbr><span class="parameters">(byte[]&nbsp;encodedRegionName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;byte[]&gt;&nbsp;families,
 long&nbsp;sequenceid,
 boolean&nbsp;lowest)</span></div>
<div class="block">We've been passed a new sequenceid for the region. Set it as highest seen for this region and
 if we are to record oldest, or lowest sequenceids, save it as oldest seen if nothing currently
 older.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>lowest</code> - Whether to keep running account of oldest sequence id.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onRegionClose(byte[])">
<h3>onRegionClose</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-189">onRegionClose</a></span><wbr><span class="parameters">(byte[]&nbsp;encodedRegionName)</span></div>
<div class="block">Clear all the records of the given region as it is going to be closed.
 <p/>
 We will call this once we get the region close marker. We need this because that, if we use
 Durability.ASYNC_WAL, after calling startCacheFlush, we may still get some ongoing wal entries
 that has not been processed yet, this will lead to orphan records in the
 lowestUnflushedSequenceIds and then cause too many WAL files.
 <p/>
 See HBASE-23157 for more details.</div>
</section>
</li>
<li>
<section class="detail" id="updateStore(byte[],byte[],java.lang.Long,boolean)">
<h3>updateStore</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-206">updateStore</a></span><wbr><span class="parameters">(byte[]&nbsp;encodedRegionName,
 byte[]&nbsp;familyName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;sequenceId,
 boolean&nbsp;onlyIfGreater)</span></div>
<div class="block">Update the store sequence id, e.g., upon executing in-memory compaction</div>
</section>
</li>
<li>
<section class="detail" id="getOrCreateLowestSequenceIds(byte[])">
<h3>getOrCreateLowestSequenceIds</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;<a href="../../util/ImmutableByteArray.html" title="class in org.apache.hadoop.hbase.util">ImmutableByteArray</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-238">getOrCreateLowestSequenceIds</a></span><wbr><span class="parameters">(byte[]&nbsp;encodedRegionName)</span></div>
</section>
</li>
<li>
<section class="detail" id="getLowestSequenceId(java.util.Map)">
<h3>getLowestSequenceId</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-248">getLowestSequenceId</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;?,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;sequenceids)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sequenceids</code> - Map to search for lowest value.</dd>
<dt>Returns:</dt>
<dd>Lowest value found in <code>sequenceids</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="flattenToLowestSequenceId(java.util.Map)">
<h3>flattenToLowestSequenceId</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="type-parameters">&lt;T extends <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;?,<wbr>
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&gt;</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-266">flattenToLowestSequenceId</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr>T&gt;&nbsp;src)</span></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>New Map that has same keys as <code>src</code> but instead of a Map for a value, it
         instead has found the smallest sequence id and it returns that as the value instead.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startCacheFlush(byte[],java.util.Set)">
<h3>startCacheFlush</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-289">startCacheFlush</a></span><wbr><span class="parameters">(byte[]&nbsp;encodedRegionName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;byte[]&gt;&nbsp;families)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>encodedRegionName</code> - Region to flush.</dd>
<dd><code>families</code> - Families to flush. May be a subset of all families in the region.</dd>
<dt>Returns:</dt>
<dd>Returns <a href="../../HConstants.html#NO_SEQNUM"><code>HConstants.NO_SEQNUM</code></a> if we are flushing the whole region OR if we are
         flushing a subset of all families but there are no edits in those families not being
         flushed; in other words, this is effectively same as a flush of all of the region
         though we were passed a subset of regions. Otherwise, it returns the sequence id of the
         oldest/lowest outstanding edit.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startCacheFlush(byte[],java.util.Map)">
<h3>startCacheFlush</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-297">startCacheFlush</a></span><wbr><span class="parameters">(byte[]&nbsp;encodedRegionName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;familyToSeq)</span></div>
</section>
</li>
<li>
<section class="detail" id="completeCacheFlush(byte[],long)">
<h3>completeCacheFlush</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-352">completeCacheFlush</a></span><wbr><span class="parameters">(byte[]&nbsp;encodedRegionName,
 long&nbsp;maxFlushedSeqId)</span></div>
</section>
</li>
<li>
<section class="detail" id="abortCacheFlush(byte[])">
<h3>abortCacheFlush</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-385">abortCacheFlush</a></span><wbr><span class="parameters">(byte[]&nbsp;encodedRegionName)</span></div>
</section>
</li>
<li>
<section class="detail" id="areAllLower(java.util.Map)">
<h3>areAllLower</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-428">areAllLower</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;sequenceids)</span></div>
<div class="block">See if passed <code>sequenceids</code> are lower -- i.e. earlier -- than any outstanding
 sequenceids, sequenceids we are holding on to in this accounting instance.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sequenceids</code> - Keyed by encoded region name. Cannot be null (doesn't make sense for it to
                    be null).</dd>
<dt>Returns:</dt>
<dd>true if all sequenceids are lower, older than, the old sequenceids in this instance.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findLower(java.util.Map)">
<h3>findLower</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;byte[]&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/regionserver/wal/SequenceIdAccounting.html#line-461">findLower</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;sequenceids)</span></div>
<div class="block">Iterates over the given Map and compares sequence ids with corresponding entries in
 <a href="#lowestUnflushedSequenceIds"><code>lowestUnflushedSequenceIds</code></a>. If a region in <a href="#lowestUnflushedSequenceIds"><code>lowestUnflushedSequenceIds</code></a> has a
 sequence id less than that passed in <code>sequenceids</code> then return it.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sequenceids</code> - Sequenceids keyed by encoded region name.</dd>
<dt>Returns:</dt>
<dd>stores of regions found in this instance with sequence ids less than those passed in.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2007&#x2013;2020 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
