<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>MemStoreFlusher (Apache HBase 2.6.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.hadoop.hbase.regionserver, class: MemStoreFlusher">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/MemStoreFlusher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.hadoop.hbase.regionserver</a></div>
<h1 title="Class MemStoreFlusher" class="title">Class MemStoreFlusher</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.hadoop.hbase.regionserver.MemStoreFlusher</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../conf/ConfigurationObserver.html" title="interface in org.apache.hadoop.hbase.conf">ConfigurationObserver</a></code>, <code><a href="FlushRequester.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequester</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@Private
</span><span class="modifiers">public class </span><span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-67">MemStoreFlusher</a></span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="FlushRequester.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequester</a>, <a href="../conf/ConfigurationObserver.html" title="interface in org.apache.hadoop.hbase.conf">ConfigurationObserver</a></span></div>
<div class="block">Thread that flushes cache on request NOTE: This class extends Thread rather than Chore because
 the sleep time can be interrupted when there is something to do, rather than the Chore sleep time
 which is invariant.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="FlushRequester.html" title="interface in org.apache.hadoop.hbase.regionserver"><code>FlushRequester</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="MemStoreFlusher.FlushHandler.html" class="type-name-link" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushHandler</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) static interface&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="MemStoreFlusher.FlushQueueEntry.html" class="type-name-link" title="interface in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushQueueEntry</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="MemStoreFlusher.FlushRegionEntry.html" class="type-name-link" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushRegionEntry</a></code></div>
<div class="col-last even-row-color">
<div class="block">Datastructure used in the flush queue.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private long</code></div>
<div class="col-second even-row-color"><code><a href="#blockingWaitTime" class="member-name-link">blockingWaitTime</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second odd-row-color"><code><a href="#blockSignal" class="member-name-link">blockSignal</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private org.apache.hadoop.conf.Configuration</code></div>
<div class="col-second even-row-color"><code><a href="#conf" class="member-name-link">conf</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></code></div>
<div class="col-second odd-row-color"><code><a href="#flusherIdGen" class="member-name-link">flusherIdGen</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadFactory.html" title="class or interface in java.util.concurrent" class="external-link">ThreadFactory</a></code></div>
<div class="col-second even-row-color"><code><a href="#flusherThreadFactory" class="member-name-link">flusherThreadFactory</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private <a href="MemStoreFlusher.FlushHandler.html" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushHandler</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#flushHandlers" class="member-name-link">flushHandlers</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/BlockingQueue.html" title="class or interface in java.util.concurrent" class="external-link">BlockingQueue</a>&lt;<a href="MemStoreFlusher.FlushQueueEntry.html" title="interface in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushQueueEntry</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#flushQueue" class="member-name-link">flushQueue</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="FlushRequestListener.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequestListener</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#flushRequestListeners" class="member-name-link">flushRequestListeners</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html" title="class or interface in java.util.concurrent.locks" class="external-link">ReentrantReadWriteLock</a></code></div>
<div class="col-second even-row-color"><code><a href="#lock" class="member-name-link">lock</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private static final org.slf4j.Logger</code></div>
<div class="col-second odd-row-color"><code><a href="#LOG" class="member-name-link">LOG</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="Region.html" title="interface in org.apache.hadoop.hbase.regionserver">Region</a>,<wbr><a href="MemStoreFlusher.FlushRegionEntry.html" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushRegionEntry</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#regionsInQueue" class="member-name-link">regionsInQueue</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private final <a href="HRegionServer.html" title="class in org.apache.hadoop.hbase.regionserver">HRegionServer</a></code></div>
<div class="col-second odd-row-color"><code><a href="#server" class="member-name-link">server</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private final long</code></div>
<div class="col-second even-row-color"><code><a href="#threadWakeFrequency" class="member-name-link">threadWakeFrequency</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/LongAdder.html" title="class or interface in java.util.concurrent.atomic" class="external-link">LongAdder</a></code></div>
<div class="col-second odd-row-color"><code><a href="#updatesBlockedMsHighWater" class="member-name-link">updatesBlockedMsHighWater</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private static final <a href="MemStoreFlusher.FlushQueueEntry.html" title="interface in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushQueueEntry</a></code></div>
<div class="col-second even-row-color"><code><a href="#WAKEUPFLUSH_INSTANCE" class="member-name-link">WAKEUPFLUSH_INSTANCE</a></code></div>
<div class="col-last even-row-color">
<div class="block">Singleton instance inserted into flush queue used for signaling.</div>
</div>
<div class="col-first odd-row-color"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></code></div>
<div class="col-second odd-row-color"><code><a href="#wakeupPending" class="member-name-link">wakeupPending</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.regionserver.HRegionServer)" class="member-name-link">MemStoreFlusher</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="HRegionServer.html" title="class in org.apache.hadoop.hbase.regionserver">HRegionServer</a>&nbsp;server)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dumpQueue()" class="member-name-link">dumpQueue</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#flushOneForGlobalPressure(org.apache.hadoop.hbase.regionserver.FlushType)" class="member-name-link">flushOneForGlobalPressure</a><wbr>(<a href="FlushType.html" title="enum in org.apache.hadoop.hbase.regionserver">FlushType</a>&nbsp;flushType)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The memstore across all regions has exceeded the low water mark.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#flushRegion(org.apache.hadoop.hbase.regionserver.HRegion,boolean,java.util.List,org.apache.hadoop.hbase.regionserver.FlushLifeCycleTracker)" class="member-name-link">flushRegion</a><wbr>(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;region,
 boolean&nbsp;emergencyFlush,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;byte[]&gt;&nbsp;families,
 <a href="FlushLifeCycleTracker.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushLifeCycleTracker</a>&nbsp;tracker)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Flush a region.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#flushRegion(org.apache.hadoop.hbase.regionserver.MemStoreFlusher.FlushRegionEntry)" class="member-name-link">flushRegion</a><wbr>(<a href="MemStoreFlusher.FlushRegionEntry.html" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushRegionEntry</a>&nbsp;fqe)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">A flushRegion that checks store file count.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBiggestMemStoreOfRegionReplica(java.util.SortedMap,java.util.Set)" class="member-name-link">getBiggestMemStoreOfRegionReplica</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/SortedMap.html" title="class or interface in java.util" class="external-link">SortedMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&gt;&nbsp;regionsBySize,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&gt;&nbsp;excludedRegions)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBiggestMemStoreRegion(java.util.SortedMap,java.util.Set,boolean)" class="member-name-link">getBiggestMemStoreRegion</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/SortedMap.html" title="class or interface in java.util" class="external-link">SortedMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&gt;&nbsp;regionsBySize,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&gt;&nbsp;excludedRegions,
 boolean&nbsp;checkStoreFileCount)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFlusherCount()" class="member-name-link">getFlusherCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFlushQueueSize()" class="member-name-link">getFlushQueueSize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getHandlerCount(org.apache.hadoop.conf.Configuration)" class="member-name-link">getHandlerCount</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;conf)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMemStoreDataSize(org.apache.hadoop.hbase.regionserver.HRegion)" class="member-name-link">getMemStoreDataSize</a><wbr>(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns Return memstore data size or null if <code>r</code> is null</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMemStoreHeapSize(org.apache.hadoop.hbase.regionserver.HRegion)" class="member-name-link">getMemStoreHeapSize</a><wbr>(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns Return memstore heap size or null if <code>r</code> is null</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMemStoreOffHeapSize(org.apache.hadoop.hbase.regionserver.HRegion)" class="member-name-link">getMemStoreOffHeapSize</a><wbr>(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns Return memstore offheap size or null if <code>r</code> is null</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStoreFileCount(org.apache.hadoop.hbase.regionserver.Region)" class="member-name-link">getStoreFileCount</a><wbr>(<a href="Region.html" title="interface in org.apache.hadoop.hbase.regionserver">Region</a>&nbsp;region)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/LongAdder.html" title="class or interface in java.util.concurrent.atomic" class="external-link">LongAdder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUpdatesBlockedMsHighWater()" class="member-name-link">getUpdatesBlockedMsHighWater</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#interruptIfNecessary()" class="member-name-link">interruptIfNecessary</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Only interrupt once it's done with a run through the work loop.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="FlushType.html" title="enum in org.apache.hadoop.hbase.regionserver">FlushType</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isAboveHighWaterMark()" class="member-name-link">isAboveHighWaterMark</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the FlushType if global memory usage is above the high watermark</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="FlushType.html" title="enum in org.apache.hadoop.hbase.regionserver">FlushType</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isAboveLowWaterMark()" class="member-name-link">isAboveLowWaterMark</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the FlushType if we're above the low watermark</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isAlive()" class="member-name-link">isAlive</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isTooManyStoreFiles(org.apache.hadoop.hbase.regionserver.Region)" class="member-name-link">isTooManyStoreFiles</a><wbr>(<a href="Region.html" title="interface in org.apache.hadoop.hbase.regionserver">Region</a>&nbsp;region)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#logMsg(java.lang.String,long,long)" class="member-name-link">logMsg</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;type,
 long&nbsp;val,
 long&nbsp;max)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#notifyFlushRequest(org.apache.hadoop.hbase.regionserver.Region,boolean)" class="member-name-link">notifyFlushRequest</a><wbr>(<a href="Region.html" title="interface in org.apache.hadoop.hbase.regionserver">Region</a>&nbsp;region,
 boolean&nbsp;emergencyFlush)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onConfigurationChange(org.apache.hadoop.conf.Configuration)" class="member-name-link">onConfigurationChange</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;newConf)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method would be called by the <a href="../conf/ConfigurationManager.html" title="class in org.apache.hadoop.hbase.conf"><code>ConfigurationManager</code></a> object when the
 <code>Configuration</code> object is reloaded from disk.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#reclaimMemStoreMemory()" class="member-name-link">reclaimMemStoreMemory</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Check if the regionserver's memstore memory usage is greater than the limit.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#refreshStoreFilesAndReclaimMemory(org.apache.hadoop.hbase.regionserver.Region)" class="member-name-link">refreshStoreFilesAndReclaimMemory</a><wbr>(<a href="Region.html" title="interface in org.apache.hadoop.hbase.regionserver">Region</a>&nbsp;region)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#registerFlushRequestListener(org.apache.hadoop.hbase.regionserver.FlushRequestListener)" class="member-name-link">registerFlushRequestListener</a><wbr>(<a href="FlushRequestListener.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequestListener</a>&nbsp;listener)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Register a MemstoreFlushListener</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#requestDelayedFlush(org.apache.hadoop.hbase.regionserver.HRegion,long)" class="member-name-link">requestDelayedFlush</a><wbr>(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r,
 long&nbsp;delay)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tell the listener the cache needs to be flushed after a delay</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#requestFlush(org.apache.hadoop.hbase.regionserver.HRegion,java.util.List,org.apache.hadoop.hbase.regionserver.FlushLifeCycleTracker)" class="member-name-link">requestFlush</a><wbr>(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;byte[]&gt;&nbsp;families,
 <a href="FlushLifeCycleTracker.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushLifeCycleTracker</a>&nbsp;tracker)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tell the listener the cache needs to be flushed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#requestFlush(org.apache.hadoop.hbase.regionserver.HRegion,org.apache.hadoop.hbase.regionserver.FlushLifeCycleTracker)" class="member-name-link">requestFlush</a><wbr>(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r,
 <a href="FlushLifeCycleTracker.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushLifeCycleTracker</a>&nbsp;tracker)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tell the listener the cache needs to be flushed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setGlobalMemStoreLimit(long)" class="member-name-link">setGlobalMemStoreLimit</a><wbr>(long&nbsp;globalMemStoreSize)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets the global memstore limit to a new size.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shutdown()" class="member-name-link">shutdown</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#start(java.lang.Thread.UncaughtExceptionHandler)" class="member-name-link">start</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.UncaughtExceptionHandler.html" title="class or interface in java.lang" class="external-link">Thread.UncaughtExceptionHandler</a>&nbsp;eh)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startFlushHandlerThreads(org.apache.hadoop.hbase.regionserver.MemStoreFlusher.FlushHandler%5B%5D,int,int)" class="member-name-link">startFlushHandlerThreads</a><wbr>(<a href="MemStoreFlusher.FlushHandler.html" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushHandler</a>[]&nbsp;flushHandlers,
 int&nbsp;start,
 int&nbsp;end)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#stopFlushHandlerThreads(org.apache.hadoop.hbase.regionserver.MemStoreFlusher.FlushHandler%5B%5D,int,int)" class="member-name-link">stopFlushHandlerThreads</a><wbr>(<a href="MemStoreFlusher.FlushHandler.html" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushHandler</a>[]&nbsp;flushHandlers,
 int&nbsp;start,
 int&nbsp;end)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#unregisterFlushRequestListener(org.apache.hadoop.hbase.regionserver.FlushRequestListener)" class="member-name-link">unregisterFlushRequestListener</a><wbr>(<a href="FlushRequestListener.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequestListener</a>&nbsp;listener)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Unregister the listener from MemstoreFlushListeners</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#wakeupFlushThread()" class="member-name-link">wakeupFlushThread</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#wakeUpIfBlocking()" class="member-name-link">wakeUpIfBlocking</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOG">
<h3>LOG</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">org.slf4j.Logger</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-69">LOG</a></span></div>
</section>
</li>
<li>
<section class="detail" id="conf">
<h3>conf</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">org.apache.hadoop.conf.Configuration</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-71">conf</a></span></div>
</section>
</li>
<li>
<section class="detail" id="flushQueue">
<h3>flushQueue</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/BlockingQueue.html" title="class or interface in java.util.concurrent" class="external-link">BlockingQueue</a>&lt;<a href="MemStoreFlusher.FlushQueueEntry.html" title="interface in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushQueueEntry</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-74">flushQueue</a></span></div>
</section>
</li>
<li>
<section class="detail" id="regionsInQueue">
<h3>regionsInQueue</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="Region.html" title="interface in org.apache.hadoop.hbase.regionserver">Region</a>,<wbr><a href="MemStoreFlusher.FlushRegionEntry.html" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushRegionEntry</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-75">regionsInQueue</a></span></div>
</section>
</li>
<li>
<section class="detail" id="wakeupPending">
<h3>wakeupPending</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-76">wakeupPending</a></span></div>
</section>
</li>
<li>
<section class="detail" id="threadWakeFrequency">
<h3>threadWakeFrequency</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-78">threadWakeFrequency</a></span></div>
</section>
</li>
<li>
<section class="detail" id="server">
<h3>server</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="HRegionServer.html" title="class in org.apache.hadoop.hbase.regionserver">HRegionServer</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-79">server</a></span></div>
</section>
</li>
<li>
<section class="detail" id="lock">
<h3>lock</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html" title="class or interface in java.util.concurrent.locks" class="external-link">ReentrantReadWriteLock</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-80">lock</a></span></div>
</section>
</li>
<li>
<section class="detail" id="blockSignal">
<h3>blockSignal</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-81">blockSignal</a></span></div>
</section>
</li>
<li>
<section class="detail" id="blockingWaitTime">
<h3>blockingWaitTime</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-83">blockingWaitTime</a></span></div>
</section>
</li>
<li>
<section class="detail" id="updatesBlockedMsHighWater">
<h3>updatesBlockedMsHighWater</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/LongAdder.html" title="class or interface in java.util.concurrent.atomic" class="external-link">LongAdder</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-84">updatesBlockedMsHighWater</a></span></div>
</section>
</li>
<li>
<section class="detail" id="flushHandlers">
<h3>flushHandlers</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="MemStoreFlusher.FlushHandler.html" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushHandler</a>[]</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-86">flushHandlers</a></span></div>
</section>
</li>
<li>
<section class="detail" id="flusherIdGen">
<h3>flusherIdGen</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-88">flusherIdGen</a></span></div>
</section>
</li>
<li>
<section class="detail" id="flusherThreadFactory">
<h3>flusherThreadFactory</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadFactory.html" title="class or interface in java.util.concurrent" class="external-link">ThreadFactory</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-90">flusherThreadFactory</a></span></div>
</section>
</li>
<li>
<section class="detail" id="flushRequestListeners">
<h3>flushRequestListeners</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="FlushRequestListener.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequestListener</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-92">flushRequestListeners</a></span></div>
</section>
</li>
<li>
<section class="detail" id="WAKEUPFLUSH_INSTANCE">
<h3>WAKEUPFLUSH_INSTANCE</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="MemStoreFlusher.FlushQueueEntry.html" title="interface in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushQueueEntry</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-97">WAKEUPFLUSH_INSTANCE</a></span></div>
<div class="block">Singleton instance inserted into flush queue used for signaling.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.regionserver.HRegionServer)">
<h3>MemStoreFlusher</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-121">MemStoreFlusher</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="HRegionServer.html" title="class in org.apache.hadoop.hbase.regionserver">HRegionServer</a>&nbsp;server)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getUpdatesBlockedMsHighWater()">
<h3>getUpdatesBlockedMsHighWater</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/LongAdder.html" title="class or interface in java.util.concurrent.atomic" class="external-link">LongAdder</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-141">getUpdatesBlockedMsHighWater</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="flushOneForGlobalPressure(org.apache.hadoop.hbase.regionserver.FlushType)">
<h3>flushOneForGlobalPressure</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-150">flushOneForGlobalPressure</a></span><wbr><span class="parameters">(<a href="FlushType.html" title="enum in org.apache.hadoop.hbase.regionserver">FlushType</a>&nbsp;flushType)</span></div>
<div class="block">The memstore across all regions has exceeded the low water mark. Pick one region to flush and
 flush it synchronously (this is called from the flush thread)</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if successful</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMemStoreOffHeapSize(org.apache.hadoop.hbase.regionserver.HRegion)">
<h3>getMemStoreOffHeapSize</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-294">getMemStoreOffHeapSize</a></span><wbr><span class="parameters">(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r)</span></div>
<div class="block">Returns Return memstore offheap size or null if <code>r</code> is null</div>
</section>
</li>
<li>
<section class="detail" id="getMemStoreHeapSize(org.apache.hadoop.hbase.regionserver.HRegion)">
<h3>getMemStoreHeapSize</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-299">getMemStoreHeapSize</a></span><wbr><span class="parameters">(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r)</span></div>
<div class="block">Returns Return memstore heap size or null if <code>r</code> is null</div>
</section>
</li>
<li>
<section class="detail" id="getMemStoreDataSize(org.apache.hadoop.hbase.regionserver.HRegion)">
<h3>getMemStoreDataSize</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-304">getMemStoreDataSize</a></span><wbr><span class="parameters">(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r)</span></div>
<div class="block">Returns Return memstore data size or null if <code>r</code> is null</div>
</section>
</li>
<li>
<section class="detail" id="wakeupFlushThread()">
<h3>wakeupFlushThread</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-383">wakeupFlushThread</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getBiggestMemStoreRegion(java.util.SortedMap,java.util.Set,boolean)">
<h3>getBiggestMemStoreRegion</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-389">getBiggestMemStoreRegion</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/SortedMap.html" title="class or interface in java.util" class="external-link">SortedMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&gt;&nbsp;regionsBySize,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&gt;&nbsp;excludedRegions,
 boolean&nbsp;checkStoreFileCount)</span></div>
</section>
</li>
<li>
<section class="detail" id="getBiggestMemStoreOfRegionReplica(java.util.SortedMap,java.util.Set)">
<h3>getBiggestMemStoreOfRegionReplica</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-410">getBiggestMemStoreOfRegionReplica</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/SortedMap.html" title="class or interface in java.util" class="external-link">SortedMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&gt;&nbsp;regionsBySize,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&gt;&nbsp;excludedRegions)</span></div>
</section>
</li>
<li>
<section class="detail" id="refreshStoreFilesAndReclaimMemory(org.apache.hadoop.hbase.regionserver.Region)">
<h3>refreshStoreFilesAndReclaimMemory</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-428">refreshStoreFilesAndReclaimMemory</a></span><wbr><span class="parameters">(<a href="Region.html" title="interface in org.apache.hadoop.hbase.regionserver">Region</a>&nbsp;region)</span></div>
</section>
</li>
<li>
<section class="detail" id="isAboveHighWaterMark()">
<h3>isAboveHighWaterMark</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="FlushType.html" title="enum in org.apache.hadoop.hbase.regionserver">FlushType</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-440">isAboveHighWaterMark</a></span>()</div>
<div class="block">Return the FlushType if global memory usage is above the high watermark</div>
</section>
</li>
<li>
<section class="detail" id="isAboveLowWaterMark()">
<h3>isAboveLowWaterMark</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="FlushType.html" title="enum in org.apache.hadoop.hbase.regionserver">FlushType</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-447">isAboveLowWaterMark</a></span>()</div>
<div class="block">Return the FlushType if we're above the low watermark</div>
</section>
</li>
<li>
<section class="detail" id="requestFlush(org.apache.hadoop.hbase.regionserver.HRegion,org.apache.hadoop.hbase.regionserver.FlushLifeCycleTracker)">
<h3>requestFlush</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-451">requestFlush</a></span><wbr><span class="parameters">(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r,
 <a href="FlushLifeCycleTracker.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushLifeCycleTracker</a>&nbsp;tracker)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="FlushRequester.html#requestFlush(org.apache.hadoop.hbase.regionserver.HRegion,org.apache.hadoop.hbase.regionserver.FlushLifeCycleTracker)">FlushRequester</a></code></span></div>
<div class="block">Tell the listener the cache needs to be flushed.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="FlushRequester.html#requestFlush(org.apache.hadoop.hbase.regionserver.HRegion,org.apache.hadoop.hbase.regionserver.FlushLifeCycleTracker)">requestFlush</a></code>&nbsp;in interface&nbsp;<code><a href="FlushRequester.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequester</a></code></dd>
<dt>Parameters:</dt>
<dd><code>r</code> - the Region requesting the cache flush</dd>
<dt>Returns:</dt>
<dd>true if our region is added into the queue, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="requestFlush(org.apache.hadoop.hbase.regionserver.HRegion,java.util.List,org.apache.hadoop.hbase.regionserver.FlushLifeCycleTracker)">
<h3>requestFlush</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-456">requestFlush</a></span><wbr><span class="parameters">(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;byte[]&gt;&nbsp;families,
 <a href="FlushLifeCycleTracker.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushLifeCycleTracker</a>&nbsp;tracker)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="FlushRequester.html#requestFlush(org.apache.hadoop.hbase.regionserver.HRegion,java.util.List,org.apache.hadoop.hbase.regionserver.FlushLifeCycleTracker)">FlushRequester</a></code></span></div>
<div class="block">Tell the listener the cache needs to be flushed.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="FlushRequester.html#requestFlush(org.apache.hadoop.hbase.regionserver.HRegion,java.util.List,org.apache.hadoop.hbase.regionserver.FlushLifeCycleTracker)">requestFlush</a></code>&nbsp;in interface&nbsp;<code><a href="FlushRequester.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequester</a></code></dd>
<dt>Parameters:</dt>
<dd><code>r</code> - the Region requesting the cache flush</dd>
<dd><code>families</code> - stores of region to flush, if null then use flush policy</dd>
<dt>Returns:</dt>
<dd>true if our region is added into the queue, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="requestDelayedFlush(org.apache.hadoop.hbase.regionserver.HRegion,long)">
<h3>requestDelayedFlush</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-484">requestDelayedFlush</a></span><wbr><span class="parameters">(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;r,
 long&nbsp;delay)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="FlushRequester.html#requestDelayedFlush(org.apache.hadoop.hbase.regionserver.HRegion,long)">FlushRequester</a></code></span></div>
<div class="block">Tell the listener the cache needs to be flushed after a delay</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="FlushRequester.html#requestDelayedFlush(org.apache.hadoop.hbase.regionserver.HRegion,long)">requestDelayedFlush</a></code>&nbsp;in interface&nbsp;<code><a href="FlushRequester.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequester</a></code></dd>
<dt>Parameters:</dt>
<dd><code>r</code> - the Region requesting the cache flush</dd>
<dd><code>delay</code> - after how much time should the flush happen</dd>
<dt>Returns:</dt>
<dd>true if our region is added into the queue, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFlushQueueSize()">
<h3>getFlushQueueSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-500">getFlushQueueSize</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="interruptIfNecessary()">
<h3>interruptIfNecessary</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-507">interruptIfNecessary</a></span>()</div>
<div class="block">Only interrupt once it's done with a run through the work loop.</div>
</section>
</li>
<li>
<section class="detail" id="start(java.lang.Thread.UncaughtExceptionHandler)">
<h3>start</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-520">start</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.UncaughtExceptionHandler.html" title="class or interface in java.lang" class="external-link">Thread.UncaughtExceptionHandler</a>&nbsp;eh)</span></div>
</section>
</li>
<li>
<section class="detail" id="isAlive()">
<h3>isAlive</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-531">isAlive</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="shutdown()">
<h3>shutdown</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-545">shutdown</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="flushRegion(org.apache.hadoop.hbase.regionserver.MemStoreFlusher.FlushRegionEntry)">
<h3>flushRegion</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-564">flushRegion</a></span><wbr><span class="parameters">(<a href="MemStoreFlusher.FlushRegionEntry.html" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushRegionEntry</a>&nbsp;fqe)</span></div>
<div class="block">A flushRegion that checks store file count. If too many, puts the flush on delay queue to retry
 later.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the region was successfully flushed, false otherwise. If false, there will be
         accompanying log messages explaining why the region was not flushed.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="flushRegion(org.apache.hadoop.hbase.regionserver.HRegion,boolean,java.util.List,org.apache.hadoop.hbase.regionserver.FlushLifeCycleTracker)">
<h3>flushRegion</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-612">flushRegion</a></span><wbr><span class="parameters">(<a href="HRegion.html" title="class in org.apache.hadoop.hbase.regionserver">HRegion</a>&nbsp;region,
 boolean&nbsp;emergencyFlush,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;byte[]&gt;&nbsp;families,
 <a href="FlushLifeCycleTracker.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushLifeCycleTracker</a>&nbsp;tracker)</span></div>
<div class="block">Flush a region.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>region</code> - Region to flush.</dd>
<dd><code>emergencyFlush</code> - Set if we are being force flushed. If true the region needs to be removed
                       from the flush queue. If false, when we were called from the main flusher
                       run loop and we got the entry to flush by calling poll on the flush queue
                       (which removed it).</dd>
<dd><code>families</code> - stores of region to flush.</dd>
<dt>Returns:</dt>
<dd>true if the region was successfully flushed, false otherwise. If false, there will be
         accompanying log messages explaining why the region was not flushed.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="notifyFlushRequest(org.apache.hadoop.hbase.regionserver.Region,boolean)">
<h3>notifyFlushRequest</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-662">notifyFlushRequest</a></span><wbr><span class="parameters">(<a href="Region.html" title="interface in org.apache.hadoop.hbase.regionserver">Region</a>&nbsp;region,
 boolean&nbsp;emergencyFlush)</span></div>
</section>
</li>
<li>
<section class="detail" id="wakeUpIfBlocking()">
<h3>wakeUpIfBlocking</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-675">wakeUpIfBlocking</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="isTooManyStoreFiles(org.apache.hadoop.hbase.regionserver.Region)">
<h3>isTooManyStoreFiles</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-681">isTooManyStoreFiles</a></span><wbr><span class="parameters">(<a href="Region.html" title="interface in org.apache.hadoop.hbase.regionserver">Region</a>&nbsp;region)</span></div>
</section>
</li>
<li>
<section class="detail" id="getStoreFileCount(org.apache.hadoop.hbase.regionserver.Region)">
<h3>getStoreFileCount</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-696">getStoreFileCount</a></span><wbr><span class="parameters">(<a href="Region.html" title="interface in org.apache.hadoop.hbase.regionserver">Region</a>&nbsp;region)</span></div>
</section>
</li>
<li>
<section class="detail" id="reclaimMemStoreMemory()">
<h3>reclaimMemStoreMemory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-709">reclaimMemStoreMemory</a></span>()</div>
<div class="block">Check if the regionserver's memstore memory usage is greater than the limit. If so, flush
 regions with the biggest memstores until we're down to the lower limit. This method blocks
 callers until we're down to a safe amount of memstore consumption.</div>
</section>
</li>
<li>
<section class="detail" id="logMsg(java.lang.String,long,long)">
<h3>logMsg</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-789">logMsg</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;type,
 long&nbsp;val,
 long&nbsp;max)</span></div>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-795">toString</a></span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="dumpQueue()">
<h3>dumpQueue</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-800">dumpQueue</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="registerFlushRequestListener(org.apache.hadoop.hbase.regionserver.FlushRequestListener)">
<h3>registerFlushRequestListener</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-817">registerFlushRequestListener</a></span><wbr><span class="parameters">(<a href="FlushRequestListener.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequestListener</a>&nbsp;listener)</span></div>
<div class="block">Register a MemstoreFlushListener</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="FlushRequester.html#registerFlushRequestListener(org.apache.hadoop.hbase.regionserver.FlushRequestListener)">registerFlushRequestListener</a></code>&nbsp;in interface&nbsp;<code><a href="FlushRequester.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequester</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="unregisterFlushRequestListener(org.apache.hadoop.hbase.regionserver.FlushRequestListener)">
<h3>unregisterFlushRequestListener</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-826">unregisterFlushRequestListener</a></span><wbr><span class="parameters">(<a href="FlushRequestListener.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequestListener</a>&nbsp;listener)</span></div>
<div class="block">Unregister the listener from MemstoreFlushListeners</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="FlushRequester.html#unregisterFlushRequestListener(org.apache.hadoop.hbase.regionserver.FlushRequestListener)">unregisterFlushRequestListener</a></code>&nbsp;in interface&nbsp;<code><a href="FlushRequester.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequester</a></code></dd>
<dt>Returns:</dt>
<dd>true when passed listener is unregistered successfully.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setGlobalMemStoreLimit(long)">
<h3>setGlobalMemStoreLimit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-834">setGlobalMemStoreLimit</a></span><wbr><span class="parameters">(long&nbsp;globalMemStoreSize)</span></div>
<div class="block">Sets the global memstore limit to a new size.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="FlushRequester.html#setGlobalMemStoreLimit(long)">setGlobalMemStoreLimit</a></code>&nbsp;in interface&nbsp;<code><a href="FlushRequester.html" title="interface in org.apache.hadoop.hbase.regionserver">FlushRequester</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getHandlerCount(org.apache.hadoop.conf.Configuration)">
<h3>getHandlerCount</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-950">getHandlerCount</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;conf)</span></div>
</section>
</li>
<li>
<section class="detail" id="onConfigurationChange(org.apache.hadoop.conf.Configuration)">
<h3>onConfigurationChange</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-961">onConfigurationChange</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;newConf)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../conf/ConfigurationObserver.html#onConfigurationChange(org.apache.hadoop.conf.Configuration)">ConfigurationObserver</a></code></span></div>
<div class="block">This method would be called by the <a href="../conf/ConfigurationManager.html" title="class in org.apache.hadoop.hbase.conf"><code>ConfigurationManager</code></a> object when the
 <code>Configuration</code> object is reloaded from disk.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../conf/ConfigurationObserver.html#onConfigurationChange(org.apache.hadoop.conf.Configuration)">onConfigurationChange</a></code>&nbsp;in interface&nbsp;<code><a href="../conf/ConfigurationObserver.html" title="interface in org.apache.hadoop.hbase.conf">ConfigurationObserver</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startFlushHandlerThreads(org.apache.hadoop.hbase.regionserver.MemStoreFlusher.FlushHandler[],int,int)">
<h3>startFlushHandlerThreads</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-983">startFlushHandlerThreads</a></span><wbr><span class="parameters">(<a href="MemStoreFlusher.FlushHandler.html" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushHandler</a>[]&nbsp;flushHandlers,
 int&nbsp;start,
 int&nbsp;end)</span></div>
</section>
</li>
<li>
<section class="detail" id="stopFlushHandlerThreads(org.apache.hadoop.hbase.regionserver.MemStoreFlusher.FlushHandler[],int,int)">
<h3>stopFlushHandlerThreads</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-993">stopFlushHandlerThreads</a></span><wbr><span class="parameters">(<a href="MemStoreFlusher.FlushHandler.html" title="class in org.apache.hadoop.hbase.regionserver">MemStoreFlusher.FlushHandler</a>[]&nbsp;flushHandlers,
 int&nbsp;start,
 int&nbsp;end)</span></div>
</section>
</li>
<li>
<section class="detail" id="getFlusherCount()">
<h3>getFlusherCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/regionserver/MemStoreFlusher.html#line-1002">getFlusherCount</a></span>()</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2007&#x2013;2020 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
