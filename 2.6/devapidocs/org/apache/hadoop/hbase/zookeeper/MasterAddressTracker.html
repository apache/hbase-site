<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>MasterAddressTracker (Apache HBase 2.6.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.hadoop.hbase.zookeeper, class: MasterAddressTracker">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/MasterAddressTracker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.hadoop.hbase.zookeeper</a></div>
<h1 title="Class MasterAddressTracker" class="title">Class MasterAddressTracker</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="ZKListener.html" title="class in org.apache.hadoop.hbase.zookeeper">org.apache.hadoop.hbase.zookeeper.ZKListener</a>
<div class="inheritance"><a href="ZKNodeTracker.html" title="class in org.apache.hadoop.hbase.zookeeper">org.apache.hadoop.hbase.zookeeper.ZKNodeTracker</a>
<div class="inheritance">org.apache.hadoop.hbase.zookeeper.MasterAddressTracker</div>
</div>
</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@Private
</span><span class="modifiers">public class </span><span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-57">MasterAddressTracker</a></span>
<span class="extends-implements">extends <a href="ZKNodeTracker.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKNodeTracker</a></span></div>
<div class="block">Manages the location of the current active Master for the RegionServer.
 <p>
 Listens for ZooKeeper events related to the master address. The node <code>/master</code> will
 contain the address of the current master. This listener is interested in
 <code>NodeDeleted</code> and <code>NodeCreated</code> events on <code>/master</code>.
 <p>
 Utilizes <a href="ZKNodeTracker.html" title="class in org.apache.hadoop.hbase.zookeeper"><code>ZKNodeTracker</code></a> for zk interactions.
 <p>
 You can get the current master via <a href="#getMasterAddress()"><code>getMasterAddress()</code></a> or via
 <a href="#getMasterAddress(org.apache.hadoop.hbase.zookeeper.ZKWatcher)"><code>getMasterAddress(ZKWatcher)</code></a> if you do not have a running instance of this Tracker in
 your context.
 <p>
 This class also includes utility for interacting with the master znode, for writing and reading
 the znode content.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#backupMasters" class="member-name-link">backupMasters</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.hadoop.hbase.zookeeper.ZKNodeTracker">Fields inherited from class&nbsp;org.apache.hadoop.hbase.zookeeper.<a href="ZKNodeTracker.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKNodeTracker</a></h3>
<code><a href="ZKNodeTracker.html#abortable">abortable</a>, <a href="ZKNodeTracker.html#LOG">LOG</a>, <a href="ZKNodeTracker.html#node">node</a></code></div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.hadoop.hbase.zookeeper.ZKListener">Fields inherited from class&nbsp;org.apache.hadoop.hbase.zookeeper.<a href="ZKListener.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKListener</a></h3>
<code><a href="ZKListener.html#watcher">watcher</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.apache.hadoop.hbase.zookeeper.ZKWatcher,org.apache.hadoop.hbase.Abortable)" class="member-name-link">MasterAddressTracker</a><wbr>(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;watcher,
 <a href="../Abortable.html" title="interface in org.apache.hadoop.hbase">Abortable</a>&nbsp;abortable)</code></div>
<div class="col-last even-row-color">
<div class="block">Construct a master address listener with the specified <code>zookeeper</code> reference.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#deleteIfEquals(org.apache.hadoop.hbase.zookeeper.ZKWatcher,java.lang.String)" class="member-name-link">deleteIfEquals</a><wbr>(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;content)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">delete the master znode if its content is same as the parameter</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBackupMasterInfoPort(org.apache.hadoop.hbase.ServerName)" class="member-name-link">getBackupMasterInfoPort</a><wbr>(<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;sn)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the info port of the backup master if it is available.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getBackupMasterInfoPort(org.apache.hadoop.hbase.zookeeper.ZKWatcher,org.apache.hadoop.hbase.ServerName)" class="member-name-link">getBackupMasterInfoPort</a><wbr>(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;sn)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Get backup master info port.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBackupMasters()" class="member-name-link">getBackupMasters</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getBackupMastersAndRenewWatch(org.apache.hadoop.hbase.zookeeper.ZKWatcher)" class="member-name-link">getBackupMastersAndRenewWatch</a><wbr>(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Retrieves the list of registered backup masters and renews a watch on the znode for children
 updates.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMasterAddress()" class="member-name-link">getMasterAddress</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the address of the current master if one is available.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMasterAddress(boolean)" class="member-name-link">getMasterAddress</a><wbr>(boolean&nbsp;refresh)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the address of the current master if one is available.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMasterAddress(org.apache.hadoop.hbase.zookeeper.ZKWatcher)" class="member-name-link">getMasterAddress</a><wbr>(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Get master address.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMasterInfoPort()" class="member-name-link">getMasterInfoPort</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the info port of the current master of one is available.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMasterInfoPort(org.apache.hadoop.hbase.zookeeper.ZKWatcher)" class="member-name-link">getMasterInfoPort</a><wbr>(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Get master info port.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasMaster()" class="member-name-link">hasMaster</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Check if there is a master available.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#loadBackupMasters()" class="member-name-link">loadBackupMasters</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#nodeChildrenChanged(java.lang.String)" class="member-name-link">nodeChildrenChanged</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called when an existing node has a child node added or removed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static org.apache.hadoop.hbase.shaded.protobuf.generated.ZooKeeperProtos.Master</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#parse(byte%5B%5D)" class="member-name-link">parse</a><wbr>(byte[]&nbsp;data)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#postStart()" class="member-name-link">postStart</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called after start is called.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#setMasterAddress(org.apache.hadoop.hbase.zookeeper.ZKWatcher,java.lang.String,org.apache.hadoop.hbase.ServerName,int)" class="member-name-link">setMasterAddress</a><wbr>(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;znode,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;master,
 int&nbsp;infoPort)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Set master address into the <code>master</code> znode or into the backup subdirectory of backup
 masters; switch off the passed in <code>znode</code> path.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static byte[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#toByteArray(org.apache.hadoop.hbase.ServerName,int)" class="member-name-link">toByteArray</a><wbr>(<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;sn,
 int&nbsp;infoPort)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.hadoop.hbase.zookeeper.ZKNodeTracker">Methods inherited from class&nbsp;org.apache.hadoop.hbase.zookeeper.<a href="ZKNodeTracker.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKNodeTracker</a></h3>
<code><a href="ZKNodeTracker.html#blockUntilAvailable()">blockUntilAvailable</a>, <a href="ZKNodeTracker.html#blockUntilAvailable(long,boolean)">blockUntilAvailable</a>, <a href="ZKNodeTracker.html#checkIfBaseNodeAvailable()">checkIfBaseNodeAvailable</a>, <a href="ZKNodeTracker.html#getData(boolean)">getData</a>, <a href="ZKNodeTracker.html#getNode()">getNode</a>, <a href="ZKNodeTracker.html#nodeCreated(java.lang.String)">nodeCreated</a>, <a href="ZKNodeTracker.html#nodeDataChanged(java.lang.String)">nodeDataChanged</a>, <a href="ZKNodeTracker.html#nodeDeleted(java.lang.String)">nodeDeleted</a>, <a href="ZKNodeTracker.html#start()">start</a>, <a href="ZKNodeTracker.html#stop()">stop</a>, <a href="ZKNodeTracker.html#toString()">toString</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.hadoop.hbase.zookeeper.ZKListener">Methods inherited from class&nbsp;org.apache.hadoop.hbase.zookeeper.<a href="ZKListener.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKListener</a></h3>
<code><a href="ZKListener.html#getWatcher()">getWatcher</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="backupMasters">
<h3>backupMasters</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-60">backupMasters</a></span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.apache.hadoop.hbase.zookeeper.ZKWatcher,org.apache.hadoop.hbase.Abortable)">
<h3>MasterAddressTracker</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-70">MasterAddressTracker</a></span><wbr><span class="parameters">(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;watcher,
 <a href="../Abortable.html" title="interface in org.apache.hadoop.hbase">Abortable</a>&nbsp;abortable)</span></div>
<div class="block">Construct a master address listener with the specified <code>zookeeper</code> reference.
 <p>
 This constructor does not trigger any actions, you must call methods explicitly. Normally you
 will just want to execute <a href="ZKNodeTracker.html#start()"><code>ZKNodeTracker.start()</code></a> to begin tracking of the master address.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>watcher</code> - zk reference and watcher</dd>
<dd><code>abortable</code> - abortable in case of fatal error</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="loadBackupMasters()">
<h3>loadBackupMasters</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-74">loadBackupMasters</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="postStart()">
<h3>postStart</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-84">postStart</a></span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="ZKNodeTracker.html#postStart()">ZKNodeTracker</a></code></span></div>
<div class="block">Called after start is called. Sub classes could implement this method to load more data on zk.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="ZKNodeTracker.html#postStart()">postStart</a></code>&nbsp;in class&nbsp;<code><a href="ZKNodeTracker.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKNodeTracker</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="nodeChildrenChanged(java.lang.String)">
<h3>nodeChildrenChanged</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-89">nodeChildrenChanged</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="ZKListener.html#nodeChildrenChanged(java.lang.String)">ZKListener</a></code></span></div>
<div class="block">Called when an existing node has a child node added or removed.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="ZKListener.html#nodeChildrenChanged(java.lang.String)">nodeChildrenChanged</a></code>&nbsp;in class&nbsp;<code><a href="ZKListener.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKListener</a></code></dd>
<dt>Parameters:</dt>
<dd><code>path</code> - full path of the node whose children have changed</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMasterAddress()">
<h3>getMasterAddress</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-100">getMasterAddress</a></span>()</div>
<div class="block">Get the address of the current master if one is available. Returns null if no current master.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Server name or null if timed out.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMasterInfoPort()">
<h3>getMasterInfoPort</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-109">getMasterInfoPort</a></span>()</div>
<div class="block">Get the info port of the current master of one is available. Return 0 if no current master or
 zookeeper is unavailable</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>info port or 0 if timed out</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBackupMasterInfoPort(org.apache.hadoop.hbase.ServerName)">
<h3>getBackupMasterInfoPort</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-128">getBackupMasterInfoPort</a></span><wbr><span class="parameters">(<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;sn)</span></div>
<div class="block">Get the info port of the backup master if it is available. Return 0 if no backup master or
 zookeeper is unavailable</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sn</code> - server name of backup master</dd>
<dt>Returns:</dt>
<dd>info port or 0 if timed out or exceptions</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMasterAddress(boolean)">
<h3>getMasterAddress</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-150">getMasterAddress</a></span><wbr><span class="parameters">(boolean&nbsp;refresh)</span></div>
<div class="block">Get the address of the current master if one is available. Returns null if no current master.
 If refresh is set, try to load the data from ZK again, otherwise, cached data will be used.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>refresh</code> - whether to refresh the data by calling ZK directly.</dd>
<dt>Returns:</dt>
<dd>Server name or null if timed out.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMasterAddress(org.apache.hadoop.hbase.zookeeper.ZKWatcher)">
<h3>getMasterAddress</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-167">getMasterAddress</a></span><wbr><span class="parameters">(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw)</span>
                                   throws <span class="exceptions">org.apache.zookeeper.KeeperException,
<a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Get master address. Use this instead of <a href="#getMasterAddress()"><code>getMasterAddress()</code></a> if you do not have an
 instance of this tracker in your context.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>zkw</code> - ZKWatcher to use</dd>
<dt>Returns:</dt>
<dd>ServerName stored in the the master address znode or null if no znode present.</dd>
<dt>Throws:</dt>
<dd><code>org.apache.zookeeper.KeeperException</code> - if a ZooKeeper operation fails</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if the address of the ZooKeeper master cannot be retrieved</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMasterInfoPort(org.apache.hadoop.hbase.zookeeper.ZKWatcher)">
<h3>getMasterInfoPort</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-197">getMasterInfoPort</a></span><wbr><span class="parameters">(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw)</span>
                             throws <span class="exceptions">org.apache.zookeeper.KeeperException,
<a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Get master info port. Use this instead of <a href="#getMasterInfoPort()"><code>getMasterInfoPort()</code></a> if you do not have an
 instance of this tracker in your context.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>zkw</code> - ZKWatcher to use</dd>
<dt>Returns:</dt>
<dd>master info port in the the master address znode or null if no znode present. // TODO
         can't return null for 'int' return type. non-static verison returns 0</dd>
<dt>Throws:</dt>
<dd><code>org.apache.zookeeper.KeeperException</code> - if a ZooKeeper operation fails</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if the address of the ZooKeeper master cannot be retrieved</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBackupMasterInfoPort(org.apache.hadoop.hbase.zookeeper.ZKWatcher,org.apache.hadoop.hbase.ServerName)">
<h3>getBackupMasterInfoPort</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-226">getBackupMasterInfoPort</a></span><wbr><span class="parameters">(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;sn)</span>
                                   throws <span class="exceptions">org.apache.zookeeper.KeeperException,
<a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Get backup master info port. Use this instead of <a href="#getBackupMasterInfoPort(org.apache.hadoop.hbase.ServerName)"><code>getBackupMasterInfoPort(ServerName)</code></a>
 if you do not have an instance of this tracker in your context.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>zkw</code> - ZKWatcher to use</dd>
<dd><code>sn</code> - ServerName of the backup master</dd>
<dt>Returns:</dt>
<dd>backup master info port in the the master address znode or 0 if no znode present.</dd>
<dt>Throws:</dt>
<dd><code>org.apache.zookeeper.KeeperException</code> - if a ZooKeeper operation fails</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if the address of the ZooKeeper master cannot be retrieved</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setMasterAddress(org.apache.hadoop.hbase.zookeeper.ZKWatcher,java.lang.String,org.apache.hadoop.hbase.ServerName,int)">
<h3>setMasterAddress</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-261">setMasterAddress</a></span><wbr><span class="parameters">(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;znode,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;master,
 int&nbsp;infoPort)</span>
                                throws <span class="exceptions">org.apache.zookeeper.KeeperException</span></div>
<div class="block">Set master address into the <code>master</code> znode or into the backup subdirectory of backup
 masters; switch off the passed in <code>znode</code> path.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>zkw</code> - The ZKWatcher to use.</dd>
<dd><code>znode</code> - Where to create the znode; could be at the top level or it could be under backup
               masters</dd>
<dd><code>master</code> - ServerName of the current master must not be null.</dd>
<dt>Returns:</dt>
<dd>true if node created, false if not; a watch is set in both cases</dd>
<dt>Throws:</dt>
<dd><code>org.apache.zookeeper.KeeperException</code> - if a ZooKeeper operation fails</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasMaster()">
<h3>hasMaster</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-270">hasMaster</a></span>()</div>
<div class="block">Check if there is a master available.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if there is a master set, false if not.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toByteArray(org.apache.hadoop.hbase.ServerName,int)">
<h3>toByteArray</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-278">toByteArray</a></span><wbr><span class="parameters">(<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;sn,
 int&nbsp;infoPort)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sn</code> - must not be null</dd>
<dt>Returns:</dt>
<dd>Content of the master znode as a serialized pb with the pb magic as prefix.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="parse(byte[])">
<h3>parse</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">org.apache.hadoop.hbase.shaded.protobuf.generated.ZooKeeperProtos.Master</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-295">parse</a></span><wbr><span class="parameters">(byte[]&nbsp;data)</span>
                                                                                      throws <span class="exceptions"><a href="../exceptions/DeserializationException.html" title="class in org.apache.hadoop.hbase.exceptions">DeserializationException</a></span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>data</code> - zookeeper data. may be null</dd>
<dt>Returns:</dt>
<dd>pb object of master, null if no active master</dd>
<dt>Throws:</dt>
<dd><code><a href="../exceptions/DeserializationException.html" title="class in org.apache.hadoop.hbase.exceptions">DeserializationException</a></code> - if the parsing fails</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteIfEquals(org.apache.hadoop.hbase.zookeeper.ZKWatcher,java.lang.String)">
<h3>deleteIfEquals</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-312">deleteIfEquals</a></span><wbr><span class="parameters">(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;content)</span></div>
<div class="block">delete the master znode if its content is same as the parameter</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>zkw</code> - must not be null</dd>
<dd><code>content</code> - must not be null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBackupMasters()">
<h3>getBackupMasters</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-333">getBackupMasters</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getBackupMastersAndRenewWatch(org.apache.hadoop.hbase.zookeeper.ZKWatcher)">
<h3>getBackupMastersAndRenewWatch</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/zookeeper/MasterAddressTracker.html#line-344">getBackupMastersAndRenewWatch</a></span><wbr><span class="parameters">(<a href="ZKWatcher.html" title="class in org.apache.hadoop.hbase.zookeeper">ZKWatcher</a>&nbsp;zkw)</span>
                                                      throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/InterruptedIOException.html" title="class or interface in java.io" class="external-link">InterruptedIOException</a></span></div>
<div class="block">Retrieves the list of registered backup masters and renews a watch on the znode for children
 updates.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>zkw</code> - Zookeeper watcher to use</dd>
<dt>Returns:</dt>
<dd>List of backup masters.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/InterruptedIOException.html" title="class or interface in java.io" class="external-link">InterruptedIOException</a></code> - if there is any issue fetching the required data from Zookeeper.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2007&#x2013;2020 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
