<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>WALSplitUtil (Apache HBase 2.6.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.hadoop.hbase.wal, class: WALSplitUtil">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/WALSplitUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.hadoop.hbase.wal</a></div>
<h1 title="Class WALSplitUtil" class="title">Class WALSplitUtil</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.hadoop.hbase.wal.WALSplitUtil</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@Private
</span><span class="modifiers">public final class </span><span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-68">WALSplitUtil</a></span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">This class provides static methods to support WAL splitting related works</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="WALSplitUtil.MutationReplay.html" class="type-name-link" title="class in org.apache.hadoop.hbase.wal">WALSplitUtil.MutationReplay</a></code></div>
<div class="col-last even-row-color">
<div class="block">A struct used by getMutationsFromWALEntry</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private static final <a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html" title="class or interface in java.util.regex" class="external-link">Pattern</a></code></div>
<div class="col-second even-row-color"><code><a href="#EDITFILES_NAME_PATTERN" class="member-name-link">EDITFILES_NAME_PATTERN</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private static final org.slf4j.Logger</code></div>
<div class="col-second odd-row-color"><code><a href="#LOG" class="member-name-link">LOG</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#OLD_SEQUENCE_ID_FILE_SUFFIX" class="member-name-link">OLD_SEQUENCE_ID_FILE_SUFFIX</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#RECOVERED_LOG_TMPFILE_SUFFIX" class="member-name-link">RECOVERED_LOG_TMPFILE_SUFFIX</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#SEQUENCE_ID_FILE_SUFFIX" class="member-name-link">SEQUENCE_ID_FILE_SUFFIX</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#SEQUENCE_ID_FILE_SUFFIX_LENGTH" class="member-name-link">SEQUENCE_ID_FILE_SUFFIX_LENGTH</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier</div>
<div class="table-header col-second">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private </code></div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">WALSplitUtil</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button><button id="method-summary-table-tab6" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab6', 3)" class="table-tab">Deprecated Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#archive(org.apache.hadoop.fs.Path,boolean,org.apache.hadoop.fs.Path,org.apache.hadoop.fs.FileSystem,org.apache.hadoop.conf.Configuration)" class="member-name-link">archive</a><wbr>(org.apache.hadoop.fs.Path&nbsp;wal,
 boolean&nbsp;corrupt,
 org.apache.hadoop.fs.Path&nbsp;oldWALDir,
 org.apache.hadoop.fs.FileSystem&nbsp;walFS,
 org.apache.hadoop.conf.Configuration&nbsp;conf)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Moves processed logs to a oldLogDir after successful processing Moves corrupted logs (any log
 that couldn't be successfully parsed to corruptDir (.corrupt) for later investigation</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#finishSplitLogFile(java.lang.String,org.apache.hadoop.conf.Configuration)" class="member-name-link">finishSplitLogFile</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;logfile,
 org.apache.hadoop.conf.Configuration&nbsp;conf)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Completes the work done by splitLogFile by archiving logs</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#formatRecoveredEditsFileName(long)" class="member-name-link">formatRecoveredEditsFileName</a><wbr>(long&nbsp;seqid)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static org.apache.hadoop.fs.Path</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getCompletedRecoveredEditsFilePath(org.apache.hadoop.fs.Path,long)" class="member-name-link">getCompletedRecoveredEditsFilePath</a><wbr>(org.apache.hadoop.fs.Path&nbsp;srcPath,
 long&nbsp;maximumEditWALSeqNum)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Get the completed recovered edits file path, renaming it to be by last edit in the file from
 its first edit.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4 method-summary-table-tab6"><code>static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4 method-summary-table-tab6"><code><a href="#getMaxRegionSequenceId(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.util.IOExceptionSupplier,org.apache.hadoop.hbase.util.IOExceptionSupplier)" class="member-name-link">getMaxRegionSequenceId</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region,
 <a href="../util/IOExceptionSupplier.html" title="interface in org.apache.hadoop.hbase.util">IOExceptionSupplier</a>&lt;org.apache.hadoop.fs.FileSystem&gt;&nbsp;rootFsSupplier,
 <a href="../util/IOExceptionSupplier.html" title="interface in org.apache.hadoop.hbase.util">IOExceptionSupplier</a>&lt;org.apache.hadoop.fs.FileSystem&gt;&nbsp;walFsSupplier)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4 method-summary-table-tab6">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">Only for compatibility, will be removed in 4.0.0.</div>
</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMaxRegionSequenceId(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)" class="member-name-link">getMaxRegionSequenceId</a><wbr>(org.apache.hadoop.fs.FileSystem&nbsp;walFS,
 org.apache.hadoop.fs.Path&nbsp;regionDir)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Get the max sequence id which is stored in the region directory.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMaxSequenceId(org.apache.hadoop.fs.FileStatus%5B%5D)" class="member-name-link">getMaxSequenceId</a><wbr>(org.apache.hadoop.fs.FileStatus[]&nbsp;files)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="WALSplitUtil.MutationReplay.html" title="class in org.apache.hadoop.hbase.wal">WALSplitUtil.MutationReplay</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMutationsFromWALEntry(org.apache.hadoop.hbase.shaded.protobuf.generated.AdminProtos.WALEntry,org.apache.hadoop.hbase.CellScanner,org.apache.hadoop.hbase.util.Pair,org.apache.hadoop.hbase.client.Durability)" class="member-name-link">getMutationsFromWALEntry</a><wbr>(org.apache.hadoop.hbase.shaded.protobuf.generated.AdminProtos.WALEntry&nbsp;entry,
 <a href="../CellScanner.html" title="interface in org.apache.hadoop.hbase">CellScanner</a>&nbsp;cells,
 <a href="../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="WALKey.html" title="interface in org.apache.hadoop.hbase.wal">WALKey</a>,<wbr><a href="WALEdit.html" title="class in org.apache.hadoop.hbase.wal">WALEdit</a>&gt;&nbsp;logEntry,
 <a href="../client/Durability.html" title="enum in org.apache.hadoop.hbase.client">Durability</a>&nbsp;durability)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">This function is used to construct mutations from a WALEntry.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static org.apache.hadoop.fs.FileStatus[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getRecoveredHFiles(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,java.lang.String)" class="member-name-link">getRecoveredHFiles</a><wbr>(org.apache.hadoop.fs.FileSystem&nbsp;rootFS,
 org.apache.hadoop.fs.Path&nbsp;regionDir,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;familyName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static org.apache.hadoop.fs.Path</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getRecoveredHFilesDir(org.apache.hadoop.fs.Path,java.lang.String)" class="member-name-link">getRecoveredHFilesDir</a><wbr>(org.apache.hadoop.fs.Path&nbsp;regionDir,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;familyName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static org.apache.hadoop.fs.Path</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getRegionDirRecoveredEditsDir(org.apache.hadoop.fs.Path)" class="member-name-link">getRegionDirRecoveredEditsDir</a><wbr>(org.apache.hadoop.fs.Path&nbsp;regionDir)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static org.apache.hadoop.fs.Path</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getRegionSplitEditsPath(org.apache.hadoop.hbase.TableName,byte%5B%5D,long,java.lang.String,java.lang.String,org.apache.hadoop.conf.Configuration)" class="member-name-link">getRegionSplitEditsPath</a><wbr>(<a href="../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;tableName,
 byte[]&nbsp;encodedRegionName,
 long&nbsp;seqId,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fileNameBeingSplit,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tmpDirName,
 org.apache.hadoop.conf.Configuration&nbsp;conf)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Path to a file under RECOVERED_EDITS_DIR directory of the region found in <code>logEntry</code>
 named for the sequenceid in the passed <code>logEntry</code>: e.g.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static org.apache.hadoop.fs.FileStatus[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getSequenceIdFiles(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)" class="member-name-link">getSequenceIdFiles</a><wbr>(org.apache.hadoop.fs.FileSystem&nbsp;walFS,
 org.apache.hadoop.fs.Path&nbsp;regionDir)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/util/NavigableSet.html" title="class or interface in java.util" class="external-link">NavigableSet</a>&lt;org.apache.hadoop.fs.Path&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getSplitEditFilesSorted(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)" class="member-name-link">getSplitEditFilesSorted</a><wbr>(org.apache.hadoop.fs.FileSystem&nbsp;walFS,
 org.apache.hadoop.fs.Path&nbsp;regionDir)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns sorted set of edit files made by splitter, excluding files with '.temp' suffix.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getTmpRecoveredEditsFileName(java.lang.String)" class="member-name-link">getTmpRecoveredEditsFileName</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fileName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#hasRecoveredEdits(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.client.RegionInfo)" class="member-name-link">hasRecoveredEdits</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Check whether there is recovered.edits in the region dir</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isSequenceIdFile(org.apache.hadoop.fs.Path)" class="member-name-link">isSequenceIdFile</a><wbr>(org.apache.hadoop.fs.Path&nbsp;file)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Is the given file a region open sequence id file.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#mkdir(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)" class="member-name-link">mkdir</a><wbr>(org.apache.hadoop.fs.FileSystem&nbsp;fs,
 org.apache.hadoop.fs.Path&nbsp;dir)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static org.apache.hadoop.fs.Path</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#moveAsideBadEditsFile(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)" class="member-name-link">moveAsideBadEditsFile</a><wbr>(org.apache.hadoop.fs.FileSystem&nbsp;fs,
 org.apache.hadoop.fs.Path&nbsp;edits)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Move aside a bad edits file.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#moveWAL(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,org.apache.hadoop.fs.Path)" class="member-name-link">moveWAL</a><wbr>(org.apache.hadoop.fs.FileSystem&nbsp;fs,
 org.apache.hadoop.fs.Path&nbsp;p,
 org.apache.hadoop.fs.Path&nbsp;targetDir)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Move WAL.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static org.apache.hadoop.fs.Path</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#tryCreateRecoveredHFilesDir(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.TableName,java.lang.String,java.lang.String)" class="member-name-link">tryCreateRecoveredHFilesDir</a><wbr>(org.apache.hadoop.fs.FileSystem&nbsp;rootFS,
 org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;tableName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;encodedRegionName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;familyName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Return path to recovered.hfiles directory of the region's column family: e.g.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#writeRegionSequenceIdFile(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,long)" class="member-name-link">writeRegionSequenceIdFile</a><wbr>(org.apache.hadoop.fs.FileSystem&nbsp;walFS,
 org.apache.hadoop.fs.Path&nbsp;regionDir,
 long&nbsp;newMaxSeqId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Create a file with name as region's max sequence id</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOG">
<h3>LOG</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">org.slf4j.Logger</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-70">LOG</a></span></div>
</section>
</li>
<li>
<section class="detail" id="EDITFILES_NAME_PATTERN">
<h3>EDITFILES_NAME_PATTERN</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html" title="class or interface in java.util.regex" class="external-link">Pattern</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-72">EDITFILES_NAME_PATTERN</a></span></div>
</section>
</li>
<li>
<section class="detail" id="RECOVERED_LOG_TMPFILE_SUFFIX">
<h3>RECOVERED_LOG_TMPFILE_SUFFIX</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-73">RECOVERED_LOG_TMPFILE_SUFFIX</a></span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.wal.WALSplitUtil.RECOVERED_LOG_TMPFILE_SUFFIX">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SEQUENCE_ID_FILE_SUFFIX">
<h3>SEQUENCE_ID_FILE_SUFFIX</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-74">SEQUENCE_ID_FILE_SUFFIX</a></span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.wal.WALSplitUtil.SEQUENCE_ID_FILE_SUFFIX">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="OLD_SEQUENCE_ID_FILE_SUFFIX">
<h3>OLD_SEQUENCE_ID_FILE_SUFFIX</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-75">OLD_SEQUENCE_ID_FILE_SUFFIX</a></span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.wal.WALSplitUtil.OLD_SEQUENCE_ID_FILE_SUFFIX">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SEQUENCE_ID_FILE_SUFFIX_LENGTH">
<h3>SEQUENCE_ID_FILE_SUFFIX_LENGTH</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-76">SEQUENCE_ID_FILE_SUFFIX_LENGTH</a></span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>WALSplitUtil</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-78">WALSplitUtil</a></span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="finishSplitLogFile(java.lang.String,org.apache.hadoop.conf.Configuration)">
<h3>finishSplitLogFile</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-89">finishSplitLogFile</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;logfile,
 org.apache.hadoop.conf.Configuration&nbsp;conf)</span>
                               throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Completes the work done by splitLogFile by archiving logs
 <p>
 It is invoked by SplitLogManager once it knows that one of the SplitLogWorkers have completed
 the splitLogFile() part. If the master crashes then this function might get called multiple
 times.
 <p></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="archive(org.apache.hadoop.fs.Path,boolean,org.apache.hadoop.fs.Path,org.apache.hadoop.fs.FileSystem,org.apache.hadoop.conf.Configuration)">
<h3>archive</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-109">archive</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.Path&nbsp;wal,
 boolean&nbsp;corrupt,
 org.apache.hadoop.fs.Path&nbsp;oldWALDir,
 org.apache.hadoop.fs.FileSystem&nbsp;walFS,
 org.apache.hadoop.conf.Configuration&nbsp;conf)</span>
             throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Moves processed logs to a oldLogDir after successful processing Moves corrupted logs (any log
 that couldn't be successfully parsed to corruptDir (.corrupt) for later investigation</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="mkdir(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)">
<h3>mkdir</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-127">mkdir</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.FileSystem&nbsp;fs,
 org.apache.hadoop.fs.Path&nbsp;dir)</span>
                   throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="moveWAL(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,org.apache.hadoop.fs.Path)">
<h3>moveWAL</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-137">moveWAL</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.FileSystem&nbsp;fs,
 org.apache.hadoop.fs.Path&nbsp;p,
 org.apache.hadoop.fs.Path&nbsp;targetDir)</span>
                    throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Move WAL. Used to move processed WALs to archive or bad WALs to corrupt WAL dir. WAL may have
 already been moved; makes allowance.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRegionSplitEditsPath(org.apache.hadoop.hbase.TableName,byte[],long,java.lang.String,java.lang.String,org.apache.hadoop.conf.Configuration)">
<h3>getRegionSplitEditsPath</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">org.apache.hadoop.fs.Path</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-161">getRegionSplitEditsPath</a></span><wbr><span class="parameters">(<a href="../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;tableName,
 byte[]&nbsp;encodedRegionName,
 long&nbsp;seqId,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fileNameBeingSplit,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tmpDirName,
 org.apache.hadoop.conf.Configuration&nbsp;conf)</span>
                                                  throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Path to a file under RECOVERED_EDITS_DIR directory of the region found in <code>logEntry</code>
 named for the sequenceid in the passed <code>logEntry</code>: e.g.
 /hbase/some_table/2323432434/recovered.edits/2332. This method also ensures existence of
 RECOVERED_EDITS_DIR under the region creating it if necessary. And also set storage policy for
 RECOVERED_EDITS_DIR if WAL_STORAGE_POLICY is configured.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>tableName</code> - the table name</dd>
<dd><code>encodedRegionName</code> - the encoded region name</dd>
<dd><code>seqId</code> - the sequence id which used to generate file name</dd>
<dd><code>fileNameBeingSplit</code> - the file being split currently. Used to generate tmp file name.</dd>
<dd><code>tmpDirName</code> - of the directory used to sideline old recovered edits file</dd>
<dd><code>conf</code> - configuration</dd>
<dt>Returns:</dt>
<dd>Path to file into which to dump split log edits.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTmpRecoveredEditsFileName(java.lang.String)">
<h3>getTmpRecoveredEditsFileName</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-199">getTmpRecoveredEditsFileName</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;fileName)</span></div>
</section>
</li>
<li>
<section class="detail" id="getCompletedRecoveredEditsFilePath(org.apache.hadoop.fs.Path,long)">
<h3>getCompletedRecoveredEditsFilePath</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">org.apache.hadoop.fs.Path</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-209">getCompletedRecoveredEditsFilePath</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.Path&nbsp;srcPath,
 long&nbsp;maximumEditWALSeqNum)</span></div>
<div class="block">Get the completed recovered edits file path, renaming it to be by last edit in the file from
 its first edit. Then we could use the name to skip recovered edits when doing
 HRegion#replayRecoveredEditsIfAny(Map, CancelableProgressable, MonitoredTask).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>dstPath take file's last edit log seq num as the name</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="formatRecoveredEditsFileName(long)">
<h3>formatRecoveredEditsFileName</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-214">formatRecoveredEditsFileName</a></span><wbr><span class="parameters">(long&nbsp;seqid)</span></div>
</section>
</li>
<li>
<section class="detail" id="getRegionDirRecoveredEditsDir(org.apache.hadoop.fs.Path)">
<h3>getRegionDirRecoveredEditsDir</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">org.apache.hadoop.fs.Path</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-222">getRegionDirRecoveredEditsDir</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.Path&nbsp;regionDir)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>regionDir</code> - This regions directory in the filesystem.</dd>
<dt>Returns:</dt>
<dd>The directory that holds recovered edits files for the region <code>regionDir</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasRecoveredEdits(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.client.RegionInfo)">
<h3>hasRecoveredEdits</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-232">hasRecoveredEdits</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo)</span>
                                 throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Check whether there is recovered.edits in the region dir</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>conf</code> - conf</dd>
<dd><code>regionInfo</code> - the region to check</dd>
<dt>Returns:</dt>
<dd>true if recovered.edits exist in the region dir</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMaxRegionSequenceId(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.util.IOExceptionSupplier,org.apache.hadoop.hbase.util.IOExceptionSupplier)">
<h3>getMaxRegionSequenceId</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>
</span><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-268">getMaxRegionSequenceId</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region,
 <a href="../util/IOExceptionSupplier.html" title="interface in org.apache.hadoop.hbase.util">IOExceptionSupplier</a>&lt;org.apache.hadoop.fs.FileSystem&gt;&nbsp;rootFsSupplier,
 <a href="../util/IOExceptionSupplier.html" title="interface in org.apache.hadoop.hbase.util">IOExceptionSupplier</a>&lt;org.apache.hadoop.fs.FileSystem&gt;&nbsp;walFsSupplier)</span>
                                   throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">Only for compatibility, will be removed in 4.0.0.</div>
</div>
<div class="block">This method will check 3 places for finding the max sequence id file. One is the expected
 place, another is the old place under the region directory, and the last one is the wrong one
 we introduced in HBASE-20734. See HBASE-22617 for more details.
 <p/>
 Notice that, you should always call this method instead of
 <a href="#getMaxRegionSequenceId(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)"><code>getMaxRegionSequenceId(FileSystem, Path)</code></a> until 4.0.0 release.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSplitEditFilesSorted(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)">
<h3>getSplitEditFilesSorted</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/NavigableSet.html" title="class or interface in java.util" class="external-link">NavigableSet</a>&lt;org.apache.hadoop.fs.Path&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-293">getSplitEditFilesSorted</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.FileSystem&nbsp;walFS,
 org.apache.hadoop.fs.Path&nbsp;regionDir)</span>
                                                                       throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Returns sorted set of edit files made by splitter, excluding files with '.temp' suffix.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>walFS</code> - WAL FileSystem used to retrieving split edits files.</dd>
<dd><code>regionDir</code> - WAL region dir to look for recovered edits files under.</dd>
<dt>Returns:</dt>
<dd>Files in passed <code>regionDir</code> as a sorted set.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="moveAsideBadEditsFile(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)">
<h3>moveAsideBadEditsFile</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">org.apache.hadoop.fs.Path</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-338">moveAsideBadEditsFile</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.FileSystem&nbsp;fs,
 org.apache.hadoop.fs.Path&nbsp;edits)</span>
                                                       throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Move aside a bad edits file.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fs</code> - the file system used to rename bad edits file.</dd>
<dd><code>edits</code> - Edits file to move aside.</dd>
<dt>Returns:</dt>
<dd>The name of the moved aside file.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isSequenceIdFile(org.apache.hadoop.fs.Path)">
<h3>isSequenceIdFile</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-351">isSequenceIdFile</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.Path&nbsp;file)</span></div>
<div class="block">Is the given file a region open sequence id file.</div>
</section>
</li>
<li>
<section class="detail" id="getSequenceIdFiles(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)">
<h3>getSequenceIdFiles</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type">org.apache.hadoop.fs.FileStatus[]</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-356">getSequenceIdFiles</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.FileSystem&nbsp;walFS,
 org.apache.hadoop.fs.Path&nbsp;regionDir)</span>
                                                             throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMaxSequenceId(org.apache.hadoop.fs.FileStatus[])">
<h3>getMaxSequenceId</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-369">getMaxSequenceId</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.FileStatus[]&nbsp;files)</span></div>
</section>
</li>
<li>
<section class="detail" id="getMaxRegionSequenceId(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)">
<h3>getMaxRegionSequenceId</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-386">getMaxRegionSequenceId</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.FileSystem&nbsp;walFS,
 org.apache.hadoop.fs.Path&nbsp;regionDir)</span>
                                   throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Get the max sequence id which is stored in the region directory. -1 if none.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="writeRegionSequenceIdFile(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,long)">
<h3>writeRegionSequenceIdFile</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-393">writeRegionSequenceIdFile</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.FileSystem&nbsp;walFS,
 org.apache.hadoop.fs.Path&nbsp;regionDir,
 long&nbsp;newMaxSeqId)</span>
                                      throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Create a file with name as region's max sequence id</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMutationsFromWALEntry(org.apache.hadoop.hbase.shaded.protobuf.generated.AdminProtos.WALEntry,org.apache.hadoop.hbase.CellScanner,org.apache.hadoop.hbase.util.Pair,org.apache.hadoop.hbase.client.Durability)">
<h3>getMutationsFromWALEntry</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="WALSplitUtil.MutationReplay.html" title="class in org.apache.hadoop.hbase.wal">WALSplitUtil.MutationReplay</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-476">getMutationsFromWALEntry</a></span><wbr><span class="parameters">(org.apache.hadoop.hbase.shaded.protobuf.generated.AdminProtos.WALEntry&nbsp;entry,
 <a href="../CellScanner.html" title="interface in org.apache.hadoop.hbase">CellScanner</a>&nbsp;cells,
 <a href="../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="WALKey.html" title="interface in org.apache.hadoop.hbase.wal">WALKey</a>,<wbr><a href="WALEdit.html" title="class in org.apache.hadoop.hbase.wal">WALEdit</a>&gt;&nbsp;logEntry,
 <a href="../client/Durability.html" title="enum in org.apache.hadoop.hbase.client">Durability</a>&nbsp;durability)</span>
                                                                  throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">This function is used to construct mutations from a WALEntry. It also reconstructs WALKey &amp;
 WALEdit from the passed in WALEntry</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>logEntry</code> - pair of WALKey and WALEdit instance stores WALKey and WALEdit instances
                 extracted from the passed in WALEntry.</dd>
<dt>Returns:</dt>
<dd>list of Pair&lt;MutationType, Mutation&gt; to be replayed</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryCreateRecoveredHFilesDir(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.TableName,java.lang.String,java.lang.String)">
<h3>tryCreateRecoveredHFilesDir</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">org.apache.hadoop.fs.Path</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-565">tryCreateRecoveredHFilesDir</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.FileSystem&nbsp;rootFS,
 org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;tableName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;encodedRegionName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;familyName)</span>
                                                      throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Return path to recovered.hfiles directory of the region's column family: e.g.
 /hbase/some_table/2323432434/cf/recovered.hfiles/. This method also ensures existence of
 recovered.hfiles directory under the region's column family, creating it if necessary.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>rootFS</code> - the root file system</dd>
<dd><code>conf</code> - configuration</dd>
<dd><code>tableName</code> - the table name</dd>
<dd><code>encodedRegionName</code> - the encoded region name</dd>
<dd><code>familyName</code> - the column family name</dd>
<dt>Returns:</dt>
<dd>Path to recovered.hfiles directory of the region's column family.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRecoveredHFilesDir(org.apache.hadoop.fs.Path,java.lang.String)">
<h3>getRecoveredHFilesDir</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type">org.apache.hadoop.fs.Path</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-583">getRecoveredHFilesDir</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.Path&nbsp;regionDir,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;familyName)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>regionDir</code> - This regions directory in the filesystem</dd>
<dd><code>familyName</code> - The column family name</dd>
<dt>Returns:</dt>
<dd>The directory that holds recovered hfiles for the region's column family</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRecoveredHFiles(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,java.lang.String)">
<h3>getRecoveredHFiles</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">org.apache.hadoop.fs.FileStatus[]</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/WALSplitUtil.html#line-587">getRecoveredHFiles</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.FileSystem&nbsp;rootFS,
 org.apache.hadoop.fs.Path&nbsp;regionDir,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;familyName)</span>
                                                            throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2007&#x2013;2020 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
