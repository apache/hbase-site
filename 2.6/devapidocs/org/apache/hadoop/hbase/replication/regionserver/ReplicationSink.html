<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ReplicationSink (Apache HBase 2.6.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.hadoop.hbase.replication.regionserver, class: ReplicationSink">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ReplicationSink.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.hadoop.hbase.replication.regionserver</a></div>
<h1 title="Class ReplicationSink" class="title">Class ReplicationSink</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.hadoop.hbase.replication.regionserver.ReplicationSink</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@Private
</span><span class="modifiers">public class </span><span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-94">ReplicationSink</a></span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block"><p>
 This class is responsible for replicating the edits coming from another cluster.
 </p>
 <p>
 This replication process is currently waiting for the edits to be applied before the method can
 return. This means that the replication of edits is synchronized (after reading from WALs in
 ReplicationSource) and that a single region server cannot receive edits from two sources at the
 same time
 </p>
 <p>
 This class uses the native HBase client in order to replicate entries.
 </p>
 TODO make this class more like ReplicationSource wrt log handling</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private final org.apache.hadoop.conf.Configuration</code></div>
<div class="col-second even-row-color"><code><a href="#conf" class="member-name-link">conf</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private long</code></div>
<div class="col-second odd-row-color"><code><a href="#hfilesReplicated" class="member-name-link">hfilesReplicated</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private static final org.slf4j.Logger</code></div>
<div class="col-second even-row-color"><code><a href="#LOG" class="member-name-link">LOG</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private final <a href="MetricsSink.html" title="class in org.apache.hadoop.hbase.replication.regionserver">MetricsSink</a></code></div>
<div class="col-second odd-row-color"><code><a href="#metrics" class="member-name-link">metrics</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private <a href="SourceFSConfigurationProvider.html" title="interface in org.apache.hadoop.hbase.replication.regionserver">SourceFSConfigurationProvider</a></code></div>
<div class="col-second even-row-color"><code><a href="#provider" class="member-name-link">provider</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#replicationSinkTrackerEnabled" class="member-name-link">replicationSinkTrackerEnabled</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private final int</code></div>
<div class="col-second even-row-color"><code><a href="#rowSizeWarnThreshold" class="member-name-link">rowSizeWarnThreshold</a></code></div>
<div class="col-last even-row-color">
<div class="block">Row size threshold for multi requests above which a warning is logged</div>
</div>
<div class="col-first odd-row-color"><code>private final <a href="../../regionserver/RegionServerCoprocessorHost.html" title="class in org.apache.hadoop.hbase.regionserver">RegionServerCoprocessorHost</a></code></div>
<div class="col-second odd-row-color"><code><a href="#rsServerHost" class="member-name-link">rsServerHost</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private <a href="../../client/AsyncConnection.html" title="interface in org.apache.hadoop.hbase.client">AsyncConnection</a></code></div>
<div class="col-second even-row-color"><code><a href="#sharedAsyncConnection" class="member-name-link">sharedAsyncConnection</a></code></div>
<div class="col-last even-row-color">
<div class="block">This shared <a href="../../client/AsyncConnection.html" title="interface in org.apache.hadoop.hbase.client"><code>AsyncConnection</code></a> is used for handling wal replication.</div>
</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second odd-row-color"><code><a href="#sharedAsyncConnectionLock" class="member-name-link">sharedAsyncConnectionLock</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private <a href="../../client/Connection.html" title="interface in org.apache.hadoop.hbase.client">Connection</a></code></div>
<div class="col-second even-row-color"><code><a href="#sharedConnection" class="member-name-link">sharedConnection</a></code></div>
<div class="col-last even-row-color">
<div class="block">This shared <a href="../../client/Connection.html" title="interface in org.apache.hadoop.hbase.client"><code>Connection</code></a> is used for handling bulk load hfiles replication.</div>
</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second odd-row-color"><code><a href="#sharedConnectionLock" class="member-name-link">sharedConnectionLock</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicLong.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicLong</a></code></div>
<div class="col-second even-row-color"><code><a href="#totalReplicatedEdits" class="member-name-link">totalReplicatedEdits</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private <a href="WALEntrySinkFilter.html" title="interface in org.apache.hadoop.hbase.replication.regionserver">WALEntrySinkFilter</a></code></div>
<div class="col-second odd-row-color"><code><a href="#walEntrySinkFilter" class="member-name-link">walEntrySinkFilter</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.regionserver.RegionServerCoprocessorHost)" class="member-name-link">ReplicationSink</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="../../regionserver/RegionServerCoprocessorHost.html" title="class in org.apache.hadoop.hbase.regionserver">RegionServerCoprocessorHost</a>&nbsp;rsServerHost)</code></div>
<div class="col-last even-row-color">
<div class="block">Create a sink for replication</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addFamilyAndItsHFilePathToTableInMap(byte%5B%5D,java.lang.String,java.util.List)" class="member-name-link">addFamilyAndItsHFilePathToTableInMap</a><wbr>(byte[]&nbsp;family,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pathToHfileFromNS,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;&gt;&nbsp;familyHFilePathsList)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addNewTableEntryInMap(java.util.Map,byte%5B%5D,java.lang.String,java.lang.String)" class="member-name-link">addNewTableEntryInMap</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;&gt;&gt;&nbsp;bulkLoadHFileMap,
 byte[]&nbsp;family,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pathToHfileFromNS,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tableName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private &lt;K1,<wbr>
K2,<wbr>
V&gt;&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;V&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addToHashMultiMap(java.util.Map,K1,K2,V)" class="member-name-link">addToHashMultiMap</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;K1,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;K2,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;V&gt;&gt;&gt;&nbsp;map,
 K1&nbsp;key1,
 K2&nbsp;key2,
 V&nbsp;value)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Simple helper to a map from key to (a list of) values TODO: Make a general utility method *
 * @return the list of values corresponding to key1 and key2</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#batch(org.apache.hadoop.hbase.TableName,java.util.Collection,int)" class="member-name-link">batch</a><wbr>(<a href="../../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;tableName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/Row.html" title="interface in org.apache.hadoop.hbase.client">Row</a>&gt;&gt;&nbsp;allRows,
 int&nbsp;batchRowSizeThreshold)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Do the changes and handle the pool</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#buildBulkLoadHFileMap(java.util.Map,org.apache.hadoop.hbase.TableName,org.apache.hadoop.hbase.shaded.protobuf.generated.WALProtos.BulkLoadDescriptor)" class="member-name-link">buildBulkLoadHFileMap</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;&gt;&gt;&nbsp;bulkLoadHFileMap,
 <a href="../../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;table,
 org.apache.hadoop.hbase.shaded.protobuf.generated.WALProtos.BulkLoadDescriptor&nbsp;bld)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#decorateConf()" class="member-name-link">decorateConf</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">decorate the Configuration object to make replication more receptive to delays: lessen the
 timeout and numTries.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="../../client/AsyncConnection.html" title="interface in org.apache.hadoop.hbase.client">AsyncConnection</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAsyncConnection()" class="member-name-link">getAsyncConnection</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the shared <a href="../../client/AsyncConnection.html" title="interface in org.apache.hadoop.hbase.client"><code>AsyncConnection</code></a> which is used for handling wal replication.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="../../client/Connection.html" title="interface in org.apache.hadoop.hbase.client">Connection</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConnection()" class="member-name-link">getConnection</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the shared <a href="../../client/Connection.html" title="interface in org.apache.hadoop.hbase.client"><code>Connection</code></a> which is used for handling bulk load hfiles replication.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getHFilePath(org.apache.hadoop.hbase.TableName,org.apache.hadoop.hbase.shaded.protobuf.generated.WALProtos.BulkLoadDescriptor,java.lang.String,byte%5B%5D)" class="member-name-link">getHFilePath</a><wbr>(<a href="../../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;table,
 org.apache.hadoop.hbase.shaded.protobuf.generated.WALProtos.BulkLoadDescriptor&nbsp;bld,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;storeFile,
 byte[]&nbsp;family)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="MetricsSink.html" title="class in org.apache.hadoop.hbase.replication.regionserver">MetricsSink</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSinkMetrics()" class="member-name-link">getSinkMetrics</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get replication Sink Metrics</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStats()" class="member-name-link">getStats</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get a string representation of this sink's metrics</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isNewRowOrType(org.apache.hadoop.hbase.Cell,org.apache.hadoop.hbase.Cell)" class="member-name-link">isNewRowOrType</a><wbr>(<a href="../../Cell.html" title="interface in org.apache.hadoop.hbase">Cell</a>&nbsp;previousCell,
 <a href="../../Cell.html" title="interface in org.apache.hadoop.hbase">Cell</a>&nbsp;cell)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns True if we have crossed over onto a new row or type</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="../../client/Put.html" title="class in org.apache.hadoop.hbase.client">Put</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processReplicationMarkerEntry(org.apache.hadoop.hbase.Cell)" class="member-name-link">processReplicationMarkerEntry</a><wbr>(<a href="../../Cell.html" title="interface in org.apache.hadoop.hbase">Cell</a>&nbsp;cell)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#replicateEntries(java.util.List,org.apache.hadoop.hbase.CellScanner,java.lang.String,java.lang.String,java.lang.String)" class="member-name-link">replicateEntries</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;org.apache.hadoop.hbase.shaded.protobuf.generated.AdminProtos.WALEntry&gt;&nbsp;entries,
 <a href="../../CellScanner.html" title="interface in org.apache.hadoop.hbase">CellScanner</a>&nbsp;cells,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;replicationClusterId,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sourceBaseNamespaceDirPath,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sourceHFileArchiveDirPath)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Replicate this array of entries directly into the local cluster using the native client.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="WALEntrySinkFilter.html" title="interface in org.apache.hadoop.hbase.replication.regionserver">WALEntrySinkFilter</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setupWALEntrySinkFilter()" class="member-name-link">setupWALEntrySinkFilter</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#stopReplicationSinkServices()" class="member-name-link">stopReplicationSinkServices</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">stop the thread pool executor.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toUUID(org.apache.hadoop.hbase.shaded.protobuf.generated.HBaseProtos.UUID)" class="member-name-link">toUUID</a><wbr>(org.apache.hadoop.hbase.shaded.protobuf.generated.HBaseProtos.UUID&nbsp;uuid)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOG">
<h3>LOG</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">org.slf4j.Logger</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-97">LOG</a></span></div>
</section>
</li>
<li>
<section class="detail" id="conf">
<h3>conf</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">org.apache.hadoop.conf.Configuration</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-98">conf</a></span></div>
</section>
</li>
<li>
<section class="detail" id="sharedConnection">
<h3>sharedConnection</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type"><a href="../../client/Connection.html" title="interface in org.apache.hadoop.hbase.client">Connection</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-104">sharedConnection</a></span></div>
<div class="block">This shared <a href="../../client/Connection.html" title="interface in org.apache.hadoop.hbase.client"><code>Connection</code></a> is used for handling bulk load hfiles replication.</div>
</section>
</li>
<li>
<section class="detail" id="sharedAsyncConnection">
<h3>sharedAsyncConnection</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type"><a href="../../client/AsyncConnection.html" title="interface in org.apache.hadoop.hbase.client">AsyncConnection</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-108">sharedAsyncConnection</a></span></div>
<div class="block">This shared <a href="../../client/AsyncConnection.html" title="interface in org.apache.hadoop.hbase.client"><code>AsyncConnection</code></a> is used for handling wal replication.</div>
</section>
</li>
<li>
<section class="detail" id="metrics">
<h3>metrics</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="MetricsSink.html" title="class in org.apache.hadoop.hbase.replication.regionserver">MetricsSink</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-109">metrics</a></span></div>
</section>
</li>
<li>
<section class="detail" id="totalReplicatedEdits">
<h3>totalReplicatedEdits</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicLong.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicLong</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-110">totalReplicatedEdits</a></span></div>
</section>
</li>
<li>
<section class="detail" id="sharedConnectionLock">
<h3>sharedConnectionLock</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-111">sharedConnectionLock</a></span></div>
</section>
</li>
<li>
<section class="detail" id="sharedAsyncConnectionLock">
<h3>sharedAsyncConnectionLock</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-112">sharedAsyncConnectionLock</a></span></div>
</section>
</li>
<li>
<section class="detail" id="hfilesReplicated">
<h3>hfilesReplicated</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-114">hfilesReplicated</a></span></div>
</section>
</li>
<li>
<section class="detail" id="provider">
<h3>provider</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="SourceFSConfigurationProvider.html" title="interface in org.apache.hadoop.hbase.replication.regionserver">SourceFSConfigurationProvider</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-115">provider</a></span></div>
</section>
</li>
<li>
<section class="detail" id="walEntrySinkFilter">
<h3>walEntrySinkFilter</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="WALEntrySinkFilter.html" title="interface in org.apache.hadoop.hbase.replication.regionserver">WALEntrySinkFilter</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-116">walEntrySinkFilter</a></span></div>
</section>
</li>
<li>
<section class="detail" id="rowSizeWarnThreshold">
<h3>rowSizeWarnThreshold</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-121">rowSizeWarnThreshold</a></span></div>
<div class="block">Row size threshold for multi requests above which a warning is logged</div>
</section>
</li>
<li>
<section class="detail" id="replicationSinkTrackerEnabled">
<h3>replicationSinkTrackerEnabled</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-122">replicationSinkTrackerEnabled</a></span></div>
</section>
</li>
<li>
<section class="detail" id="rsServerHost">
<h3>rsServerHost</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../../regionserver/RegionServerCoprocessorHost.html" title="class in org.apache.hadoop.hbase.regionserver">RegionServerCoprocessorHost</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-124">rsServerHost</a></span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.regionserver.RegionServerCoprocessorHost)">
<h3>ReplicationSink</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-131">ReplicationSink</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="../../regionserver/RegionServerCoprocessorHost.html" title="class in org.apache.hadoop.hbase.regionserver">RegionServerCoprocessorHost</a>&nbsp;rsServerHost)</span>
                throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Create a sink for replication</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>conf</code> - conf object</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - thrown when HDFS goes bad or bad file name</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setupWALEntrySinkFilter()">
<h3>setupWALEntrySinkFilter</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="WALEntrySinkFilter.html" title="interface in org.apache.hadoop.hbase.replication.regionserver">WALEntrySinkFilter</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-154">setupWALEntrySinkFilter</a></span>()
                                            throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="decorateConf()">
<h3>decorateConf</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-175">decorateConf</a></span>()</div>
<div class="block">decorate the Configuration object to make replication more receptive to delays: lessen the
 timeout and numTries.</div>
</section>
</li>
<li>
<section class="detail" id="replicateEntries(java.util.List,org.apache.hadoop.hbase.CellScanner,java.lang.String,java.lang.String,java.lang.String)">
<h3>replicateEntries</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-202">replicateEntries</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;org.apache.hadoop.hbase.shaded.protobuf.generated.AdminProtos.WALEntry&gt;&nbsp;entries,
 <a href="../../CellScanner.html" title="interface in org.apache.hadoop.hbase">CellScanner</a>&nbsp;cells,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;replicationClusterId,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sourceBaseNamespaceDirPath,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sourceHFileArchiveDirPath)</span>
                      throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Replicate this array of entries directly into the local cluster using the native client. Only
 operates against raw protobuf type saving on a conversion from pb to pojo.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>entries</code> - WAL entries to be replicated.</dd>
<dd><code>cells</code> - cell scanner for iteration.</dd>
<dd><code>replicationClusterId</code> - Id which will uniquely identify source cluster FS client
                                   configurations in the replication configuration directory</dd>
<dd><code>sourceBaseNamespaceDirPath</code> - Path that point to the source cluster base namespace
                                   directory</dd>
<dd><code>sourceHFileArchiveDirPath</code> - Path that point to the source cluster hfile archive directory</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - If failed to replicate the data</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processReplicationMarkerEntry(org.apache.hadoop.hbase.Cell)">
<h3>processReplicationMarkerEntry</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="../../client/Put.html" title="class in org.apache.hadoop.hbase.client">Put</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-349">processReplicationMarkerEntry</a></span><wbr><span class="parameters">(<a href="../../Cell.html" title="interface in org.apache.hadoop.hbase">Cell</a>&nbsp;cell)</span>
                                   throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="buildBulkLoadHFileMap(java.util.Map,org.apache.hadoop.hbase.TableName,org.apache.hadoop.hbase.shaded.protobuf.generated.WALProtos.BulkLoadDescriptor)">
<h3>buildBulkLoadHFileMap</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-370">buildBulkLoadHFileMap</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;&gt;&gt;&nbsp;bulkLoadHFileMap,
 <a href="../../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;table,
 org.apache.hadoop.hbase.shaded.protobuf.generated.WALProtos.BulkLoadDescriptor&nbsp;bld)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addFamilyAndItsHFilePathToTableInMap(byte[],java.lang.String,java.util.List)">
<h3>addFamilyAndItsHFilePathToTableInMap</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-409">addFamilyAndItsHFilePathToTableInMap</a></span><wbr><span class="parameters">(byte[]&nbsp;family,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pathToHfileFromNS,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;&gt;&nbsp;familyHFilePathsList)</span></div>
</section>
</li>
<li>
<section class="detail" id="addNewTableEntryInMap(java.util.Map,byte[],java.lang.String,java.lang.String)">
<h3>addNewTableEntryInMap</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-416">addNewTableEntryInMap</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;byte[],<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;&gt;&gt;&nbsp;bulkLoadHFileMap,
 byte[]&nbsp;family,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pathToHfileFromNS,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tableName)</span></div>
</section>
</li>
<li>
<section class="detail" id="getHFilePath(org.apache.hadoop.hbase.TableName,org.apache.hadoop.hbase.shaded.protobuf.generated.WALProtos.BulkLoadDescriptor,java.lang.String,byte[])">
<h3>getHFilePath</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-427">getHFilePath</a></span><wbr><span class="parameters">(<a href="../../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;table,
 org.apache.hadoop.hbase.shaded.protobuf.generated.WALProtos.BulkLoadDescriptor&nbsp;bld,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;storeFile,
 byte[]&nbsp;family)</span></div>
</section>
</li>
<li>
<section class="detail" id="isNewRowOrType(org.apache.hadoop.hbase.Cell,org.apache.hadoop.hbase.Cell)">
<h3>isNewRowOrType</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-436">isNewRowOrType</a></span><wbr><span class="parameters">(<a href="../../Cell.html" title="interface in org.apache.hadoop.hbase">Cell</a>&nbsp;previousCell,
 <a href="../../Cell.html" title="interface in org.apache.hadoop.hbase">Cell</a>&nbsp;cell)</span></div>
<div class="block">Returns True if we have crossed over onto a new row or type</div>
</section>
</li>
<li>
<section class="detail" id="toUUID(org.apache.hadoop.hbase.shaded.protobuf.generated.HBaseProtos.UUID)">
<h3>toUUID</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-441">toUUID</a></span><wbr><span class="parameters">(org.apache.hadoop.hbase.shaded.protobuf.generated.HBaseProtos.UUID&nbsp;uuid)</span></div>
</section>
</li>
<li>
<section class="detail" id="addToHashMultiMap(java.util.Map,K1,K2,V)">
<h3 id="addToHashMultiMap(java.util.Map,java.lang.Object,java.lang.Object,java.lang.Object)">addToHashMultiMap</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="type-parameters">&lt;K1,<wbr>
K2,<wbr>
V&gt;</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;V&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-449">addToHashMultiMap</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;K1,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;K2,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;V&gt;&gt;&gt;&nbsp;map,
 K1&nbsp;key1,
 K2&nbsp;key2,
 V&nbsp;value)</span></div>
<div class="block">Simple helper to a map from key to (a list of) values TODO: Make a general utility method *
 * @return the list of values corresponding to key1 and key2</div>
</section>
</li>
<li>
<section class="detail" id="stopReplicationSinkServices()">
<h3>stopReplicationSinkServices</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-460">stopReplicationSinkServices</a></span>()</div>
<div class="block">stop the thread pool executor. It is called when the regionserver is stopped.</div>
</section>
</li>
<li>
<section class="detail" id="batch(org.apache.hadoop.hbase.TableName,java.util.Collection,int)">
<h3>batch</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-496">batch</a></span><wbr><span class="parameters">(<a href="../../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;tableName,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/Row.html" title="interface in org.apache.hadoop.hbase.client">Row</a>&gt;&gt;&nbsp;allRows,
 int&nbsp;batchRowSizeThreshold)</span>
            throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Do the changes and handle the pool</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>tableName</code> - table to insert into</dd>
<dd><code>allRows</code> - list of actions</dd>
<dd><code>batchRowSizeThreshold</code> - rowSize threshold for batch mutation</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getConnection()">
<h3>getConnection</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="../../client/Connection.html" title="interface in org.apache.hadoop.hbase.client">Connection</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-528">getConnection</a></span>()
                          throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Return the shared <a href="../../client/Connection.html" title="interface in org.apache.hadoop.hbase.client"><code>Connection</code></a> which is used for handling bulk load hfiles replication.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAsyncConnection()">
<h3>getAsyncConnection</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="../../client/AsyncConnection.html" title="interface in org.apache.hadoop.hbase.client">AsyncConnection</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-546">getAsyncConnection</a></span>()
                                    throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Return the shared <a href="../../client/AsyncConnection.html" title="interface in org.apache.hadoop.hbase.client"><code>AsyncConnection</code></a> which is used for handling wal replication.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStats()">
<h3>getStats</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-569">getStats</a></span>()</div>
<div class="block">Get a string representation of this sink's metrics</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>string with the total replicated edits count and the date of the last edit that was
         applied</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSinkMetrics()">
<h3>getSinkMetrics</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="MetricsSink.html" title="class in org.apache.hadoop.hbase.replication.regionserver">MetricsSink</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.html#line-579">getSinkMetrics</a></span>()</div>
<div class="block">Get replication Sink Metrics</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2007&#x2013;2020 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
