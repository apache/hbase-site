<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>Procedure (Apache HBase 4.0.0-alpha-1-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.hadoop.hbase.procedure2, class: Procedure">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Procedure.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.hadoop.hbase.procedure2</a></div>
<h1 title="Class Procedure" class="title">Class Procedure&lt;TEnvironment&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.hadoop.hbase.procedure2.Procedure&lt;TEnvironment&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Comparable.html" title="class or interface in java.lang" class="external-link">Comparable</a>&lt;<a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;TEnvironment&gt;&gt;</code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="../master/replication/ClaimReplicationQueuesProcedure.html" title="class in org.apache.hadoop.hbase.master.replication">ClaimReplicationQueuesProcedure</a></code>, <code><a href="FailedProcedure.html" title="class in org.apache.hadoop.hbase.procedure2">FailedProcedure</a></code>, <code><a href="../master/procedure/FlushRegionProcedure.html" title="class in org.apache.hadoop.hbase.master.procedure">FlushRegionProcedure</a></code>, <code><a href="../master/locking/LockProcedure.html" title="class in org.apache.hadoop.hbase.master.locking">LockProcedure</a></code>, <code><a href="OnePhaseProcedure.html" title="class in org.apache.hadoop.hbase.procedure2">OnePhaseProcedure</a></code>, <code><a href="ProcedureInMemoryChore.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureInMemoryChore</a></code>, <code><a href="../master/assignment/RegionRemoteProcedureBase.html" title="class in org.apache.hadoop.hbase.master.assignment">RegionRemoteProcedureBase</a></code>, <code><a href="../master/assignment/RegionTransitionProcedure.html" title="class in org.apache.hadoop.hbase.master.assignment">RegionTransitionProcedure</a></code>, <code><a href="SequentialProcedure.html" title="class in org.apache.hadoop.hbase.procedure2">SequentialProcedure</a></code>, <code><a href="../master/procedure/ServerRemoteProcedure.html" title="class in org.apache.hadoop.hbase.master.procedure">ServerRemoteProcedure</a></code>, <code><a href="../master/procedure/SnapshotRegionProcedure.html" title="class in org.apache.hadoop.hbase.master.procedure">SnapshotRegionProcedure</a></code>, <code><a href="StateMachineProcedure.html" title="class in org.apache.hadoop.hbase.procedure2">StateMachineProcedure</a></code>, <code><a href="TwoPhaseProcedure.html" title="class in org.apache.hadoop.hbase.procedure2">TwoPhaseProcedure</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@Private
</span><span class="modifiers">public abstract class </span><span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-111">Procedure</a>&lt;TEnvironment&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Comparable.html" title="class or interface in java.lang" class="external-link">Comparable</a>&lt;<a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;TEnvironment&gt;&gt;</span></div>
<div class="block">Base Procedure class responsible for Procedure Metadata; e.g. state, submittedTime, lastUpdate,
 stack-indexes, etc.
 <p/>
 Procedures are run by a <a href="ProcedureExecutor.html" title="class in org.apache.hadoop.hbase.procedure2"><code>ProcedureExecutor</code></a> instance. They are submitted and then the
 ProcedureExecutor keeps calling <a href="#execute(TEnvironment)"><code>execute(Object)</code></a> until the Procedure is done. Execute may
 be called multiple times in the case of failure or a restart, so code must be idempotent. The
 return from an execute call is either: null to indicate we are done; ourself if there is more to
 do; or, a set of sub-procedures that need to be run to completion before the framework resumes
 our execution.
 <p/>
 The ProcedureExecutor keeps its notion of Procedure State in the Procedure itself; e.g. it stamps
 the Procedure as INITIALIZING, RUNNABLE, SUCCESS, etc. Here are some of the States defined in the
 ProcedureState enum from protos:
 <ul>
 <li><a href="#isFailed()"><code>isFailed()</code></a> A procedure has executed at least once and has failed. The procedure may
 or may not have rolled back yet. Any procedure in FAILED state will be eventually moved to
 ROLLEDBACK state.</li>
 <li><a href="#isSuccess()"><code>isSuccess()</code></a> A procedure is completed successfully without exception.</li>
 <li><a href="#isFinished()"><code>isFinished()</code></a> As a procedure in FAILED state will be tried forever for rollback, only
 condition when scheduler/ executor will drop procedure from further processing is when procedure
 state is ROLLEDBACK or isSuccess() returns true. This is a terminal state of the procedure.</li>
 <li><a href="#isWaiting()"><code>isWaiting()</code></a> - Procedure is in one of the two waiting states
 (<code>ProcedureProtos.ProcedureState.WAITING</code>, <code>ProcedureProtos.ProcedureState.WAITING_TIMEOUT</code>).</li>
 </ul>
 NOTE: These states are of the ProcedureExecutor. Procedure implementations in turn can keep their
 own state. This can lead to confusion. Try to keep the two distinct.
 <p/>
 rollback() is called when the procedure or one of the sub-procedures has failed. The rollback
 step is supposed to cleanup the resources created during the execute() step. In case of failure
 and restart, rollback() may be called multiple times, so again the code must be idempotent.
 <p/>
 Procedure can be made respect a locking regime. It has acquire/release methods as well as an
 <a href="#hasLock()"><code>hasLock()</code></a>. The lock implementation is up to the implementor. If an entity needs to be
 locked for the life of a procedure -- not just the calls to execute -- then implementations
 should say so with the <a href="#holdLock(TEnvironment)"><code>holdLock(Object)</code></a> method.
 <p/>
 And since we need to restore the lock when restarting to keep the logic correct(HBASE-20846), the
 implementation is a bit tricky so we add some comments hrre about it.
 <ul>
 <li>Make <a href="#hasLock()"><code>hasLock()</code></a> method final, and add a <a href="#locked"><code>locked</code></a> field in Procedure to record
 whether we have the lock. We will set it to <code>true</code> in
 <a href="#doAcquireLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)"><code>doAcquireLock(Object, ProcedureStore)</code></a> and to <code>false</code> in
 <a href="#doReleaseLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)"><code>doReleaseLock(Object, ProcedureStore)</code></a>. The sub classes do not need to manage it any
 more.</li>
 <li>Also added a locked field in the proto message. When storing, the field will be set according
 to the return value of <a href="#hasLock()"><code>hasLock()</code></a>. And when loading, there is a new field in Procedure
 called <a href="#lockedWhenLoading"><code>lockedWhenLoading</code></a>. We will set it to <code>true</code> if the locked field in proto
 message is <code>true</code>.</li>
 <li>The reason why we can not set the <a href="#locked"><code>locked</code></a> field directly to <code>true</code> by calling
 <a href="#doAcquireLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)"><code>doAcquireLock(Object, ProcedureStore)</code></a> is that, during initialization, most procedures
 need to wait until master is initialized. So the solution here is that, we introduced a new
 method called <a href="#waitInitialized(TEnvironment)"><code>waitInitialized(Object)</code></a> in Procedure, and move the wait master initialized
 related code from <a href="#acquireLock(TEnvironment)"><code>acquireLock(Object)</code></a> to this method. And we added a restoreLock method
 to Procedure, if <a href="#lockedWhenLoading"><code>lockedWhenLoading</code></a> is <code>true</code>, we will call the
 <a href="#acquireLock(TEnvironment)"><code>acquireLock(Object)</code></a> to get the lock, but do not set <a href="#locked"><code>locked</code></a> to true. And later
 when we call <a href="#doAcquireLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)"><code>doAcquireLock(Object, ProcedureStore)</code></a> and pass the
 <a href="#waitInitialized(TEnvironment)"><code>waitInitialized(Object)</code></a> check, we will test <a href="#lockedWhenLoading"><code>lockedWhenLoading</code></a>, if it is
 <code>true</code>, when we just set the <a href="#locked"><code>locked</code></a> field to true and return, without actually
 calling the <a href="#acquireLock(TEnvironment)"><code>acquireLock(Object)</code></a> method since we have already called it once.</li>
 </ul>
 <p/>
 Procedures can be suspended or put in wait state with a callback that gets executed on
 Procedure-specified timeout. See <a href="#setTimeout(int)"><code>setTimeout(int)</code></a>}, and
 <a href="#setTimeoutFailure(TEnvironment)"><code>setTimeoutFailure(Object)</code></a>. See TestProcedureEvents and the TestTimeoutEventProcedure
 class for an example usage.
 </p>
 <p/>
 There are hooks for collecting metrics on submit of the procedure and on finish. See
 <a href="#updateMetricsOnSubmit(TEnvironment)"><code>updateMetricsOnSubmit(Object)</code></a> and <a href="#updateMetricsOnFinish(TEnvironment,long,boolean)"><code>updateMetricsOnFinish(Object, long, boolean)</code></a>.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="Procedure.LockState.html" class="type-name-link" title="enum class in org.apache.hadoop.hbase.procedure2">Procedure.LockState</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private boolean</code></div>
<div class="col-second even-row-color"><code><a href="#bypass" class="member-name-link">bypass</a></code></div>
<div class="col-last even-row-color">
<div class="block">Used for override complete of the procedure without actually doing any logic in the procedure.</div>
</div>
<div class="col-first odd-row-color"><code>private int</code></div>
<div class="col-second odd-row-color"><code><a href="#childrenLatch" class="member-name-link">childrenLatch</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private <a href="RemoteProcedureException.html" title="class in org.apache.hadoop.hbase.procedure2">RemoteProcedureException</a></code></div>
<div class="col-second even-row-color"><code><a href="#exception" class="member-name-link">exception</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private long</code></div>
<div class="col-second odd-row-color"><code><a href="#lastUpdate" class="member-name-link">lastUpdate</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private boolean</code></div>
<div class="col-second even-row-color"><code><a href="#locked" class="member-name-link">locked</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#lockedWhenLoading" class="member-name-link">lockedWhenLoading</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private static final org.slf4j.Logger</code></div>
<div class="col-second even-row-color"><code><a href="#LOG" class="member-name-link">LOG</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final long</code></div>
<div class="col-second odd-row-color"><code><a href="#NO_PROC_ID" class="member-name-link">NO_PROC_ID</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected static final int</code></div>
<div class="col-second even-row-color"><code><a href="#NO_TIMEOUT" class="member-name-link">NO_TIMEOUT</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private <a href="../util/NonceKey.html" title="class in org.apache.hadoop.hbase.util">NonceKey</a></code></div>
<div class="col-second odd-row-color"><code><a href="#nonceKey" class="member-name-link">nonceKey</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#owner" class="member-name-link">owner</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private long</code></div>
<div class="col-second odd-row-color"><code><a href="#parentProcId" class="member-name-link">parentProcId</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private boolean</code></div>
<div class="col-second even-row-color"><code><a href="#persist" class="member-name-link">persist</a></code></div>
<div class="col-last even-row-color">
<div class="block">Indicate whether we need to persist the procedure to ProcedureStore after execution.</div>
</div>
<div class="col-first odd-row-color"><code>private long</code></div>
<div class="col-second odd-row-color"><code><a href="#procId" class="member-name-link">procId</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private byte[]</code></div>
<div class="col-second even-row-color"><code><a href="#result" class="member-name-link">result</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private long</code></div>
<div class="col-second odd-row-color"><code><a href="#rootProcId" class="member-name-link">rootProcId</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private int[]</code></div>
<div class="col-second even-row-color"><code><a href="#stackIndexes" class="member-name-link">stackIndexes</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private org.apache.hadoop.hbase.shaded.protobuf.generated.ProcedureProtos.ProcedureState</code></div>
<div class="col-second odd-row-color"><code><a href="#state" class="member-name-link">state</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private long</code></div>
<div class="col-second even-row-color"><code><a href="#submittedTime" class="member-name-link">submittedTime</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private int</code></div>
<div class="col-second odd-row-color"><code><a href="#timeout" class="member-name-link">timeout</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private boolean</code></div>
<div class="col-second even-row-color"><code><a href="#wasExecuted" class="member-name-link">wasExecuted</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">Procedure</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#abort(TEnvironment)" class="member-name-link">abort</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">The abort() call is asynchronous and each procedure must decide how to deal with it, if they
 want to be abortable.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="Procedure.LockState.html" title="enum class in org.apache.hadoop.hbase.procedure2">Procedure.LockState</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#acquireLock(TEnvironment)" class="member-name-link">acquireLock</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The user should override this method if they need a lock on an Entity.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addStackIndex(int)" class="member-name-link">addStackIndex</a><wbr>(int&nbsp;index)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called by the RootProcedureState on procedure execution.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#afterReplay(TEnvironment)" class="member-name-link">afterReplay</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called when the procedure is ready to be added to the queue after the loading/replay operation.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#beforeReplay(TEnvironment)" class="member-name-link">beforeReplay</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called when the procedure is loaded for replay.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#bypass(TEnvironment)" class="member-name-link">bypass</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the bypass to true.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#childrenCountDown()" class="member-name-link">childrenCountDown</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called by the ProcedureExecutor to notify that one of the sub-procedures has completed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#compareTo(org.apache.hadoop.hbase.procedure2.Procedure)" class="member-name-link">compareTo</a><wbr>(<a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&gt;&nbsp;other)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#completionCleanup(TEnvironment)" class="member-name-link">completionCleanup</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called when the procedure is marked as completed (success or rollback).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#deserializeStateData(org.apache.hadoop.hbase.procedure2.ProcedureStateSerializer)" class="member-name-link">deserializeStateData</a><wbr>(<a href="ProcedureStateSerializer.html" title="interface in org.apache.hadoop.hbase.procedure2">ProcedureStateSerializer</a>&nbsp;serializer)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Called on store load to allow the user to decode the previously serialized state.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) final <a href="Procedure.LockState.html" title="enum class in org.apache.hadoop.hbase.procedure2">Procedure.LockState</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doAcquireLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)" class="member-name-link">doAcquireLock</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env,
 <a href="store/ProcedureStore.html" title="interface in org.apache.hadoop.hbase.procedure2.store">ProcedureStore</a>&nbsp;store)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Internal method called by the ProcedureExecutor that starts the user-level code acquireLock().</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&gt;[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doExecute(TEnvironment)" class="member-name-link">doExecute</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Internal method called by the ProcedureExecutor that starts the user-level code execute().</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) final void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doReleaseLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)" class="member-name-link">doReleaseLock</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env,
 <a href="store/ProcedureStore.html" title="interface in org.apache.hadoop.hbase.procedure2.store">ProcedureStore</a>&nbsp;store)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Internal method called by the ProcedureExecutor that starts the user-level code releaseLock().</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doRollback(TEnvironment)" class="member-name-link">doRollback</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Internal method called by the ProcedureExecutor that starts the user-level code rollback().</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#elapsedTime()" class="member-name-link">elapsedTime</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the time elapsed between the last update and the start time of the procedure.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&gt;[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#execute(TEnvironment)" class="member-name-link">execute</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">The main code of the procedure.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getChildrenLatch()" class="member-name-link">getChildrenLatch</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="RemoteProcedureException.html" title="class in org.apache.hadoop.hbase.procedure2">RemoteProcedureException</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getException()" class="member-name-link">getException</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLastUpdate()" class="member-name-link">getLastUpdate</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../util/NonceKey.html" title="class in org.apache.hadoop.hbase.util">NonceKey</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNonceKey()" class="member-name-link">getNonceKey</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOwner()" class="member-name-link">getOwner</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getParentProcId()" class="member-name-link">getParentProcId</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="ProcedureMetrics.html" title="interface in org.apache.hadoop.hbase.procedure2">ProcedureMetrics</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getProcedureMetrics(TEnvironment)" class="member-name-link">getProcedureMetrics</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Override this method to provide procedure specific counters for submitted count, failed count
 and time histogram.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getProcId()" class="member-name-link">getProcId</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getProcIdHashCode(long)" class="member-name-link">getProcIdHashCode</a><wbr>(long&nbsp;procId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Get an hashcode for the specified Procedure ID</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getProcName()" class="member-name-link">getProcName</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>byte[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getResult()" class="member-name-link">getResult</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the serialized result if any, otherwise null</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>protected static &lt;T&gt;&nbsp;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getRootProcedureId(java.util.Map,org.apache.hadoop.hbase.procedure2.Procedure)" class="member-name-link">getRootProcedureId</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;T&gt;&gt;&nbsp;procedures,
 <a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;T&gt;&nbsp;proc)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Helper to lookup the root Procedure ID given a specified procedure.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRootProcId()" class="member-name-link">getRootProcId</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected int[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStackIndexes()" class="member-name-link">getStackIndexes</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.apache.hadoop.hbase.shaded.protobuf.generated.ProcedureProtos.ProcedureState</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getState()" class="member-name-link">getState</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSubmittedTime()" class="member-name-link">getSubmittedTime</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTimeout()" class="member-name-link">getTimeout</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the timeout in msec</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTimeoutTimestamp()" class="member-name-link">getTimeoutTimestamp</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Timeout of the next timeout.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasChildren()" class="member-name-link">hasChildren</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasException()" class="member-name-link">hasException</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasLock()" class="member-name-link">hasLock</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is used in conjunction with <a href="#holdLock(TEnvironment)"><code>holdLock(Object)</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasOwner()" class="member-name-link">hasOwner</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasParent()" class="member-name-link">hasParent</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasTimeout()" class="member-name-link">hasTimeout</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#haveSameParent(org.apache.hadoop.hbase.procedure2.Procedure,org.apache.hadoop.hbase.procedure2.Procedure)" class="member-name-link">haveSameParent</a><wbr>(<a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;?&gt;&nbsp;a,
 <a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;?&gt;&nbsp;b)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#holdLock(TEnvironment)" class="member-name-link">holdLock</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Used to keep the procedure lock even when the procedure is yielding or suspended.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#incChildrenLatch()" class="member-name-link">incChildrenLatch</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called by the ProcedureExecutor on procedure-load to restore the latch state</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isBypass()" class="member-name-link">isBypass</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isFailed()" class="member-name-link">isFailed</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the procedure has failed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isFinished()" class="member-name-link">isFinished</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isInitializing()" class="member-name-link">isInitializing</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isLockedWhenLoading()" class="member-name-link">isLockedWhenLoading</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Can only be called when restarting, before the procedure actually being executed, as after we
 actually call the <a href="#doAcquireLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)"><code>doAcquireLock(Object, ProcedureStore)</code></a> method, we will reset
 <a href="#lockedWhenLoading"><code>lockedWhenLoading</code></a> to false.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isRollbackSupported()" class="member-name-link">isRollbackSupported</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return whether the procedure supports rollback.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isRunnable()" class="member-name-link">isRunnable</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the procedure is in a RUNNABLE state.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isSuccess()" class="member-name-link">isSuccess</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the procedure is finished successfully.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isWaiting()" class="member-name-link">isWaiting</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the procedure is waiting for a child to finish or for an external event.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isYieldAfterExecutionStep(TEnvironment)" class="member-name-link">isYieldAfterExecutionStep</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">By default, the procedure framework/executor will try to run procedures start to finish.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) final void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#lockedWhenLoading()" class="member-name-link">lockedWhenLoading</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Will only be called when loading procedures from procedure store, where we need to record
 whether the procedure has already held a lock.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#needPersistence()" class="member-name-link">needPersistence</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#releaseLock(TEnvironment)" class="member-name-link">releaseLock</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The user should override this method, and release lock if necessary.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeStackIndex()" class="member-name-link">removeStackIndex</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#resetPersistence()" class="member-name-link">resetPersistence</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) final void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#restoreLock(TEnvironment)" class="member-name-link">restoreLock</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#rollback(TEnvironment)" class="member-name-link">rollback</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">The code to undo what was done by the execute() code.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#serializeStateData(org.apache.hadoop.hbase.procedure2.ProcedureStateSerializer)" class="member-name-link">serializeStateData</a><wbr>(<a href="ProcedureStateSerializer.html" title="interface in org.apache.hadoop.hbase.procedure2">ProcedureStateSerializer</a>&nbsp;serializer)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">The user-level code of the procedure may have some state to persist (e.g.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setAbortFailure(java.lang.String,java.lang.String)" class="member-name-link">setAbortFailure</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;source,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;msg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setChildrenLatch(int)" class="member-name-link">setChildrenLatch</a><wbr>(int&nbsp;numChildren)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called by the ProcedureExecutor on procedure-load to restore the latch state</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setExecuted()" class="member-name-link">setExecuted</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setFailure(java.lang.String,java.lang.Throwable)" class="member-name-link">setFailure</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;source,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;cause)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setFailure(org.apache.hadoop.hbase.procedure2.RemoteProcedureException)" class="member-name-link">setFailure</a><wbr>(<a href="RemoteProcedureException.html" title="class in org.apache.hadoop.hbase.procedure2">RemoteProcedureException</a>&nbsp;exception)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setLastUpdate(long)" class="member-name-link">setLastUpdate</a><wbr>(long&nbsp;lastUpdate)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called on store load to initialize the Procedure internals after the creation/deserialization.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setNonceKey(org.apache.hadoop.hbase.util.NonceKey)" class="member-name-link">setNonceKey</a><wbr>(<a href="../util/NonceKey.html" title="class in org.apache.hadoop.hbase.util">NonceKey</a>&nbsp;nonceKey)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called by the ProcedureExecutor to set the value to the newly created procedure.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setOwner(java.lang.String)" class="member-name-link">setOwner</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;owner)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setOwner(org.apache.hadoop.hbase.security.User)" class="member-name-link">setOwner</a><wbr>(<a href="../security/User.html" title="class in org.apache.hadoop.hbase.security">User</a>&nbsp;owner)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setParentProcId(long)" class="member-name-link">setParentProcId</a><wbr>(long&nbsp;parentProcId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called by the ProcedureExecutor to assign the parent to the newly created procedure.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setProcId(long)" class="member-name-link">setProcId</a><wbr>(long&nbsp;procId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called by the ProcedureExecutor to assign the ID to the newly created procedure.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setResult(byte%5B%5D)" class="member-name-link">setResult</a><wbr>(byte[]&nbsp;result)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The procedure may leave a "result" on completion.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setRootProcId(long)" class="member-name-link">setRootProcId</a><wbr>(long&nbsp;rootProcId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setStackIndexes(java.util.List)" class="member-name-link">setStackIndexes</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;stackIndexes)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called on store load to initialize the Procedure internals after the creation/deserialization.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setState(org.apache.hadoop.hbase.shaded.protobuf.generated.ProcedureProtos.ProcedureState)" class="member-name-link">setState</a><wbr>(org.apache.hadoop.hbase.shaded.protobuf.generated.ProcedureProtos.ProcedureState&nbsp;state)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSubmittedTime(long)" class="member-name-link">setSubmittedTime</a><wbr>(long&nbsp;submittedTime)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called on store load to initialize the Procedure internals after the creation/deserialization.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setTimeout(int)" class="member-name-link">setTimeout</a><wbr>(int&nbsp;timeout)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setTimeoutFailure(TEnvironment)" class="member-name-link">setTimeoutFailure</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called by the ProcedureExecutor when the timeout set by setTimeout() is expired.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shouldWaitClientAck(TEnvironment)" class="member-name-link">shouldWaitClientAck</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">By default, the executor will keep the procedure result around util the eviction TTL is
 expired.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#skipPersistence()" class="member-name-link">skipPersistence</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final <a href="ProcedureSuspendedException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureSuspendedException</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#suspend(int,boolean)" class="member-name-link">suspend</a><wbr>(int&nbsp;timeoutMillis,
 boolean&nbsp;jitter)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toStringClass()" class="member-name-link">toStringClass</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toStringClassDetails(java.lang.StringBuilder)" class="member-name-link">toStringClassDetails</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html" title="class or interface in java.lang" class="external-link">StringBuilder</a>&nbsp;builder)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Extend the toString() information with the procedure details e.g.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toStringDetails()" class="member-name-link">toStringDetails</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Extend the toString() information with more procedure details</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html" title="class or interface in java.lang" class="external-link">StringBuilder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toStringSimpleSB()" class="member-name-link">toStringSimpleSB</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Build the StringBuilder for the simple form of procedure string.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toStringState(java.lang.StringBuilder)" class="member-name-link">toStringState</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html" title="class or interface in java.lang" class="external-link">StringBuilder</a>&nbsp;builder)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called from <a href="#toString()"><code>toString()</code></a> when interpolating <a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2"><code>Procedure</code></a> State.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryRunnable()" class="member-name-link">tryRunnable</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Try to set this procedure into RUNNABLE state.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateMetricsOnFinish(TEnvironment,long,boolean)" class="member-name-link">updateMetricsOnFinish</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env,
 long&nbsp;runtime,
 boolean&nbsp;success)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function will be called just after procedure execution is finished.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateMetricsOnSubmit(TEnvironment)" class="member-name-link">updateMetricsOnSubmit</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function will be called just when procedure is submitted for execution.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateTimestamp()" class="member-name-link">updateTimestamp</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called by ProcedureExecutor after each time a procedure step is executed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#waitInitialized(TEnvironment)" class="member-name-link">waitInitialized</a><wbr>(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The <a href="#doAcquireLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)"><code>doAcquireLock(Object, ProcedureStore)</code></a> will be split into two steps, first, it will
 call us to determine whether we need to wait for initialization, second, it will call
 <a href="#acquireLock(TEnvironment)"><code>acquireLock(Object)</code></a> to actually handle the lock for this procedure.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#wasExecuted()" class="member-name-link">wasExecuted</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOG">
<h3>LOG</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">org.slf4j.Logger</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-113">LOG</a></span></div>
</section>
</li>
<li>
<section class="detail" id="NO_PROC_ID">
<h3>NO_PROC_ID</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-114">NO_PROC_ID</a></span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.procedure2.Procedure.NO_PROC_ID">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="NO_TIMEOUT">
<h3>NO_TIMEOUT</h3>
<div class="member-signature"><span class="modifiers">protected static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-115">NO_TIMEOUT</a></span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.procedure2.Procedure.NO_TIMEOUT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="nonceKey">
<h3>nonceKey</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="../util/NonceKey.html" title="class in org.apache.hadoop.hbase.util">NonceKey</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-124">nonceKey</a></span></div>
</section>
</li>
<li>
<section class="detail" id="owner">
<h3>owner</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-125">owner</a></span></div>
</section>
</li>
<li>
<section class="detail" id="parentProcId">
<h3>parentProcId</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-126">parentProcId</a></span></div>
</section>
</li>
<li>
<section class="detail" id="rootProcId">
<h3>rootProcId</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-127">rootProcId</a></span></div>
</section>
</li>
<li>
<section class="detail" id="procId">
<h3>procId</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-128">procId</a></span></div>
</section>
</li>
<li>
<section class="detail" id="submittedTime">
<h3>submittedTime</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-129">submittedTime</a></span></div>
</section>
</li>
<li>
<section class="detail" id="state">
<h3>state</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">org.apache.hadoop.hbase.shaded.protobuf.generated.ProcedureProtos.ProcedureState</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-132">state</a></span></div>
</section>
</li>
<li>
<section class="detail" id="exception">
<h3>exception</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="RemoteProcedureException.html" title="class in org.apache.hadoop.hbase.procedure2">RemoteProcedureException</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-133">exception</a></span></div>
</section>
</li>
<li>
<section class="detail" id="stackIndexes">
<h3>stackIndexes</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-134">stackIndexes</a></span></div>
</section>
</li>
<li>
<section class="detail" id="childrenLatch">
<h3>childrenLatch</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-135">childrenLatch</a></span></div>
</section>
</li>
<li>
<section class="detail" id="wasExecuted">
<h3>wasExecuted</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-138">wasExecuted</a></span></div>
</section>
</li>
<li>
<section class="detail" id="timeout">
<h3>timeout</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-140">timeout</a></span></div>
</section>
</li>
<li>
<section class="detail" id="lastUpdate">
<h3>lastUpdate</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-141">lastUpdate</a></span></div>
</section>
</li>
<li>
<section class="detail" id="result">
<h3>result</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-143">result</a></span></div>
</section>
</li>
<li>
<section class="detail" id="locked">
<h3>locked</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-145">locked</a></span></div>
</section>
</li>
<li>
<section class="detail" id="lockedWhenLoading">
<h3>lockedWhenLoading</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-147">lockedWhenLoading</a></span></div>
</section>
</li>
<li>
<section class="detail" id="bypass">
<h3>bypass</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-163">bypass</a></span></div>
<div class="block">Used for override complete of the procedure without actually doing any logic in the procedure.
 If bypass is set to true, when executing it will return null when <a href="#doExecute(TEnvironment)"><code>doExecute(Object)</code></a> is
 called to finish the procedure and release any locks it may currently hold. The bypass does
 cleanup around the Procedure as far as the Procedure framework is concerned. It does not clean
 any internal state that the Procedure's themselves may have set. That is for the Procedures to
 do themselves when bypass is called. They should override bypass and do their cleanup in the
 overridden bypass method (be sure to call the parent bypass to ensure proper processing).
 <p>
 </p>
 Bypassing a procedure is not like aborting. Aborting a procedure will trigger a rollback. And
 since the <a href="#abort(TEnvironment)"><code>abort(Object)</code></a> method is overrideable Some procedures may have chosen to
 ignore the aborting.</div>
</section>
</li>
<li>
<section class="detail" id="persist">
<h3>persist</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-177">persist</a></span></div>
<div class="block">Indicate whether we need to persist the procedure to ProcedureStore after execution. Default to
 true, and the implementation can all <a href="#skipPersistence()"><code>skipPersistence()</code></a> to let the framework skip the
 persistence of the procedure.
 <p/>
 This is useful when the procedure is in error and you want to retry later. The retry interval
 and the number of retries are usually not critical so skip the persistence can save some
 resources, and also speed up the restart processing.
 <p/>
 Notice that this value will be reset to true every time before execution. And when rolling back
 we do not test this value.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>Procedure</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-112">Procedure</a></span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="isBypass()">
<h3>isBypass</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-179">isBypass</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="bypass(TEnvironment)">
<h3 id="bypass(java.lang.Object)">bypass</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-192">bypass</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">Set the bypass to true. Only called in
 <a href="ProcedureExecutor.html#bypassProcedure(long,long,boolean,boolean)"><code>ProcedureExecutor.bypassProcedure(long, long, boolean, boolean)</code></a> for now. DO NOT use
 this method alone, since we can't just bypass one single procedure. We need to bypass its
 ancestor too. If your Procedure has set state, it needs to undo it in here.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>env</code> - Current environment. May be null because of context; e.g. pretty-printing procedure
            WALs where there is no 'environment' (and where Procedures that require an
            'environment' won't be run.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="needPersistence()">
<h3>needPersistence</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-196">needPersistence</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="resetPersistence()">
<h3>resetPersistence</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-200">resetPersistence</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="skipPersistence()">
<h3>skipPersistence</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-204">skipPersistence</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="execute(TEnvironment)">
<h3 id="execute(java.lang.Object)">execute</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&gt;[]</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-222">execute</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span>
                                              throws <span class="exceptions"><a href="ProcedureYieldException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureYieldException</a>,
<a href="ProcedureSuspendedException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureSuspendedException</a>,
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">The main code of the procedure. It must be idempotent since execute() may be called multiple
 times in case of machine failure in the middle of the execution.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>env</code> - the environment passed to the ProcedureExecutor</dd>
<dt>Returns:</dt>
<dd>a set of sub-procedures to run or ourselves if there is more work to do or null if the
         procedure is done.</dd>
<dt>Throws:</dt>
<dd><code><a href="ProcedureYieldException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureYieldException</a></code> - the procedure will be added back to the queue and retried
                                     later.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code> - the procedure will be added back to the queue and retried
                                     later.</dd>
<dd><code><a href="ProcedureSuspendedException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureSuspendedException</a></code> - Signal to the executor that Procedure has suspended itself
                                     and has set itself up waiting for an external event to wake
                                     it back up again.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rollback(TEnvironment)">
<h3 id="rollback(java.lang.Object)">rollback</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-234">rollback</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span>
                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a>,
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">The code to undo what was done by the execute() code. It is called when the procedure or one of
 the sub-procedures failed or an abort was requested. It should cleanup all the resources
 created by the execute() call. The implementation must be idempotent since rollback() may be
 called multiple time in case of machine failure in the middle of the execution.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>env</code> - the environment passed to the ProcedureExecutor</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - temporary failure, the rollback will retry later</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code> - the procedure will be added back to the queue and retried later</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="abort(TEnvironment)">
<h3 id="abort(java.lang.Object)">abort</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-245">abort</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">The abort() call is asynchronous and each procedure must decide how to deal with it, if they
 want to be abortable. The simplest implementation is to have an AtomicBoolean set in the
 abort() method and then the execute() will check if the abort flag is set or not. abort() may
 be called multiple times from the client, so the implementation must be idempotent.
 <p>
 NOTE: abort() is not like Thread.interrupt(). It is just a notification that allows the
 procedure implementor abort.</div>
</section>
</li>
<li>
<section class="detail" id="serializeStateData(org.apache.hadoop.hbase.procedure2.ProcedureStateSerializer)">
<h3>serializeStateData</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-252">serializeStateData</a></span><wbr><span class="parameters">(<a href="ProcedureStateSerializer.html" title="interface in org.apache.hadoop.hbase.procedure2">ProcedureStateSerializer</a>&nbsp;serializer)</span>
                                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">The user-level code of the procedure may have some state to persist (e.g. input arguments or
 current position in the processing state) to be able to resume on failure.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serializer</code> - stores the serializable state</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deserializeStateData(org.apache.hadoop.hbase.procedure2.ProcedureStateSerializer)">
<h3>deserializeStateData</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-259">deserializeStateData</a></span><wbr><span class="parameters">(<a href="ProcedureStateSerializer.html" title="interface in org.apache.hadoop.hbase.procedure2">ProcedureStateSerializer</a>&nbsp;serializer)</span>
                                      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Called on store load to allow the user to decode the previously serialized state.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serializer</code> - contains the serialized state</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="waitInitialized(TEnvironment)">
<h3 id="waitInitialized(java.lang.Object)">waitInitialized</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-274">waitInitialized</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">The <a href="#doAcquireLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)"><code>doAcquireLock(Object, ProcedureStore)</code></a> will be split into two steps, first, it will
 call us to determine whether we need to wait for initialization, second, it will call
 <a href="#acquireLock(TEnvironment)"><code>acquireLock(Object)</code></a> to actually handle the lock for this procedure.
 <p/>
 This is because that when master restarts, we need to restore the lock state for all the
 procedures to not break the semantic if <a href="#holdLock(TEnvironment)"><code>holdLock(Object)</code></a> is true. But the
 <a href="ProcedureExecutor.html" title="class in org.apache.hadoop.hbase.procedure2"><code>ProcedureExecutor</code></a> will be started before the master finish initialization(as it is part
 of the initialization!), so we need to split the code into two steps, and when restore, we just
 restore the lock part and ignore the waitInitialized part. Otherwise there will be dead lock.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true means we need to wait until the environment has been initialized, otherwise true.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="acquireLock(TEnvironment)">
<h3 id="acquireLock(java.lang.Object)">acquireLock</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="Procedure.LockState.html" title="enum class in org.apache.hadoop.hbase.procedure2">Procedure.LockState</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-302">acquireLock</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">The user should override this method if they need a lock on an Entity. A lock can be anything,
 and it is up to the implementor. The Procedure Framework will call this method just before it
 invokes <a href="#execute(TEnvironment)"><code>execute(Object)</code></a>. It calls <a href="#releaseLock(TEnvironment)"><code>releaseLock(Object)</code></a> after the call to
 execute.
 <p/>
 If you need to hold the lock for the life of the Procedure -- i.e. you do not want any other
 Procedure interfering while this Procedure is running, see <a href="#holdLock(TEnvironment)"><code>holdLock(Object)</code></a>.
 <p/>
 Example: in our Master we can execute request in parallel for different tables. We can create
 t1 and create t2 and these creates can be executed at the same time. Anything else on t1/t2 is
 queued waiting that specific table create to happen.
 <p/>
 There are 3 LockState:
 <ul>
 <li>LOCK_ACQUIRED should be returned when the proc has the lock and the proc is ready to
 execute.</li>
 <li>LOCK_YIELD_WAIT should be returned when the proc has not the lock and the framework should
 take care of readding the procedure back to the runnable set for retry</li>
 <li>LOCK_EVENT_WAIT should be returned when the proc has not the lock and someone will take
 care of readding the procedure back to the runnable set when the lock is available.</li>
 </ul></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the lock state as described above.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="releaseLock(TEnvironment)">
<h3 id="releaseLock(java.lang.Object)">releaseLock</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-309">releaseLock</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">The user should override this method, and release lock if necessary.</div>
</section>
</li>
<li>
<section class="detail" id="holdLock(TEnvironment)">
<h3 id="holdLock(java.lang.Object)">holdLock</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-317">holdLock</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">Used to keep the procedure lock even when the procedure is yielding or suspended.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the procedure should hold on the lock until completionCleanup()</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasLock()">
<h3>hasLock</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-329">hasLock</a></span>()</div>
<div class="block">This is used in conjunction with <a href="#holdLock(TEnvironment)"><code>holdLock(Object)</code></a>. If <a href="#holdLock(TEnvironment)"><code>holdLock(Object)</code></a>
 returns true, the procedure executor will call acquireLock() once and thereafter not call
 <a href="#releaseLock(TEnvironment)"><code>releaseLock(Object)</code></a> until the Procedure is done (Normally, it calls release/acquire
 around each invocation of <a href="#execute(TEnvironment)"><code>execute(Object)</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the procedure has the lock, false otherwise.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#holdLock(TEnvironment)"><code>holdLock(Object)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="beforeReplay(TEnvironment)">
<h3 id="beforeReplay(java.lang.Object)">beforeReplay</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-338">beforeReplay</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">Called when the procedure is loaded for replay. The procedure implementor may use this method
 to perform some quick operation before replay. e.g. failing the procedure if the state on
 replay may be unknown.</div>
</section>
</li>
<li>
<section class="detail" id="afterReplay(TEnvironment)">
<h3 id="afterReplay(java.lang.Object)">afterReplay</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-345">afterReplay</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">Called when the procedure is ready to be added to the queue after the loading/replay operation.</div>
</section>
</li>
<li>
<section class="detail" id="completionCleanup(TEnvironment)">
<h3 id="completionCleanup(java.lang.Object)">completionCleanup</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-354">completionCleanup</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">Called when the procedure is marked as completed (success or rollback). The procedure
 implementor may use this method to cleanup in-memory states. This operation will not be retried
 on failure. If a procedure took a lock, it will have been released when this method runs.</div>
</section>
</li>
<li>
<section class="detail" id="isYieldAfterExecutionStep(TEnvironment)">
<h3 id="isYieldAfterExecutionStep(java.lang.Object)">isYieldAfterExecutionStep</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-366">isYieldAfterExecutionStep</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">By default, the procedure framework/executor will try to run procedures start to finish. Return
 true to make the executor yield between each execution step to give other procedures a chance
 to run.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>env</code> - the environment passed to the ProcedureExecutor</dd>
<dt>Returns:</dt>
<dd>Return true if the executor should yield on completion of an execution step. Defaults
         to return false.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="shouldWaitClientAck(TEnvironment)">
<h3 id="shouldWaitClientAck(java.lang.Object)">shouldWaitClientAck</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-378">shouldWaitClientAck</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">By default, the executor will keep the procedure result around util the eviction TTL is
 expired. The client can cut down the waiting time by requesting that the result is removed from
 the executor. In case of system started procedure, we can force the executor to auto-ack.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>env</code> - the environment passed to the ProcedureExecutor</dd>
<dt>Returns:</dt>
<dd>true if the executor should wait the client ack for the result. Defaults to return
         true.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getProcedureMetrics(TEnvironment)">
<h3 id="getProcedureMetrics(java.lang.Object)">getProcedureMetrics</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="ProcedureMetrics.html" title="interface in org.apache.hadoop.hbase.procedure2">ProcedureMetrics</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-388">getProcedureMetrics</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">Override this method to provide procedure specific counters for submitted count, failed count
 and time histogram.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>env</code> - The environment passed to the procedure executor</dd>
<dt>Returns:</dt>
<dd>Container object for procedure related metric</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateMetricsOnSubmit(TEnvironment)">
<h3 id="updateMetricsOnSubmit(java.lang.Object)">updateMetricsOnSubmit</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-398">updateMetricsOnSubmit</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">This function will be called just when procedure is submitted for execution. Override this
 method to update the metrics at the beginning of the procedure. The default implementation
 updates submitted counter if <a href="#getProcedureMetrics(TEnvironment)"><code>getProcedureMetrics(Object)</code></a> returns non-null
 <a href="ProcedureMetrics.html" title="interface in org.apache.hadoop.hbase.procedure2"><code>ProcedureMetrics</code></a>.</div>
</section>
</li>
<li>
<section class="detail" id="updateMetricsOnFinish(TEnvironment,long,boolean)">
<h3 id="updateMetricsOnFinish(java.lang.Object,long,boolean)">updateMetricsOnFinish</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-424">updateMetricsOnFinish</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env,
 long&nbsp;runtime,
 boolean&nbsp;success)</span></div>
<div class="block">This function will be called just after procedure execution is finished. Override this method
 to update metrics at the end of the procedure. If <a href="#getProcedureMetrics(TEnvironment)"><code>getProcedureMetrics(Object)</code></a> returns
 non-null <a href="ProcedureMetrics.html" title="interface in org.apache.hadoop.hbase.procedure2"><code>ProcedureMetrics</code></a>, the default implementation adds runtime of a procedure to a
 time histogram for successfully completed procedures. Increments failed counter for failed
 procedures.
 <p/>
 TODO: As any of the sub-procedures on failure rolls back all procedures in the stack, including
 successfully finished siblings, this function may get called twice in certain cases for certain
 procedures. Explore further if this can be called once.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>env</code> - The environment passed to the procedure executor</dd>
<dd><code>runtime</code> - Runtime of the procedure in milliseconds</dd>
<dd><code>success</code> - true if procedure is completed successfully</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-443">toString</a></span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toStringSimpleSB()">
<h3>toStringSimpleSB</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html" title="class or interface in java.lang" class="external-link">StringBuilder</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-453">toStringSimpleSB</a></span>()</div>
<div class="block">Build the StringBuilder for the simple form of procedure string.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the StringBuilder</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toStringDetails()">
<h3>toStringDetails</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-491">toStringDetails</a></span>()</div>
<div class="block">Extend the toString() information with more procedure details</div>
</section>
</li>
<li>
<section class="detail" id="toStringClass()">
<h3>toStringClass</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-510">toStringClass</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="toStringState(java.lang.StringBuilder)">
<h3>toStringState</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-521">toStringState</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html" title="class or interface in java.lang" class="external-link">StringBuilder</a>&nbsp;builder)</span></div>
<div class="block">Called from <a href="#toString()"><code>toString()</code></a> when interpolating <a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2"><code>Procedure</code></a> State. Allows decorating
 generic Procedure State with Procedure particulars.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>builder</code> - Append current <code>ProcedureProtos.ProcedureState</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toStringClassDetails(java.lang.StringBuilder)">
<h3>toStringClassDetails</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-529">toStringClassDetails</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html" title="class or interface in java.lang" class="external-link">StringBuilder</a>&nbsp;builder)</span></div>
<div class="block">Extend the toString() information with the procedure details e.g. className and parameters</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>builder</code> - the string builder to use to append the proc specific information</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getProcId()">
<h3>getProcId</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-540">getProcId</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="hasParent()">
<h3>hasParent</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-544">hasParent</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getParentProcId()">
<h3>getParentProcId</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-548">getParentProcId</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getRootProcId()">
<h3>getRootProcId</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-552">getRootProcId</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getProcName()">
<h3>getProcName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-556">getProcName</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getNonceKey()">
<h3>getNonceKey</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../util/NonceKey.html" title="class in org.apache.hadoop.hbase.util">NonceKey</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-560">getNonceKey</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getSubmittedTime()">
<h3>getSubmittedTime</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-564">getSubmittedTime</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getOwner()">
<h3>getOwner</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-568">getOwner</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="hasOwner()">
<h3>hasOwner</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-572">hasOwner</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="setProcId(long)">
<h3>setProcId</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-579">setProcId</a></span><wbr><span class="parameters">(long&nbsp;procId)</span></div>
<div class="block">Called by the ProcedureExecutor to assign the ID to the newly created procedure.</div>
</section>
</li>
<li>
<section class="detail" id="setParentProcId(long)">
<h3>setParentProcId</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-588">setParentProcId</a></span><wbr><span class="parameters">(long&nbsp;parentProcId)</span></div>
<div class="block">Called by the ProcedureExecutor to assign the parent to the newly created procedure.</div>
</section>
</li>
<li>
<section class="detail" id="setRootProcId(long)">
<h3>setRootProcId</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-592">setRootProcId</a></span><wbr><span class="parameters">(long&nbsp;rootProcId)</span></div>
</section>
</li>
<li>
<section class="detail" id="setNonceKey(org.apache.hadoop.hbase.util.NonceKey)">
<h3>setNonceKey</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-599">setNonceKey</a></span><wbr><span class="parameters">(<a href="../util/NonceKey.html" title="class in org.apache.hadoop.hbase.util">NonceKey</a>&nbsp;nonceKey)</span></div>
<div class="block">Called by the ProcedureExecutor to set the value to the newly created procedure.</div>
</section>
</li>
<li>
<section class="detail" id="setOwner(java.lang.String)">
<h3>setOwner</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-603">setOwner</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;owner)</span></div>
</section>
</li>
<li>
<section class="detail" id="setOwner(org.apache.hadoop.hbase.security.User)">
<h3>setOwner</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-607">setOwner</a></span><wbr><span class="parameters">(<a href="../security/User.html" title="class in org.apache.hadoop.hbase.security">User</a>&nbsp;owner)</span></div>
</section>
</li>
<li>
<section class="detail" id="setSubmittedTime(long)">
<h3>setSubmittedTime</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-615">setSubmittedTime</a></span><wbr><span class="parameters">(long&nbsp;submittedTime)</span></div>
<div class="block">Called on store load to initialize the Procedure internals after the creation/deserialization.</div>
</section>
</li>
<li>
<section class="detail" id="setTimeout(int)">
<h3>setTimeout</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-625">setTimeout</a></span><wbr><span class="parameters">(int&nbsp;timeout)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timeout</code> - timeout interval in msec</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasTimeout()">
<h3>hasTimeout</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-629">hasTimeout</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getTimeout()">
<h3>getTimeout</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-634">getTimeout</a></span>()</div>
<div class="block">Returns the timeout in msec</div>
</section>
</li>
<li>
<section class="detail" id="setLastUpdate(long)">
<h3>setLastUpdate</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-641">setLastUpdate</a></span><wbr><span class="parameters">(long&nbsp;lastUpdate)</span></div>
<div class="block">Called on store load to initialize the Procedure internals after the creation/deserialization.</div>
</section>
</li>
<li>
<section class="detail" id="updateTimestamp()">
<h3>updateTimestamp</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-648">updateTimestamp</a></span>()</div>
<div class="block">Called by ProcedureExecutor after each time a procedure step is executed.</div>
</section>
</li>
<li>
<section class="detail" id="getLastUpdate()">
<h3>getLastUpdate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-652">getLastUpdate</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getTimeoutTimestamp()">
<h3>getTimeoutTimestamp</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-661">getTimeoutTimestamp</a></span>()</div>
<div class="block">Timeout of the next timeout. Called by the ProcedureExecutor if the procedure has timeout set
 and the procedure is in the waiting queue.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the timestamp of the next timeout.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="elapsedTime()">
<h3>elapsedTime</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-669">elapsedTime</a></span>()</div>
<div class="block">Returns the time elapsed between the last update and the start time of the procedure.</div>
</section>
</li>
<li>
<section class="detail" id="getResult()">
<h3>getResult</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-674">getResult</a></span>()</div>
<div class="block">Returns the serialized result if any, otherwise null</div>
</section>
</li>
<li>
<section class="detail" id="setResult(byte[])">
<h3>setResult</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-682">setResult</a></span><wbr><span class="parameters">(byte[]&nbsp;result)</span></div>
<div class="block">The procedure may leave a "result" on completion.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>result</code> - the serialized result that will be passed to the client</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="lockedWhenLoading()">
<h3>lockedWhenLoading</h3>
<div class="member-signature"><span class="modifiers">final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-691">lockedWhenLoading</a></span>()</div>
<div class="block">Will only be called when loading procedures from procedure store, where we need to record
 whether the procedure has already held a lock. Later we will call <a href="#restoreLock(TEnvironment)"><code>restoreLock(Object)</code></a>
 to actually acquire the lock.</div>
</section>
</li>
<li>
<section class="detail" id="isLockedWhenLoading()">
<h3>isLockedWhenLoading</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-703">isLockedWhenLoading</a></span>()</div>
<div class="block">Can only be called when restarting, before the procedure actually being executed, as after we
 actually call the <a href="#doAcquireLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)"><code>doAcquireLock(Object, ProcedureStore)</code></a> method, we will reset
 <a href="#lockedWhenLoading"><code>lockedWhenLoading</code></a> to false.
 <p/>
 Now it is only used in the ProcedureScheduler to determine whether we should put a Procedure in
 front of a queue.</div>
</section>
</li>
<li>
<section class="detail" id="isRunnable()">
<h3>isRunnable</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-717">isRunnable</a></span>()</div>
<div class="block">Returns true if the procedure is in a RUNNABLE state.</div>
</section>
</li>
<li>
<section class="detail" id="isInitializing()">
<h3>isInitializing</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-721">isInitializing</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="isFailed()">
<h3>isFailed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-726">isFailed</a></span>()</div>
<div class="block">Returns true if the procedure has failed. It may or may not have rolled back.</div>
</section>
</li>
<li>
<section class="detail" id="isSuccess()">
<h3>isSuccess</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-731">isSuccess</a></span>()</div>
<div class="block">Returns true if the procedure is finished successfully.</div>
</section>
</li>
<li>
<section class="detail" id="isFinished()">
<h3>isFinished</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-739">isFinished</a></span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the procedure is finished. The Procedure may be completed successfully or
         rolledback.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isWaiting()">
<h3>isWaiting</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-744">isWaiting</a></span>()</div>
<div class="block">Returns true if the procedure is waiting for a child to finish or for an external event.</div>
</section>
</li>
<li>
<section class="detail" id="setState(org.apache.hadoop.hbase.shaded.protobuf.generated.ProcedureProtos.ProcedureState)">
<h3>setState</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-755">setState</a></span><wbr><span class="parameters">(org.apache.hadoop.hbase.shaded.protobuf.generated.ProcedureProtos.ProcedureState&nbsp;state)</span></div>
</section>
</li>
<li>
<section class="detail" id="getState()">
<h3>getState</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">org.apache.hadoop.hbase.shaded.protobuf.generated.ProcedureProtos.ProcedureState</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-760">getState</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="setFailure(java.lang.String,java.lang.Throwable)">
<h3>setFailure</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-764">setFailure</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;source,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;cause)</span></div>
</section>
</li>
<li>
<section class="detail" id="setFailure(org.apache.hadoop.hbase.procedure2.RemoteProcedureException)">
<h3>setFailure</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-768">setFailure</a></span><wbr><span class="parameters">(<a href="RemoteProcedureException.html" title="class in org.apache.hadoop.hbase.procedure2">RemoteProcedureException</a>&nbsp;exception)</span></div>
</section>
</li>
<li>
<section class="detail" id="setAbortFailure(java.lang.String,java.lang.String)">
<h3>setAbortFailure</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-775">setAbortFailure</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;source,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;msg)</span></div>
</section>
</li>
<li>
<section class="detail" id="setTimeoutFailure(TEnvironment)">
<h3 id="setTimeoutFailure(java.lang.Object)">setTimeoutFailure</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-791">setTimeoutFailure</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
<div class="block">Called by the ProcedureExecutor when the timeout set by setTimeout() is expired.
 <p/>
 Another usage for this method is to implement retrying. A procedure can set the state to
 <code>WAITING_TIMEOUT</code> by calling <code>setState</code> method, and throw a
 <a href="ProcedureSuspendedException.html" title="class in org.apache.hadoop.hbase.procedure2"><code>ProcedureSuspendedException</code></a> to halt the execution of the procedure, and do not forget a
 call <a href="#setTimeout(int)"><code>setTimeout(int)</code></a> method to set the timeout. And you should also override this
 method to wake up the procedure, and also return false to tell the ProcedureExecutor that the
 timeout event has been handled.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true to let the framework handle the timeout as abort, false in case the procedure
         handled the timeout itself.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasException()">
<h3>hasException</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-801">hasException</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getException()">
<h3>getException</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="RemoteProcedureException.html" title="class in org.apache.hadoop.hbase.procedure2">RemoteProcedureException</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-805">getException</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="setChildrenLatch(int)">
<h3>setChildrenLatch</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-812">setChildrenLatch</a></span><wbr><span class="parameters">(int&nbsp;numChildren)</span></div>
<div class="block">Called by the ProcedureExecutor on procedure-load to restore the latch state</div>
</section>
</li>
<li>
<section class="detail" id="incChildrenLatch()">
<h3>incChildrenLatch</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-822">incChildrenLatch</a></span>()</div>
<div class="block">Called by the ProcedureExecutor on procedure-load to restore the latch state</div>
</section>
</li>
<li>
<section class="detail" id="childrenCountDown()">
<h3>childrenCountDown</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-833">childrenCountDown</a></span>()</div>
<div class="block">Called by the ProcedureExecutor to notify that one of the sub-procedures has completed.</div>
</section>
</li>
<li>
<section class="detail" id="tryRunnable()">
<h3>tryRunnable</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-846">tryRunnable</a></span>()</div>
<div class="block">Try to set this procedure into RUNNABLE state. Succeeds if all subprocedures/children are done.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>True if we were able to move procedure to RUNNABLE state.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasChildren()">
<h3>hasChildren</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-856">hasChildren</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getChildrenLatch()">
<h3>getChildrenLatch</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-860">getChildrenLatch</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="addStackIndex(int)">
<h3>addStackIndex</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-868">addStackIndex</a></span><wbr><span class="parameters">(int&nbsp;index)</span></div>
<div class="block">Called by the RootProcedureState on procedure execution. Each procedure store its stack-index
 positions.</div>
</section>
</li>
<li>
<section class="detail" id="removeStackIndex()">
<h3>removeStackIndex</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-879">removeStackIndex</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="setStackIndexes(java.util.List)">
<h3>setStackIndexes</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-892">setStackIndexes</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;stackIndexes)</span></div>
<div class="block">Called on store load to initialize the Procedure internals after the creation/deserialization.</div>
</section>
</li>
<li>
<section class="detail" id="setExecuted()">
<h3>setExecuted</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-902">setExecuted</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="wasExecuted()">
<h3>wasExecuted</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-906">wasExecuted</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="getStackIndexes()">
<h3>getStackIndexes</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-910">getStackIndexes</a></span>()</div>
</section>
</li>
<li>
<section class="detail" id="isRollbackSupported()">
<h3>isRollbackSupported</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-919">isRollbackSupported</a></span>()</div>
<div class="block">Return whether the procedure supports rollback. If the procedure does not support rollback, we
 can skip the rollback state management which could increase the performance. See HBASE-28210
 and HBASE-28212.</div>
</section>
</li>
<li>
<section class="detail" id="doExecute(TEnvironment)">
<h3 id="doExecute(java.lang.Object)">doExecute</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&gt;[]</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-933">doExecute</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span>
                                       throws <span class="exceptions"><a href="ProcedureYieldException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureYieldException</a>,
<a href="ProcedureSuspendedException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureSuspendedException</a>,
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">Internal method called by the ProcedureExecutor that starts the user-level code execute().</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="ProcedureSuspendedException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureSuspendedException</a></code> - This is used when procedure wants to halt processing and
                                     skip out without changing states or releasing any locks
                                     held.</dd>
<dd><code><a href="ProcedureYieldException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureYieldException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doRollback(TEnvironment)">
<h3 id="doRollback(java.lang.Object)">doRollback</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-950">doRollback</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span>
                   throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a>,
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">Internal method called by the ProcedureExecutor that starts the user-level code rollback().</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="restoreLock(TEnvironment)">
<h3 id="restoreLock(java.lang.Object)">restoreLock</h3>
<div class="member-signature"><span class="modifiers">final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-963">restoreLock</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env)</span></div>
</section>
</li>
<li>
<section class="detail" id="doAcquireLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)">
<h3 id="doAcquireLock(java.lang.Object,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)">doAcquireLock</h3>
<div class="member-signature"><span class="modifiers">final</span>&nbsp;<span class="return-type"><a href="Procedure.LockState.html" title="enum class in org.apache.hadoop.hbase.procedure2">Procedure.LockState</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-993">doAcquireLock</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env,
 <a href="store/ProcedureStore.html" title="interface in org.apache.hadoop.hbase.procedure2.store">ProcedureStore</a>&nbsp;store)</span></div>
<div class="block">Internal method called by the ProcedureExecutor that starts the user-level code acquireLock().</div>
</section>
</li>
<li>
<section class="detail" id="doReleaseLock(TEnvironment,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)">
<h3 id="doReleaseLock(java.lang.Object,org.apache.hadoop.hbase.procedure2.store.ProcedureStore)">doReleaseLock</h3>
<div class="member-signature"><span class="modifiers">final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-1022">doReleaseLock</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&nbsp;env,
 <a href="store/ProcedureStore.html" title="interface in org.apache.hadoop.hbase.procedure2.store">ProcedureStore</a>&nbsp;store)</span></div>
<div class="block">Internal method called by the ProcedureExecutor that starts the user-level code releaseLock().</div>
</section>
</li>
<li>
<section class="detail" id="suspend(int,boolean)">
<h3>suspend</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="ProcedureSuspendedException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureSuspendedException</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-1036">suspend</a></span><wbr><span class="parameters">(int&nbsp;timeoutMillis,
 boolean&nbsp;jitter)</span>
                                             throws <span class="exceptions"><a href="ProcedureSuspendedException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureSuspendedException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="ProcedureSuspendedException.html" title="class in org.apache.hadoop.hbase.procedure2">ProcedureSuspendedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="compareTo(org.apache.hadoop.hbase.procedure2.Procedure)">
<h3>compareTo</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-1049">compareTo</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&gt;&nbsp;other)</span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Comparable.html#compareTo(T)" title="class or interface in java.lang" class="external-link">compareTo</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Comparable.html" title="class or interface in java.lang" class="external-link">Comparable</a>&lt;<a href="Procedure.html" title="type parameter in Procedure">TEnvironment</a>&gt;</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getProcIdHashCode(long)">
<h3>getProcIdHashCode</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-1062">getProcIdHashCode</a></span><wbr><span class="parameters">(long&nbsp;procId)</span></div>
<div class="block">Get an hashcode for the specified Procedure ID</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the hashcode for the specified procId</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRootProcedureId(java.util.Map,org.apache.hadoop.hbase.procedure2.Procedure)">
<h3>getRootProcedureId</h3>
<div class="member-signature"><span class="modifiers">protected static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-1075">getRootProcedureId</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;T&gt;&gt;&nbsp;procedures,
 <a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;T&gt;&nbsp;proc)</span></div>
<div class="block">Helper to lookup the root Procedure ID given a specified procedure.</div>
</section>
</li>
<li>
<section class="detail" id="haveSameParent(org.apache.hadoop.hbase.procedure2.Procedure,org.apache.hadoop.hbase.procedure2.Procedure)">
<h3>haveSameParent</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/procedure2/Procedure.html#line-1091">haveSameParent</a></span><wbr><span class="parameters">(<a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;?&gt;&nbsp;a,
 <a href="Procedure.html" title="class in org.apache.hadoop.hbase.procedure2">Procedure</a>&lt;?&gt;&nbsp;b)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>a</code> - the first procedure to be compared.</dd>
<dd><code>b</code> - the second procedure to be compared.</dd>
<dt>Returns:</dt>
<dd>true if the two procedures have the same parent</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2007&#x2013;2020 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
