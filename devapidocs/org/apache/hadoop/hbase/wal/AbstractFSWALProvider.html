<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>AbstractFSWALProvider (Apache HBase 4.0.0-alpha-1-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.hadoop.hbase.wal, class: AbstractFSWALProvider">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/AbstractFSWALProvider.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.hadoop.hbase.wal</a></div>
<h1 title="Class AbstractFSWALProvider" class="title">Class AbstractFSWALProvider&lt;T extends <a href="../regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;?&gt;&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">org.apache.hadoop.hbase.wal.AbstractWALProvider</a>
<div class="inheritance">org.apache.hadoop.hbase.wal.AbstractFSWALProvider&lt;T&gt;</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../replication/regionserver/PeerActionListener.html" title="interface in org.apache.hadoop.hbase.replication.regionserver">PeerActionListener</a></code>, <code><a href="WALProvider.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider</a></code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="AsyncFSWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AsyncFSWALProvider</a></code>, <code><a href="FSHLogProvider.html" title="class in org.apache.hadoop.hbase.wal">FSHLogProvider</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@Private
@Evolving
</span><span class="modifiers">public abstract class </span><span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-63">AbstractFSWALProvider</a>&lt;T extends <a href="../regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;?&gt;&gt;</span>
<span class="extends-implements">extends <a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></span></div>
<div class="block">Base class of a WAL Provider that returns a single thread safe WAL that writes to Hadoop FS. By
 default, this implementation picks a directory in Hadoop FS based on a combination of
 <ul>
 <li>the HBase root directory
 <li>HConstants.HREGION_LOGDIR_NAME
 <li>the given factory's factoryId (usually identifying the regionserver by host:port)
 </ul>
 It also uses the providerId to differentiate among files.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="AbstractFSWALProvider.Initializer.html" class="type-name-link" title="interface in org.apache.hadoop.hbase.wal">AbstractFSWALProvider.Initializer</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="AbstractFSWALProvider.WALStartTimeComparator.html" class="type-name-link" title="class in org.apache.hadoop.hbase.wal">AbstractFSWALProvider.WALStartTimeComparator</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Comparator used to compare WAL files together based on their start time.</div>
</div>
</div>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-org.apache.hadoop.hbase.wal.WALProvider">Nested classes/interfaces inherited from interface&nbsp;org.apache.hadoop.hbase.wal.<a href="WALProvider.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider</a></h2>
<code><a href="WALProvider.AsyncWriter.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.AsyncWriter</a>, <a href="WALProvider.Writer.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.Writer</a>, <a href="WALProvider.WriterBase.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider.WriterBase</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>(package private) static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_PROVIDER_ID" class="member-name-link">DEFAULT_PROVIDER_ID</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#DEFAULT_SEPARATE_OLDLOGDIR" class="member-name-link">DEFAULT_SEPARATE_OLDLOGDIR</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private static final org.slf4j.Logger</code></div>
<div class="col-second even-row-color"><code><a href="#LOG" class="member-name-link">LOG</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#META_WAL_PROVIDER_ID" class="member-name-link">META_WAL_PROVIDER_ID</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The hbase:meta region's WAL filename extension</div>
</div>
<div class="col-first even-row-color"><code>private static final long</code></div>
<div class="col-second even-row-color"><code><a href="#NO_TIMESTAMP" class="member-name-link">NO_TIMESTAMP</a></code></div>
<div class="col-last even-row-color">
<div class="block">Define for when no timestamp found.</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#SEPARATE_OLDLOGDIR" class="member-name-link">SEPARATE_OLDLOGDIR</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Separate old log into different dir by regionserver name</div>
</div>
<div class="col-first even-row-color"><code>private static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" title="class or interface in java.util.regex" class="external-link">Pattern</a></code></div>
<div class="col-second even-row-color"><code><a href="#SERVER_NAME_PATTERN" class="member-name-link">SERVER_NAME_PATTERN</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#SPLITTING_EXT" class="member-name-link">SPLITTING_EXT</a></code></div>
<div class="col-last odd-row-color">
<div class="block">File Extension used while splitting an WAL into regions (HBASE-2312)</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Comparator.html" title="class or interface in java.util" class="external-link">Comparator</a>&lt;org.apache.hadoop.fs.Path&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#TIMESTAMP_COMPARATOR" class="member-name-link">TIMESTAMP_COMPARATOR</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="AbstractFSWALProvider.html" title="type parameter in AbstractFSWALProvider">T</a></code></div>
<div class="col-second odd-row-color"><code><a href="#wal" class="member-name-link">wal</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#WAL_FILE_NAME_DELIMITER" class="member-name-link">WAL_FILE_NAME_DELIMITER</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" title="class or interface in java.util.regex" class="external-link">Pattern</a></code></div>
<div class="col-second odd-row-color"><code><a href="#WAL_FILE_NAME_PATTERN" class="member-name-link">WAL_FILE_NAME_PATTERN</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Pattern used to validate a WAL file name see <a href="#validateWALFilename(java.lang.String)"><code>validateWALFilename(String)</code></a> for
 description.</div>
</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/ReadWriteLock.html" title="class or interface in java.util.concurrent.locks" class="external-link">ReadWriteLock</a></code></div>
<div class="col-second even-row-color"><code><a href="#walCreateLock" class="member-name-link">walCreateLock</a></code></div>
<div class="col-last even-row-color">
<div class="block">We use walCreateLock to prevent wal recreation in different threads, and also prevent getWALs
 missing the newly created WAL, see HBASE-21503 for more details.</div>
</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.hadoop.hbase.wal.AbstractWALProvider">Fields inherited from class&nbsp;org.apache.hadoop.hbase.wal.<a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></h3>
<code><a href="AbstractWALProvider.html#abortable">abortable</a>, <a href="AbstractWALProvider.html#conf">conf</a>, <a href="AbstractWALProvider.html#factory">factory</a>, <a href="AbstractWALProvider.html#initialized">initialized</a>, <a href="AbstractWALProvider.html#listeners">listeners</a>, <a href="AbstractWALProvider.html#logPrefix">logPrefix</a>, <a href="AbstractWALProvider.html#providerId">providerId</a></code></div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.hadoop.hbase.replication.regionserver.PeerActionListener">Fields inherited from interface&nbsp;org.apache.hadoop.hbase.replication.regionserver.<a href="../replication/regionserver/PeerActionListener.html" title="interface in org.apache.hadoop.hbase.replication.regionserver">PeerActionListener</a></h3>
<code><a href="../replication/regionserver/PeerActionListener.html#DUMMY">DUMMY</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">AbstractFSWALProvider</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addWALActionsListener(org.apache.hadoop.hbase.regionserver.wal.WALActionsListener)" class="member-name-link">addWALActionsListener</a><wbr>(<a href="../regionserver/wal/WALActionsListener.html" title="interface in org.apache.hadoop.hbase.regionserver.wal">WALActionsListener</a>&nbsp;listener)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Add a <a href="../regionserver/wal/WALActionsListener.html" title="interface in org.apache.hadoop.hbase.regionserver.wal"><code>WALActionsListener</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#close0()" class="member-name-link">close0</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createRemoteWAL(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,java.lang.String,java.lang.String)" class="member-name-link">createRemoteWAL</a><wbr>(<a href="../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region,
 org.apache.hadoop.fs.FileSystem&nbsp;remoteFs,
 org.apache.hadoop.fs.Path&nbsp;remoteWALDir,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;prefix,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;suffix)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="AbstractFSWALProvider.html" title="type parameter in AbstractFSWALProvider">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#createWAL()" class="member-name-link">createWAL</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#doInit(org.apache.hadoop.conf.Configuration)" class="member-name-link">doInit</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;conf)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doInit(org.apache.hadoop.hbase.wal.WALFactory,org.apache.hadoop.conf.Configuration,java.lang.String)" class="member-name-link">doInit</a><wbr>(<a href="WALFactory.html" title="class in org.apache.hadoop.hbase.wal">WALFactory</a>&nbsp;factory,
 org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;providerId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#extractFileNumFromWAL(org.apache.hadoop.hbase.wal.WAL)" class="member-name-link">extractFileNumFromWAL</a><wbr>(<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&nbsp;wal)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">It returns the file create timestamp (the 'FileNum') from the file name.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static org.apache.hadoop.fs.Path</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#findArchivedLog(org.apache.hadoop.fs.Path,org.apache.hadoop.conf.Configuration)" class="member-name-link">findArchivedLog</a><wbr>(org.apache.hadoop.fs.Path&nbsp;path,
 org.apache.hadoop.conf.Configuration&nbsp;conf)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Find the archived WAL file path if it is not able to locate in WALs dir.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;org.apache.hadoop.fs.Path&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getArchivedWALFiles(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.ServerName,java.lang.String)" class="member-name-link">getArchivedWALFiles</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;logPrefix)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">List all the old wal files for a dead region server.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static org.apache.hadoop.fs.Path</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getCurrentFileName(org.apache.hadoop.hbase.wal.WAL)" class="member-name-link">getCurrentFileName</a><wbr>(<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&nbsp;wal)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">return the current filename from the current wal.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getLogFileSize(org.apache.hadoop.hbase.wal.WAL)" class="member-name-link">getLogFileSize</a><wbr>(<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&nbsp;wal)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">returns the size of rolled WAL files.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLogFileSize0()" class="member-name-link">getLogFileSize0</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">iff the given WALFactory is using the DefaultWALProvider for meta and/or non-meta, count the
 size of files (only rolled).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNumLogFiles0()" class="member-name-link">getNumLogFiles0</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">iff the given WALFactory is using the DefaultWALProvider for meta and/or non-meta, count the
 number of files (rolled and active).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getNumRolledLogFiles(org.apache.hadoop.hbase.wal.WAL)" class="member-name-link">getNumRolledLogFiles</a><wbr>(<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&nbsp;wal)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">returns the number of rolled WAL files.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getServerNameFromWALDirectoryName(org.apache.hadoop.conf.Configuration,java.lang.String)" class="member-name-link">getServerNameFromWALDirectoryName</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Pulls a ServerName out of a Path generated according to our layout rules.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getServerNameFromWALDirectoryName(org.apache.hadoop.fs.Path)" class="member-name-link">getServerNameFromWALDirectoryName</a><wbr>(org.apache.hadoop.fs.Path&nbsp;logFile)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">This function returns region server name from a log file name which is in one of the following
 formats:
 
 hdfs://&lt;name node&gt;/hbase/.logs/&lt;server name&gt;-splitting/...
 hdfs://&lt;name node&gt;/hbase/.logs/&lt;server name&gt;/...
 </div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getTimestamp(java.lang.String)" class="member-name-link">getTimestamp</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Split a WAL filename to get a start time.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="AbstractFSWALProvider.html" title="type parameter in AbstractFSWALProvider">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getWAL0(org.apache.hadoop.hbase.client.RegionInfo)" class="member-name-link">getWAL0</a><wbr>(<a href="../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getWALArchiveDirectoryName(org.apache.hadoop.conf.Configuration,java.lang.String)" class="member-name-link">getWALArchiveDirectoryName</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;serverName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Construct the directory name for all old WALs on a given server.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getWALDirectoryName(java.lang.String)" class="member-name-link">getWALDirectoryName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;serverName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Construct the directory name for all WALs on a given server.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;org.apache.hadoop.fs.Path&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getWALFiles(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.ServerName)" class="member-name-link">getWALFiles</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;c,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">List all the wal files for a logPrefix.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>private static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getWALNameGroupFromWALName(java.lang.String,int)" class="member-name-link">getWALNameGroupFromWALName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name,
 int&nbsp;group)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getWALPrefixFromWALName(java.lang.String)" class="member-name-link">getWALPrefixFromWALName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Get prefix of the log from its name, assuming WAL name in format of
 log_prefix.filenumber.log_suffix</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getWALs0()" class="member-name-link">getWALs0</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isArchivedLogFile(org.apache.hadoop.fs.Path)" class="member-name-link">isArchivedLogFile</a><wbr>(org.apache.hadoop.fs.Path&nbsp;p)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isMetaFile(java.lang.String)" class="member-name-link">isMetaFile</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;p)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns True if String ends in <a href="#META_WAL_PROVIDER_ID"><code>META_WAL_PROVIDER_ID</code></a></div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isMetaFile(org.apache.hadoop.fs.Path)" class="member-name-link">isMetaFile</a><wbr>(org.apache.hadoop.fs.Path&nbsp;p)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#parseServerNameFromWALName(java.lang.String)" class="member-name-link">parseServerNameFromWALName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Parse the server name from wal prefix.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#recoverLease(org.apache.hadoop.conf.Configuration,org.apache.hadoop.fs.Path)" class="member-name-link">recoverLease</a><wbr>(org.apache.hadoop.conf.Configuration&nbsp;conf,
 org.apache.hadoop.fs.Path&nbsp;path)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#requestLogRoll(org.apache.hadoop.hbase.wal.WAL)" class="member-name-link">requestLogRoll</a><wbr>(<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&nbsp;wal)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">request a log roll, but don't actually do it.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shutdown0()" class="member-name-link">shutdown0</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#validateWALFilename(java.lang.String)" class="member-name-link">validateWALFilename</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;filename)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">A WAL file name is of the format: &lt;wal-name&gt;<a href="#WAL_FILE_NAME_DELIMITER"><code>WAL_FILE_NAME_DELIMITER</code></a>
 &lt;file-creation-timestamp&gt;[.&lt;suffix&gt;].</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.hadoop.hbase.wal.AbstractWALProvider">Methods inherited from class&nbsp;org.apache.hadoop.hbase.wal.<a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></h3>
<code><a href="AbstractWALProvider.html#close()">close</a>, <a href="AbstractWALProvider.html#getLogFileSize()">getLogFileSize</a>, <a href="AbstractWALProvider.html#getNumLogFiles()">getNumLogFiles</a>, <a href="AbstractWALProvider.html#getPeerActionListener()">getPeerActionListener</a>, <a href="AbstractWALProvider.html#getSyncReplicationPeerIdFromWALName(java.lang.String)">getSyncReplicationPeerIdFromWALName</a>, <a href="AbstractWALProvider.html#getWAL(org.apache.hadoop.hbase.client.RegionInfo)">getWAL</a>, <a href="AbstractWALProvider.html#getWALs()">getWALs</a>, <a href="AbstractWALProvider.html#init(org.apache.hadoop.hbase.wal.WALFactory,org.apache.hadoop.conf.Configuration,java.lang.String,org.apache.hadoop.hbase.Abortable)">init</a>, <a href="AbstractWALProvider.html#initWAL(org.apache.hadoop.hbase.wal.WAL)">initWAL</a>, <a href="AbstractWALProvider.html#peerSyncReplicationStateChange(java.lang.String,org.apache.hadoop.hbase.replication.SyncReplicationState,org.apache.hadoop.hbase.replication.SyncReplicationState,int)">peerSyncReplicationStateChange</a>, <a href="AbstractWALProvider.html#setSyncReplicationPeerInfoProvider(org.apache.hadoop.hbase.replication.regionserver.SyncReplicationPeerInfoProvider)">setSyncReplicationPeerInfoProvider</a>, <a href="AbstractWALProvider.html#shutdown()">shutdown</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.hadoop.hbase.wal.WALProvider">Methods inherited from interface&nbsp;org.apache.hadoop.hbase.wal.<a href="WALProvider.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider</a></h3>
<code><a href="WALProvider.html#getWALFileLengthProvider()">getWALFileLengthProvider</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOG">
<h3>LOG</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">org.slf4j.Logger</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-68">LOG</a></span></div>
</section>
</li>
<li>
<section class="detail" id="SEPARATE_OLDLOGDIR">
<h3>SEPARATE_OLDLOGDIR</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-71">SEPARATE_OLDLOGDIR</a></span></div>
<div class="block">Separate old log into different dir by regionserver name</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.wal.AbstractFSWALProvider.SEPARATE_OLDLOGDIR">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_SEPARATE_OLDLOGDIR">
<h3>DEFAULT_SEPARATE_OLDLOGDIR</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-72">DEFAULT_SEPARATE_OLDLOGDIR</a></span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.wal.AbstractFSWALProvider.DEFAULT_SEPARATE_OLDLOGDIR">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="wal">
<h3>wal</h3>
<div class="member-signature"><span class="modifiers">protected volatile</span>&nbsp;<span class="return-type"><a href="AbstractFSWALProvider.html" title="type parameter in AbstractFSWALProvider">T</a> extends <a href="../regionserver/wal/AbstractFSWAL.html" title="class in org.apache.hadoop.hbase.regionserver.wal">AbstractFSWAL</a>&lt;?&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-85">wal</a></span></div>
</section>
</li>
<li>
<section class="detail" id="walCreateLock">
<h3>walCreateLock</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/ReadWriteLock.html" title="class or interface in java.util.concurrent.locks" class="external-link">ReadWriteLock</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-91">walCreateLock</a></span></div>
<div class="block">We use walCreateLock to prevent wal recreation in different threads, and also prevent getWALs
 missing the newly created WAL, see HBASE-21503 for more details.</div>
</section>
</li>
<li>
<section class="detail" id="WAL_FILE_NAME_DELIMITER">
<h3>WAL_FILE_NAME_DELIMITER</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-231">WAL_FILE_NAME_DELIMITER</a></span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.wal.AbstractFSWALProvider.WAL_FILE_NAME_DELIMITER">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="META_WAL_PROVIDER_ID">
<h3>META_WAL_PROVIDER_ID</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-233">META_WAL_PROVIDER_ID</a></span></div>
<div class="block">The hbase:meta region's WAL filename extension</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.wal.AbstractFSWALProvider.META_WAL_PROVIDER_ID">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_PROVIDER_ID">
<h3>DEFAULT_PROVIDER_ID</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-234">DEFAULT_PROVIDER_ID</a></span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.wal.AbstractFSWALProvider.DEFAULT_PROVIDER_ID">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SPLITTING_EXT">
<h3>SPLITTING_EXT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-238">SPLITTING_EXT</a></span></div>
<div class="block">File Extension used while splitting an WAL into regions (HBASE-2312)</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.wal.AbstractFSWALProvider.SPLITTING_EXT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="WAL_FILE_NAME_PATTERN">
<h3>WAL_FILE_NAME_PATTERN</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" title="class or interface in java.util.regex" class="external-link">Pattern</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-244">WAL_FILE_NAME_PATTERN</a></span></div>
<div class="block">Pattern used to validate a WAL file name see <a href="#validateWALFilename(java.lang.String)"><code>validateWALFilename(String)</code></a> for
 description.</div>
</section>
</li>
<li>
<section class="detail" id="NO_TIMESTAMP">
<h3>NO_TIMESTAMP</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-250">NO_TIMESTAMP</a></span></div>
<div class="block">Define for when no timestamp found.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#org.apache.hadoop.hbase.wal.AbstractFSWALProvider.NO_TIMESTAMP">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="TIMESTAMP_COMPARATOR">
<h3>TIMESTAMP_COMPARATOR</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Comparator.html" title="class or interface in java.util" class="external-link">Comparator</a>&lt;org.apache.hadoop.fs.Path&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-299">TIMESTAMP_COMPARATOR</a></span></div>
</section>
</li>
<li>
<section class="detail" id="SERVER_NAME_PATTERN">
<h3>SERVER_NAME_PATTERN</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" title="class or interface in java.util.regex" class="external-link">Pattern</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-599">SERVER_NAME_PATTERN</a></span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>AbstractFSWALProvider</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-65">AbstractFSWALProvider</a></span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="doInit(org.apache.hadoop.hbase.wal.WALFactory,org.apache.hadoop.conf.Configuration,java.lang.String)">
<h3>doInit</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-99">doInit</a></span><wbr><span class="parameters">(<a href="WALFactory.html" title="class in org.apache.hadoop.hbase.wal">WALFactory</a>&nbsp;factory,
 org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;providerId)</span>
               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="AbstractWALProvider.html#doInit(org.apache.hadoop.hbase.wal.WALFactory,org.apache.hadoop.conf.Configuration,java.lang.String)">doInit</a></code>&nbsp;in class&nbsp;<code><a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></code></dd>
<dt>Parameters:</dt>
<dd><code>factory</code> - factory that made us, identity used for FS layout. may not be null</dd>
<dd><code>conf</code> - may not be null</dd>
<dd><code>providerId</code> - differentiate between providers from one factory, used for FS layout. may be
                   null</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getWALs0()">
<h3>getWALs0</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-116">getWALs0</a></span>()</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="AbstractWALProvider.html#getWALs0()">getWALs0</a></code>&nbsp;in class&nbsp;<code><a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getWAL0(org.apache.hadoop.hbase.client.RegionInfo)">
<h3>getWAL0</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="AbstractFSWALProvider.html" title="type parameter in AbstractFSWALProvider">T</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-133">getWAL0</a></span><wbr><span class="parameters">(<a href="../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region)</span>
             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="AbstractWALProvider.html#getWAL0(org.apache.hadoop.hbase.client.RegionInfo)">getWAL0</a></code>&nbsp;in class&nbsp;<code><a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createWAL()">
<h3>createWAL</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="AbstractFSWALProvider.html" title="type parameter in AbstractFSWALProvider">T</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-154">createWAL</a></span>()
                        throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doInit(org.apache.hadoop.conf.Configuration)">
<h3>doInit</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-156">doInit</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;conf)</span>
                        throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="shutdown0()">
<h3>shutdown0</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-158">shutdown0</a></span>()
                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="AbstractWALProvider.html#shutdown0()">shutdown0</a></code>&nbsp;in class&nbsp;<code><a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="close0()">
<h3>close0</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-166">close0</a></span>()
               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="AbstractWALProvider.html#close0()">close0</a></code>&nbsp;in class&nbsp;<code><a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getNumLogFiles0()">
<h3>getNumLogFiles0</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-178">getNumLogFiles0</a></span>()</div>
<div class="block">iff the given WALFactory is using the DefaultWALProvider for meta and/or non-meta, count the
 number of files (rolled and active). if either of them aren't, count 0 for that provider.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="AbstractWALProvider.html#getNumLogFiles0()">getNumLogFiles0</a></code>&nbsp;in class&nbsp;<code><a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLogFileSize0()">
<h3>getLogFileSize0</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-188">getLogFileSize0</a></span>()</div>
<div class="block">iff the given WALFactory is using the DefaultWALProvider for meta and/or non-meta, count the
 size of files (only rolled). if either of them aren't, count 0 for that provider.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="AbstractWALProvider.html#getLogFileSize0()">getLogFileSize0</a></code>&nbsp;in class&nbsp;<code><a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createRemoteWAL(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,java.lang.String,java.lang.String)">
<h3>createRemoteWAL</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-194">createRemoteWAL</a></span><wbr><span class="parameters">(<a href="../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region,
 org.apache.hadoop.fs.FileSystem&nbsp;remoteFs,
 org.apache.hadoop.fs.Path&nbsp;remoteWALDir,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;prefix,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;suffix)</span>
                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="AbstractWALProvider.html#createRemoteWAL(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,java.lang.String,java.lang.String)">createRemoteWAL</a></code>&nbsp;in class&nbsp;<code><a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getNumRolledLogFiles(org.apache.hadoop.hbase.wal.WAL)">
<h3>getNumRolledLogFiles</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-205">getNumRolledLogFiles</a></span><wbr><span class="parameters">(<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&nbsp;wal)</span></div>
<div class="block">returns the number of rolled WAL files.</div>
</section>
</li>
<li>
<section class="detail" id="getLogFileSize(org.apache.hadoop.hbase.wal.WAL)">
<h3>getLogFileSize</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-212">getLogFileSize</a></span><wbr><span class="parameters">(<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&nbsp;wal)</span></div>
<div class="block">returns the size of rolled WAL files.</div>
</section>
</li>
<li>
<section class="detail" id="getCurrentFileName(org.apache.hadoop.hbase.wal.WAL)">
<h3>getCurrentFileName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">org.apache.hadoop.fs.Path</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-219">getCurrentFileName</a></span><wbr><span class="parameters">(<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&nbsp;wal)</span></div>
<div class="block">return the current filename from the current wal.</div>
</section>
</li>
<li>
<section class="detail" id="requestLogRoll(org.apache.hadoop.hbase.wal.WAL)">
<h3>requestLogRoll</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-226">requestLogRoll</a></span><wbr><span class="parameters">(<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&nbsp;wal)</span></div>
<div class="block">request a log roll, but don't actually do it.</div>
</section>
</li>
<li>
<section class="detail" id="extractFileNumFromWAL(org.apache.hadoop.hbase.wal.WAL)">
<h3>extractFileNumFromWAL</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-258">extractFileNumFromWAL</a></span><wbr><span class="parameters">(<a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal">WAL</a>&nbsp;wal)</span></div>
<div class="block">It returns the file create timestamp (the 'FileNum') from the file name. For name format see
 <a href="#validateWALFilename(java.lang.String)"><code>validateWALFilename(String)</code></a> public until remaining tests move to o.a.h.h.wal</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>wal</code> - must not be null</dd>
<dt>Returns:</dt>
<dd>the file number that is part of the WAL file name</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="validateWALFilename(java.lang.String)">
<h3>validateWALFilename</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-278">validateWALFilename</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;filename)</span></div>
<div class="block">A WAL file name is of the format: &lt;wal-name&gt;<a href="#WAL_FILE_NAME_DELIMITER"><code>WAL_FILE_NAME_DELIMITER</code></a>
 &lt;file-creation-timestamp&gt;[.&lt;suffix&gt;]. provider-name is usually made up of a
 server-name and a provider-id</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>filename</code> - name of the file to validate</dd>
<dt>Returns:</dt>
<dd><tt>true</tt> if the filename matches an WAL, <tt>false</tt> otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTimestamp(java.lang.String)">
<h3>getTimestamp</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-294">getTimestamp</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</span></div>
<div class="block">Split a WAL filename to get a start time. WALs usually have the time we start writing to them
 with as part of their name, usually the suffix. Sometimes there will be an extra suffix as when
 it is a WAL for the meta table. For example, WALs might look like this
 <code>10.20.20.171%3A60020.1277499063250</code> where <code>1277499063250</code> is the
 timestamp. Could also be a meta WAL which adds a '.meta' suffix or a synchronous replication
 WAL which adds a '.syncrep' suffix. Check for these. File also may have no timestamp on it. For
 example the recovered.edits files are WALs but are named in ascending order. Here is an
 example: 0000000000000016310. Allow for this.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>name</code> - Name of the WAL file.</dd>
<dt>Returns:</dt>
<dd>Timestamp or <a href="#NO_TIMESTAMP"><code>NO_TIMESTAMP</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getWALDirectoryName(java.lang.String)">
<h3>getWALDirectoryName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-310">getWALDirectoryName</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;serverName)</span></div>
<div class="block">Construct the directory name for all WALs on a given server. Dir names currently look like this
 for WALs: <code>hbase//WALs/kalashnikov.att.net,61634,1486865297088</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serverName</code> - Server name formatted as described in <a href="../ServerName.html" title="class in org.apache.hadoop.hbase"><code>ServerName</code></a></dd>
<dt>Returns:</dt>
<dd>the relative WAL directory name, e.g. <code>.logs/1.example.org,60030,12345</code> if
         <code>serverName</code> passed is <code>1.example.org,60030,12345</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getWALArchiveDirectoryName(org.apache.hadoop.conf.Configuration,java.lang.String)">
<h3>getWALArchiveDirectoryName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-324">getWALArchiveDirectoryName</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;serverName)</span></div>
<div class="block">Construct the directory name for all old WALs on a given server. The default old WALs dir looks
 like: <code>hbase/oldWALs</code>. If you config hbase.separate.oldlogdir.by.regionserver to
 true, it looks like <code>hbase//oldWALs/kalashnikov.att.net,61634,1486865297088</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serverName</code> - Server name formatted as described in <a href="../ServerName.html" title="class in org.apache.hadoop.hbase"><code>ServerName</code></a></dd>
<dt>Returns:</dt>
<dd>the relative WAL directory name</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getArchivedWALFiles(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.ServerName,java.lang.String)">
<h3>getArchivedWALFiles</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;org.apache.hadoop.fs.Path&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-339">getArchivedWALFiles</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;logPrefix)</span>
                                                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">List all the old wal files for a dead region server.
 <p/>
 Initially added for supporting replication, where we need to get the wal files to replicate for
 a dead region server.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getWALFiles(org.apache.hadoop.conf.Configuration,org.apache.hadoop.hbase.ServerName)">
<h3>getWALFiles</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;org.apache.hadoop.fs.Path&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-374">getWALFiles</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;c,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName)</span>
                                                   throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">List all the wal files for a logPrefix.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getServerNameFromWALDirectoryName(org.apache.hadoop.conf.Configuration,java.lang.String)">
<h3>getServerNameFromWALDirectoryName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-400">getServerNameFromWALDirectoryName</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;conf,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path)</span>
                                                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Pulls a ServerName out of a Path generated according to our layout rules. In the below layouts,
 this method ignores the format of the logfile component. Current format: [base directory for
 hbase]/hbase/.logs/ServerName/logfile or [base directory for
 hbase]/hbase/.logs/ServerName-splitting/logfile Expected to work for individual log files and
 server-specific directories.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>null if it's not a log file. Returns the ServerName of the region server that created
         this log file otherwise.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getServerNameFromWALDirectoryName(org.apache.hadoop.fs.Path)">
<h3>getServerNameFromWALDirectoryName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-457">getServerNameFromWALDirectoryName</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.Path&nbsp;logFile)</span></div>
<div class="block">This function returns region server name from a log file name which is in one of the following
 formats:
 <ul>
 <li>hdfs://&lt;name node&gt;/hbase/.logs/&lt;server name&gt;-splitting/...</li>
 <li>hdfs://&lt;name node&gt;/hbase/.logs/&lt;server name&gt;/...</li>
 </ul></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>null if the passed in logFile isn't a valid WAL file path</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isMetaFile(org.apache.hadoop.fs.Path)">
<h3>isMetaFile</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-481">isMetaFile</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.Path&nbsp;p)</span></div>
</section>
</li>
<li>
<section class="detail" id="isMetaFile(java.lang.String)">
<h3>isMetaFile</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-486">isMetaFile</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;p)</span></div>
<div class="block">Returns True if String ends in <a href="#META_WAL_PROVIDER_ID"><code>META_WAL_PROVIDER_ID</code></a></div>
</section>
</li>
<li>
<section class="detail" id="isArchivedLogFile(org.apache.hadoop.fs.Path)">
<h3>isArchivedLogFile</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-512">isArchivedLogFile</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.Path&nbsp;p)</span></div>
</section>
</li>
<li>
<section class="detail" id="findArchivedLog(org.apache.hadoop.fs.Path,org.apache.hadoop.conf.Configuration)">
<h3>findArchivedLog</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">org.apache.hadoop.fs.Path</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-524">findArchivedLog</a></span><wbr><span class="parameters">(org.apache.hadoop.fs.Path&nbsp;path,
 org.apache.hadoop.conf.Configuration&nbsp;conf)</span>
                                                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Find the archived WAL file path if it is not able to locate in WALs dir.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - - active WAL file path</dd>
<dd><code>conf</code> - - configuration</dd>
<dt>Returns:</dt>
<dd>archived path if exists, null - otherwise</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recoverLease(org.apache.hadoop.conf.Configuration,org.apache.hadoop.fs.Path)">
<h3>recoverLease</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-558">recoverLease</a></span><wbr><span class="parameters">(org.apache.hadoop.conf.Configuration&nbsp;conf,
 org.apache.hadoop.fs.Path&nbsp;path)</span></div>
</section>
</li>
<li>
<section class="detail" id="addWALActionsListener(org.apache.hadoop.hbase.regionserver.wal.WALActionsListener)">
<h3>addWALActionsListener</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-573">addWALActionsListener</a></span><wbr><span class="parameters">(<a href="../regionserver/wal/WALActionsListener.html" title="interface in org.apache.hadoop.hbase.regionserver.wal">WALActionsListener</a>&nbsp;listener)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="WALProvider.html#addWALActionsListener(org.apache.hadoop.hbase.regionserver.wal.WALActionsListener)">WALProvider</a></code></span></div>
<div class="block">Add a <a href="../regionserver/wal/WALActionsListener.html" title="interface in org.apache.hadoop.hbase.regionserver.wal"><code>WALActionsListener</code></a>.
 <p>
 Notice that you must call this method before calling <a href="WALProvider.html#getWAL(org.apache.hadoop.hbase.client.RegionInfo)"><code>WALProvider.getWAL(RegionInfo)</code></a> as this method
 will not effect the <a href="WAL.html" title="interface in org.apache.hadoop.hbase.wal"><code>WAL</code></a> which has already been created. And as long as we can only it
 when initialization, it is not thread safe.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="WALProvider.html#addWALActionsListener(org.apache.hadoop.hbase.regionserver.wal.WALActionsListener)">addWALActionsListener</a></code>&nbsp;in interface&nbsp;<code><a href="WALProvider.html" title="interface in org.apache.hadoop.hbase.wal">WALProvider</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="AbstractWALProvider.html#addWALActionsListener(org.apache.hadoop.hbase.regionserver.wal.WALActionsListener)">addWALActionsListener</a></code>&nbsp;in class&nbsp;<code><a href="AbstractWALProvider.html" title="class in org.apache.hadoop.hbase.wal">AbstractWALProvider</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getWALNameGroupFromWALName(java.lang.String,int)">
<h3>getWALNameGroupFromWALName</h3>
<div class="member-signature"><span class="modifiers">private static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-578">getWALNameGroupFromWALName</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name,
 int&nbsp;group)</span></div>
</section>
</li>
<li>
<section class="detail" id="getWALPrefixFromWALName(java.lang.String)">
<h3>getWALPrefixFromWALName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-595">getWALPrefixFromWALName</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</span></div>
<div class="block">Get prefix of the log from its name, assuming WAL name in format of
 log_prefix.filenumber.log_suffix</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>name</code> - Name of the WAL to parse</dd>
<dt>Returns:</dt>
<dd>prefix of the log</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if the name passed in is not a valid wal file name</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../regionserver/wal/AbstractFSWAL.html#getCurrentFileName()"><code>AbstractFSWAL.getCurrentFileName()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="parseServerNameFromWALName(java.lang.String)">
<h3>parseServerNameFromWALName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/wal/AbstractFSWALProvider.html#line-609">parseServerNameFromWALName</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</span></div>
<div class="block">Parse the server name from wal prefix. A wal's name is always started with a server name in non
 test code.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the server name</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if the name passed in is not started with a server name</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2007&#x2013;2020 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
