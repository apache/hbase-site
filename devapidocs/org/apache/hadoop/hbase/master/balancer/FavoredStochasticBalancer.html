<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>FavoredStochasticBalancer (Apache HBase 4.0.0-alpha-1-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.hadoop.hbase.master.balancer, class: FavoredStochasticBalancer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/FavoredStochasticBalancer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.hadoop.hbase.master.balancer</a></div>
<h1 title="Class FavoredStochasticBalancer" class="title">Class FavoredStochasticBalancer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="BaseLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">org.apache.hadoop.hbase.master.balancer.BaseLoadBalancer</a>
<div class="inheritance"><a href="StochasticLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">org.apache.hadoop.hbase.master.balancer.StochasticLoadBalancer</a>
<div class="inheritance">org.apache.hadoop.hbase.master.balancer.FavoredStochasticBalancer</div>
</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../conf/ConfigurationObserver.html" title="interface in org.apache.hadoop.hbase.conf">ConfigurationObserver</a></code>, <code><a href="../../favored/FavoredNodesPromoter.html" title="interface in org.apache.hadoop.hbase.favored">FavoredNodesPromoter</a></code>, <code><a href="../LoadBalancer.html" title="interface in org.apache.hadoop.hbase.master">LoadBalancer</a></code>, <code><a href="../../Stoppable.html" title="interface in org.apache.hadoop.hbase">Stoppable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@Private
</span><span class="modifiers">public class </span><span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-69">FavoredStochasticBalancer</a></span>
<span class="extends-implements">extends <a href="StochasticLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">StochasticLoadBalancer</a>
implements <a href="../../favored/FavoredNodesPromoter.html" title="interface in org.apache.hadoop.hbase.favored">FavoredNodesPromoter</a></span></div>
<div class="block">An implementation of the <a href="../LoadBalancer.html" title="interface in org.apache.hadoop.hbase.master"><code>LoadBalancer</code></a> that assigns favored
 nodes for each region. There is a Primary RegionServer that hosts the region, and then there is
 Secondary and Tertiary RegionServers. Currently, the favored nodes information is used in
 creating HDFS files - the Primary RegionServer passes the primary, secondary, tertiary node
 addresses as hints to the DistributedFileSystem API for creating files on the filesystem. These
 nodes are treated as hints by the HDFS to place the blocks of the file. This alleviates the
 problem to do with reading from remote nodes (since we can make the Secondary RegionServer as the
 new Primary RegionServer) after a region is recovered. This should help provide consistent read
 latencies for the regions even when their primary region servers die. This provides two
 <a href="CandidateGenerator.html" title="class in org.apache.hadoop.hbase.master.balancer"><code>CandidateGenerator</code></a></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>(package private) class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="FavoredStochasticBalancer.FavoredNodeLoadPicker.html" class="type-name-link" title="class in org.apache.hadoop.hbase.master.balancer">FavoredStochasticBalancer.FavoredNodeLoadPicker</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="FavoredStochasticBalancer.FavoredNodeLocalityPicker.html" class="type-name-link" title="class in org.apache.hadoop.hbase.master.balancer">FavoredStochasticBalancer.FavoredNodeLocalityPicker</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Pick favored nodes with the highest locality for a region with lowest locality.</div>
</div>
</div>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-org.apache.hadoop.hbase.master.balancer.StochasticLoadBalancer">Nested classes/interfaces inherited from class&nbsp;org.apache.hadoop.hbase.master.balancer.<a href="StochasticLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">StochasticLoadBalancer</a></h2>
<code><a href="StochasticLoadBalancer.GeneratorType.html" title="enum class in org.apache.hadoop.hbase.master.balancer">StochasticLoadBalancer.GeneratorType</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private <a href="../../favored/FavoredNodesManager.html" title="class in org.apache.hadoop.hbase.favored">FavoredNodesManager</a></code></div>
<div class="col-second even-row-color"><code><a href="#fnm" class="member-name-link">fnm</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private static final org.slf4j.Logger</code></div>
<div class="col-second odd-row-color"><code><a href="#LOG" class="member-name-link">LOG</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.hadoop.hbase.master.balancer.StochasticLoadBalancer">Fields inherited from class&nbsp;org.apache.hadoop.hbase.master.balancer.<a href="StochasticLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">StochasticLoadBalancer</a></h3>
<code><a href="StochasticLoadBalancer.html#candidateGenerators">candidateGenerators</a>, <a href="StochasticLoadBalancer.html#COST_FUNCTIONS_COST_FUNCTIONS_KEY">COST_FUNCTIONS_COST_FUNCTIONS_KEY</a>, <a href="StochasticLoadBalancer.html#costFunctions">costFunctions</a>, <a href="StochasticLoadBalancer.html#DEFAULT_KEEP_REGION_LOADS">DEFAULT_KEEP_REGION_LOADS</a>, <a href="StochasticLoadBalancer.html#DEFAULT_MAX_RUNNING_TIME">DEFAULT_MAX_RUNNING_TIME</a>, <a href="StochasticLoadBalancer.html#DEFAULT_MAX_STEPS">DEFAULT_MAX_STEPS</a>, <a href="StochasticLoadBalancer.html#DEFAULT_MIN_COST_NEED_BALANCE">DEFAULT_MIN_COST_NEED_BALANCE</a>, <a href="StochasticLoadBalancer.html#DEFAULT_RUN_MAX_STEPS">DEFAULT_RUN_MAX_STEPS</a>, <a href="StochasticLoadBalancer.html#DEFAULT_STEPS_PER_REGION">DEFAULT_STEPS_PER_REGION</a>, <a href="StochasticLoadBalancer.html#KEEP_REGION_LOADS">KEEP_REGION_LOADS</a>, <a href="StochasticLoadBalancer.html#loads">loads</a>, <a href="StochasticLoadBalancer.html#MAX_RUNNING_TIME_KEY">MAX_RUNNING_TIME_KEY</a>, <a href="StochasticLoadBalancer.html#MAX_STEPS_KEY">MAX_STEPS_KEY</a>, <a href="StochasticLoadBalancer.html#MIN_COST_NEED_BALANCE_KEY">MIN_COST_NEED_BALANCE_KEY</a>, <a href="StochasticLoadBalancer.html#OVERALL_COST_FUNCTION_NAME">OVERALL_COST_FUNCTION_NAME</a>, <a href="StochasticLoadBalancer.html#regionCacheRatioOnOldServerMap">regionCacheRatioOnOldServerMap</a>, <a href="StochasticLoadBalancer.html#RUN_MAX_STEPS_KEY">RUN_MAX_STEPS_KEY</a>, <a href="StochasticLoadBalancer.html#STEPS_PER_REGION_KEY">STEPS_PER_REGION_KEY</a></code></div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.hadoop.hbase.master.balancer.BaseLoadBalancer">Fields inherited from class&nbsp;org.apache.hadoop.hbase.master.balancer.<a href="BaseLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">BaseLoadBalancer</a></h3>
<code><a href="BaseLoadBalancer.html#BALANCER_DECISION_BUFFER_ENABLED">BALANCER_DECISION_BUFFER_ENABLED</a>, <a href="BaseLoadBalancer.html#BALANCER_REJECTION_BUFFER_ENABLED">BALANCER_REJECTION_BUFFER_ENABLED</a>, <a href="BaseLoadBalancer.html#clusterStatus">clusterStatus</a>, <a href="BaseLoadBalancer.html#DEFAULT_BALANCER_DECISION_BUFFER_ENABLED">DEFAULT_BALANCER_DECISION_BUFFER_ENABLED</a>, <a href="BaseLoadBalancer.html#DEFAULT_BALANCER_REJECTION_BUFFER_ENABLED">DEFAULT_BALANCER_REJECTION_BUFFER_ENABLED</a>, <a href="BaseLoadBalancer.html#DEFAULT_HBASE_MASTER_LOADBALANCE_BYTABLE">DEFAULT_HBASE_MASTER_LOADBALANCE_BYTABLE</a>, <a href="BaseLoadBalancer.html#isByTable">isByTable</a>, <a href="BaseLoadBalancer.html#masterServerName">masterServerName</a>, <a href="BaseLoadBalancer.html#metricsBalancer">metricsBalancer</a>, <a href="BaseLoadBalancer.html#MIN_SERVER_BALANCE">MIN_SERVER_BALANCE</a>, <a href="BaseLoadBalancer.html#provider">provider</a>, <a href="BaseLoadBalancer.html#rackManager">rackManager</a>, <a href="BaseLoadBalancer.html#regionFinder">regionFinder</a>, <a href="BaseLoadBalancer.html#slop">slop</a>, <a href="BaseLoadBalancer.html#useRegionFinder">useRegionFinder</a></code></div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.hadoop.hbase.favored.FavoredNodesPromoter">Fields inherited from interface&nbsp;org.apache.hadoop.hbase.favored.<a href="../../favored/FavoredNodesPromoter.html" title="interface in org.apache.hadoop.hbase.favored">FavoredNodesPromoter</a></h3>
<code><a href="../../favored/FavoredNodesPromoter.html#FAVORED_ALWAYS_ASSIGN_REGIONS">FAVORED_ALWAYS_ASSIGN_REGIONS</a></code></div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.hadoop.hbase.master.LoadBalancer">Fields inherited from interface&nbsp;org.apache.hadoop.hbase.master.<a href="../LoadBalancer.html" title="interface in org.apache.hadoop.hbase.master">LoadBalancer</a></h3>
<code><a href="../LoadBalancer.html#BOGUS_SERVER_NAME">BOGUS_SERVER_NAME</a>, <a href="../LoadBalancer.html#HBASE_RSGROUP_LOADBALANCER_CLASS">HBASE_RSGROUP_LOADBALANCER_CLASS</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">FavoredStochasticBalancer</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addRegionToMap(java.util.Map,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.ServerName)" class="member-name-link">addRegionToMap</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;assignmentMapForFavoredNodes,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;host)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#assignRegionToAvailableFavoredNode(java.util.Map,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.ServerName,org.apache.hadoop.hbase.ServerName,org.apache.hadoop.hbase.ServerName)" class="member-name-link">assignRegionToAvailableFavoredNode</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;assignmentMapForFavoredNodes,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;primaryHost,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;secondaryHost,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;tertiaryHost)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Assign the region to primary if its available.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../RegionPlan.html" title="class in org.apache.hadoop.hbase.master">RegionPlan</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#balanceTable(org.apache.hadoop.hbase.TableName,java.util.Map)" class="member-name-link">balanceTable</a><wbr>(<a href="../../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;tableName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;loadOfOneTable)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">For all regions correctly assigned to favored nodes, we just use the stochastic balancer
 implementation.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="CandidateGenerator.html" title="class in org.apache.hadoop.hbase.master.balancer">CandidateGenerator</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createCandidateGenerators()" class="member-name-link">createCandidateGenerators</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateFavoredNodesForDaughter(java.util.List,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.client.RegionInfo)" class="member-name-link">generateFavoredNodesForDaughter</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;servers,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;parent,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionA,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionB)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generate Favored Nodes for daughters during region split.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateFavoredNodesForMergedRegion(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.client.RegionInfo%5B%5D)" class="member-name-link">generateFavoredNodesForMergedRegion</a><wbr>(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;merged,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>[]&nbsp;mergeParents)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generate favored nodes for a region during merge.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateFNForRegionsWithoutFN(org.apache.hadoop.hbase.favored.FavoredNodeAssignmentHelper,java.util.List)" class="member-name-link">generateFNForRegionsWithoutFN</a><wbr>(<a href="../../favored/FavoredNodeAssignmentHelper.html" title="class in org.apache.hadoop.hbase.favored">FavoredNodeAssignmentHelper</a>&nbsp;helper,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&nbsp;regions)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFavoredNodes(org.apache.hadoop.hbase.client.RegionInfo)" class="member-name-link">getFavoredNodes</a><wbr>(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getInheritedFNForDaughter(org.apache.hadoop.hbase.favored.FavoredNodeAssignmentHelper,java.util.List,org.apache.hadoop.hbase.favored.FavoredNodesPlan.Position,org.apache.hadoop.hbase.favored.FavoredNodesPlan.Position)" class="member-name-link">getInheritedFNForDaughter</a><wbr>(<a href="../../favored/FavoredNodeAssignmentHelper.html" title="class in org.apache.hadoop.hbase.favored">FavoredNodeAssignmentHelper</a>&nbsp;helper,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;parentFavoredNodes,
 <a href="../../favored/FavoredNodesPlan.Position.html" title="enum class in org.apache.hadoop.hbase.favored">FavoredNodesPlan.Position</a>&nbsp;primary,
 <a href="../../favored/FavoredNodesPlan.Position.html" title="enum class in org.apache.hadoop.hbase.favored">FavoredNodesPlan.Position</a>&nbsp;secondary)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOnlineFavoredNodes(java.util.List,java.util.List)" class="member-name-link">getOnlineFavoredNodes</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;onlineServers,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;serversWithoutStartCodes)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return list of favored nodes that are online.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="CandidateGenerator.html" title="class in org.apache.hadoop.hbase.master.balancer">CandidateGenerator</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRandomGenerator()" class="member-name-link">getRandomGenerator</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns any candidate generator in random</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getServerFromFavoredNode(java.util.List,org.apache.hadoop.hbase.ServerName)" class="member-name-link">getServerFromFavoredNode</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;servers,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;fn)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the ServerName for the FavoredNode.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#mergeAssignmentMaps(java.util.Map,java.util.Map)" class="member-name-link">mergeAssignmentMaps</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;assignmentMap,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;otherAssignments)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#randomAssignment(org.apache.hadoop.hbase.client.RegionInfo,java.util.List)" class="member-name-link">randomAssignment</a><wbr>(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;servers)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If we have favored nodes for a region, we will return one of the FN as destination.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#retainAssignment(java.util.Map,java.util.List)" class="member-name-link">retainAssignment</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>,<wbr><a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;regions,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;servers)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Reuse BaseLoadBalancer's retainAssignment, but generate favored nodes when its missing.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#roundRobinAssignment(java.util.List,java.util.List)" class="member-name-link">roundRobinAssignment</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&nbsp;regions,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;servers)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Round robin assignment: Segregate the regions into two types: 1.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#segregateRegionsAndAssignRegionsWithFavoredNodes(java.util.Collection,java.util.List)" class="member-name-link">segregateRegionsAndAssignRegionsWithFavoredNodes</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&nbsp;regions,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;onlineServers)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return a pair - one with assignments when favored nodes are present and another with regions
 without favored nodes.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setFavoredNodesManager(org.apache.hadoop.hbase.favored.FavoredNodesManager)" class="member-name-link">setFavoredNodesManager</a><wbr>(<a href="../../favored/FavoredNodesManager.html" title="class in org.apache.hadoop.hbase.favored">FavoredNodesManager</a>&nbsp;fnm)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateFavoredNodesForRegion(org.apache.hadoop.hbase.client.RegionInfo,java.util.List)" class="member-name-link">updateFavoredNodesForRegion</a><wbr>(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;newFavoredNodes)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.hadoop.hbase.master.balancer.StochasticLoadBalancer">Methods inherited from class&nbsp;org.apache.hadoop.hbase.master.balancer.<a href="StochasticLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">StochasticLoadBalancer</a></h3>
<code><a href="StochasticLoadBalancer.html#composeAttributeName(java.lang.String,java.lang.String)">composeAttributeName</a>, <a href="StochasticLoadBalancer.html#computeCost(org.apache.hadoop.hbase.master.balancer.BalancerClusterState,double)">computeCost</a>, <a href="StochasticLoadBalancer.html#createCostFunctions(org.apache.hadoop.conf.Configuration)">createCostFunctions</a>, <a href="StochasticLoadBalancer.html#functionCost()">functionCost</a>, <a href="StochasticLoadBalancer.html#getCandidateGenerators()">getCandidateGenerators</a>, <a href="StochasticLoadBalancer.html#getCostFunctionNames()">getCostFunctionNames</a>, <a href="StochasticLoadBalancer.html#getCostFunctions()">getCostFunctions</a>, <a href="StochasticLoadBalancer.html#initCosts(org.apache.hadoop.hbase.master.balancer.BalancerClusterState)">initCosts</a>, <a href="StochasticLoadBalancer.html#loadConf(org.apache.hadoop.conf.Configuration)">loadConf</a>, <a href="StochasticLoadBalancer.html#needsBalance(org.apache.hadoop.hbase.TableName,org.apache.hadoop.hbase.master.balancer.BalancerClusterState)">needsBalance</a>, <a href="StochasticLoadBalancer.html#nextAction(org.apache.hadoop.hbase.master.balancer.BalancerClusterState)">nextAction</a>, <a href="StochasticLoadBalancer.html#sendRejectionReasonToRingBuffer(java.util.function.Supplier,java.util.List)">sendRejectionReasonToRingBuffer</a>, <a href="StochasticLoadBalancer.html#setRackManager(org.apache.hadoop.hbase.master.RackManager)">setRackManager</a>, <a href="StochasticLoadBalancer.html#updateBalancerLoadInfo(java.util.Map)">updateBalancerLoadInfo</a>, <a href="StochasticLoadBalancer.html#updateClusterMetrics(org.apache.hadoop.hbase.ClusterMetrics)">updateClusterMetrics</a>, <a href="StochasticLoadBalancer.html#updateCostsAndWeightsWithAction(org.apache.hadoop.hbase.master.balancer.BalancerClusterState,org.apache.hadoop.hbase.master.balancer.BalanceAction)">updateCostsAndWeightsWithAction</a>, <a href="StochasticLoadBalancer.html#updateMetricsSize(int)">updateMetricsSize</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.hadoop.hbase.master.balancer.BaseLoadBalancer">Methods inherited from class&nbsp;org.apache.hadoop.hbase.master.balancer.<a href="BaseLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">BaseLoadBalancer</a></h3>
<code><a href="BaseLoadBalancer.html#balanceCluster(java.util.Map)">balanceCluster</a>, <a href="BaseLoadBalancer.html#getConf()">getConf</a>, <a href="BaseLoadBalancer.html#getDefaultSlop()">getDefaultSlop</a>, <a href="BaseLoadBalancer.html#idleRegionServerExist(org.apache.hadoop.hbase.master.balancer.BalancerClusterState)">idleRegionServerExist</a>, <a href="BaseLoadBalancer.html#initialize()">initialize</a>, <a href="BaseLoadBalancer.html#isStopped()">isStopped</a>, <a href="BaseLoadBalancer.html#onConfigurationChange(org.apache.hadoop.conf.Configuration)">onConfigurationChange</a>, <a href="BaseLoadBalancer.html#postMasterStartupInitialize()">postMasterStartupInitialize</a>, <a href="BaseLoadBalancer.html#preBalanceCluster(java.util.Map)">preBalanceCluster</a>, <a href="BaseLoadBalancer.html#regionOffline(org.apache.hadoop.hbase.client.RegionInfo)">regionOffline</a>, <a href="BaseLoadBalancer.html#regionOnline(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.ServerName)">regionOnline</a>, <a href="BaseLoadBalancer.html#setClusterInfoProvider(org.apache.hadoop.hbase.master.balancer.ClusterInfoProvider)">setClusterInfoProvider</a>, <a href="BaseLoadBalancer.html#sloppyRegionServerExist(org.apache.hadoop.hbase.master.balancer.ClusterLoadState)">sloppyRegionServerExist</a>, <a href="BaseLoadBalancer.html#stop(java.lang.String)">stop</a>, <a href="BaseLoadBalancer.html#toEnsumbleTableLoad(java.util.Map)">toEnsumbleTableLoad</a>, <a href="BaseLoadBalancer.html#updateBalancerStatus(boolean)">updateBalancerStatus</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOG">
<h3>LOG</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">org.slf4j.Logger</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-73">LOG</a></span></div>
</section>
</li>
<li>
<section class="detail" id="fnm">
<h3>fnm</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="../../favored/FavoredNodesManager.html" title="class in org.apache.hadoop.hbase.favored">FavoredNodesManager</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-75">fnm</a></span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>FavoredStochasticBalancer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-70">FavoredStochasticBalancer</a></span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setFavoredNodesManager(org.apache.hadoop.hbase.favored.FavoredNodesManager)">
<h3>setFavoredNodesManager</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-77">setFavoredNodesManager</a></span><wbr><span class="parameters">(<a href="../../favored/FavoredNodesManager.html" title="class in org.apache.hadoop.hbase.favored">FavoredNodesManager</a>&nbsp;fnm)</span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../favored/FavoredNodesPromoter.html#setFavoredNodesManager(org.apache.hadoop.hbase.favored.FavoredNodesManager)">setFavoredNodesManager</a></code>&nbsp;in interface&nbsp;<code><a href="../../favored/FavoredNodesPromoter.html" title="interface in org.apache.hadoop.hbase.favored">FavoredNodesPromoter</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createCandidateGenerators()">
<h3>createCandidateGenerators</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="CandidateGenerator.html" title="class in org.apache.hadoop.hbase.master.balancer">CandidateGenerator</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-82">createCandidateGenerators</a></span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="StochasticLoadBalancer.html#createCandidateGenerators()">createCandidateGenerators</a></code>&nbsp;in class&nbsp;<code><a href="StochasticLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">StochasticLoadBalancer</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRandomGenerator()">
<h3>getRandomGenerator</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="CandidateGenerator.html" title="class in org.apache.hadoop.hbase.master.balancer">CandidateGenerator</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-91">getRandomGenerator</a></span>()</div>
<div class="block">Returns any candidate generator in random</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="StochasticLoadBalancer.html#getRandomGenerator()">getRandomGenerator</a></code>&nbsp;in class&nbsp;<code><a href="StochasticLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">StochasticLoadBalancer</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="roundRobinAssignment(java.util.List,java.util.List)">
<h3>roundRobinAssignment</h3>
<div class="member-signature"><span class="annotations">@NonNull
</span><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-107">roundRobinAssignment</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&nbsp;regions,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;servers)</span>
                                                      throws <span class="exceptions"><a href="../../HBaseIOException.html" title="class in org.apache.hadoop.hbase">HBaseIOException</a></span></div>
<div class="block">Round robin assignment: Segregate the regions into two types: 1. The regions that have favored
 node assignment where at least one of the favored node is still alive. In this case, try to
 adhere to the current favored nodes assignment as much as possible - i.e., if the current
 primary is gone, then make the secondary or tertiary as the new host for the region (based on
 their current load). Note that we don't change the favored node assignments here (even though
 one or more favored node is currently down). That will be done by the admin operations. 2. The
 regions that currently don't have favored node assignments. Generate favored nodes for them and
 then assign. Generate the primary fn in round robin fashion and generate secondary and tertiary
 as per favored nodes constraints.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../LoadBalancer.html#roundRobinAssignment(java.util.List,java.util.List)">roundRobinAssignment</a></code>&nbsp;in interface&nbsp;<code><a href="../LoadBalancer.html" title="interface in org.apache.hadoop.hbase.master">LoadBalancer</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="BaseLoadBalancer.html#roundRobinAssignment(java.util.List,java.util.List)">roundRobinAssignment</a></code>&nbsp;in class&nbsp;<code><a href="BaseLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">BaseLoadBalancer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>regions</code> - all regions</dd>
<dd><code>servers</code> - all servers</dd>
<dt>Returns:</dt>
<dd>map of server to the regions it should take, or emptyMap if no assignment is possible
         (ie. no servers)</dd>
<dt>Throws:</dt>
<dd><code><a href="../../HBaseIOException.html" title="class in org.apache.hadoop.hbase">HBaseIOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="mergeAssignmentMaps(java.util.Map,java.util.Map)">
<h3>mergeAssignmentMaps</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-147">mergeAssignmentMaps</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;assignmentMap,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;otherAssignments)</span></div>
</section>
</li>
<li>
<section class="detail" id="generateFNForRegionsWithoutFN(org.apache.hadoop.hbase.favored.FavoredNodeAssignmentHelper,java.util.List)">
<h3>generateFNForRegionsWithoutFN</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-165">generateFNForRegionsWithoutFN</a></span><wbr><span class="parameters">(<a href="../../favored/FavoredNodeAssignmentHelper.html" title="class in org.apache.hadoop.hbase.favored">FavoredNodeAssignmentHelper</a>&nbsp;helper,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&nbsp;regions)</span>
                                                                throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="segregateRegionsAndAssignRegionsWithFavoredNodes(java.util.Collection,java.util.List)">
<h3>segregateRegionsAndAssignRegionsWithFavoredNodes</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="../../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-182">segregateRegionsAndAssignRegionsWithFavoredNodes</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&nbsp;regions,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;onlineServers)</span>
                                                                                                          throws <span class="exceptions"><a href="../../HBaseIOException.html" title="class in org.apache.hadoop.hbase">HBaseIOException</a></span></div>
<div class="block">Return a pair - one with assignments when favored nodes are present and another with regions
 without favored nodes.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../../HBaseIOException.html" title="class in org.apache.hadoop.hbase">HBaseIOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addRegionToMap(java.util.Map,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.ServerName)">
<h3>addRegionToMap</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-221">addRegionToMap</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;assignmentMapForFavoredNodes,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;host)</span></div>
</section>
</li>
<li>
<section class="detail" id="getServerFromFavoredNode(java.util.List,org.apache.hadoop.hbase.ServerName)">
<h3>getServerFromFavoredNode</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-235">getServerFromFavoredNode</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;servers,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;fn)</span></div>
<div class="block">Get the ServerName for the FavoredNode. Since FN's startcode is -1, we could want to get the
 ServerName with the correct start code from the list of provided servers.</div>
</section>
</li>
<li>
<section class="detail" id="assignRegionToAvailableFavoredNode(java.util.Map,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.ServerName,org.apache.hadoop.hbase.ServerName,org.apache.hadoop.hbase.ServerName)">
<h3>assignRegionToAvailableFavoredNode</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-249">assignRegionToAvailableFavoredNode</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;assignmentMapForFavoredNodes,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;region,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;primaryHost,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;secondaryHost,
 <a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;tertiaryHost)</span></div>
<div class="block">Assign the region to primary if its available. If both secondary and tertiary are available,
 assign to the host which has less load. Else assign to secondary or tertiary whichever is
 available (in that order).</div>
</section>
</li>
<li>
<section class="detail" id="randomAssignment(org.apache.hadoop.hbase.client.RegionInfo,java.util.List)">
<h3>randomAssignment</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a></span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-285">randomAssignment</a></span><wbr><span class="parameters">(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;servers)</span>
                            throws <span class="exceptions"><a href="../../HBaseIOException.html" title="class in org.apache.hadoop.hbase">HBaseIOException</a></span></div>
<div class="block">If we have favored nodes for a region, we will return one of the FN as destination. If favored
 nodes are not present for a region, we will generate and return one of the FN as destination.
 If we can't generate anything, lets fallback.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../LoadBalancer.html#randomAssignment(org.apache.hadoop.hbase.client.RegionInfo,java.util.List)">randomAssignment</a></code>&nbsp;in interface&nbsp;<code><a href="../LoadBalancer.html" title="interface in org.apache.hadoop.hbase.master">LoadBalancer</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="BaseLoadBalancer.html#randomAssignment(org.apache.hadoop.hbase.client.RegionInfo,java.util.List)">randomAssignment</a></code>&nbsp;in class&nbsp;<code><a href="BaseLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">BaseLoadBalancer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>regionInfo</code> - Region for which this selection is being done.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../HBaseIOException.html" title="class in org.apache.hadoop.hbase">HBaseIOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateFavoredNodesForRegion(org.apache.hadoop.hbase.client.RegionInfo,java.util.List)">
<h3>updateFavoredNodesForRegion</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-324">updateFavoredNodesForRegion</a></span><wbr><span class="parameters">(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;newFavoredNodes)</span>
                                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="retainAssignment(java.util.Map,java.util.List)">
<h3>retainAssignment</h3>
<div class="member-signature"><span class="annotations">@NonNull
</span><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-334">retainAssignment</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>,<wbr><a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;regions,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;servers)</span>
                                                  throws <span class="exceptions"><a href="../../HBaseIOException.html" title="class in org.apache.hadoop.hbase">HBaseIOException</a></span></div>
<div class="block">Reuse BaseLoadBalancer's retainAssignment, but generate favored nodes when its missing.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../LoadBalancer.html#retainAssignment(java.util.Map,java.util.List)">retainAssignment</a></code>&nbsp;in interface&nbsp;<code><a href="../LoadBalancer.html" title="interface in org.apache.hadoop.hbase.master">LoadBalancer</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="BaseLoadBalancer.html#retainAssignment(java.util.Map,java.util.List)">retainAssignment</a></code>&nbsp;in class&nbsp;<code><a href="BaseLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">BaseLoadBalancer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>regions</code> - regions and existing assignment from meta</dd>
<dd><code>servers</code> - available servers</dd>
<dt>Returns:</dt>
<dd>map of servers and regions to be assigned to them, or emptyMap if no assignment is
         possible (ie. no servers)</dd>
<dt>Throws:</dt>
<dd><code><a href="../../HBaseIOException.html" title="class in org.apache.hadoop.hbase">HBaseIOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getOnlineFavoredNodes(java.util.List,java.util.List)">
<h3>getOnlineFavoredNodes</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-419">getOnlineFavoredNodes</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;onlineServers,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;serversWithoutStartCodes)</span></div>
<div class="block">Return list of favored nodes that are online.</div>
</section>
</li>
<li>
<section class="detail" id="getFavoredNodes(org.apache.hadoop.hbase.client.RegionInfo)">
<h3>getFavoredNodes</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-436">getFavoredNodes</a></span><wbr><span class="parameters">(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionInfo)</span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../favored/FavoredNodesPromoter.html#getFavoredNodes(org.apache.hadoop.hbase.client.RegionInfo)">getFavoredNodes</a></code>&nbsp;in interface&nbsp;<code><a href="../../favored/FavoredNodesPromoter.html" title="interface in org.apache.hadoop.hbase.favored">FavoredNodesPromoter</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="generateFavoredNodesForDaughter(java.util.List,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.client.RegionInfo)">
<h3>generateFavoredNodesForDaughter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-451">generateFavoredNodesForDaughter</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;servers,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;parent,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionA,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;regionB)</span>
                                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Generate Favored Nodes for daughters during region split.
 <p/>
 If the parent does not have FN, regenerates them for the daughters.
 <p/>
 If the parent has FN, inherit two FN from parent for each daughter and generate the remaining.
 The primary FN for both the daughters should be the same as parent. Inherit the secondary FN
 from the parent but keep it different for each daughter. Choose the remaining FN randomly. This
 would give us better distribution over a period of time after enough splits.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../favored/FavoredNodesPromoter.html#generateFavoredNodesForDaughter(java.util.List,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.client.RegionInfo)">generateFavoredNodesForDaughter</a></code>&nbsp;in interface&nbsp;<code><a href="../../favored/FavoredNodesPromoter.html" title="interface in org.apache.hadoop.hbase.favored">FavoredNodesPromoter</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getInheritedFNForDaughter(org.apache.hadoop.hbase.favored.FavoredNodeAssignmentHelper,java.util.List,org.apache.hadoop.hbase.favored.FavoredNodesPlan.Position,org.apache.hadoop.hbase.favored.FavoredNodesPlan.Position)">
<h3>getInheritedFNForDaughter</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-481">getInheritedFNForDaughter</a></span><wbr><span class="parameters">(<a href="../../favored/FavoredNodeAssignmentHelper.html" title="class in org.apache.hadoop.hbase.favored">FavoredNodeAssignmentHelper</a>&nbsp;helper,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;&nbsp;parentFavoredNodes,
 <a href="../../favored/FavoredNodesPlan.Position.html" title="enum class in org.apache.hadoop.hbase.favored">FavoredNodesPlan.Position</a>&nbsp;primary,
 <a href="../../favored/FavoredNodesPlan.Position.html" title="enum class in org.apache.hadoop.hbase.favored">FavoredNodesPlan.Position</a>&nbsp;secondary)</span>
                                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="generateFavoredNodesForMergedRegion(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.client.RegionInfo[])">
<h3>generateFavoredNodesForMergedRegion</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-504">generateFavoredNodesForMergedRegion</a></span><wbr><span class="parameters">(<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&nbsp;merged,
 <a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>[]&nbsp;mergeParents)</span>
                                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Generate favored nodes for a region during merge. Choose the FN from one of the sources to keep
 it simple.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../favored/FavoredNodesPromoter.html#generateFavoredNodesForMergedRegion(org.apache.hadoop.hbase.client.RegionInfo,org.apache.hadoop.hbase.client.RegionInfo%5B%5D)">generateFavoredNodesForMergedRegion</a></code>&nbsp;in interface&nbsp;<code><a href="../../favored/FavoredNodesPromoter.html" title="interface in org.apache.hadoop.hbase.favored">FavoredNodesPromoter</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="balanceTable(org.apache.hadoop.hbase.TableName,java.util.Map)">
<h3>balanceTable</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../RegionPlan.html" title="class in org.apache.hadoop.hbase.master">RegionPlan</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/hadoop/hbase/master/balancer/FavoredStochasticBalancer.html#line-655">balanceTable</a></span><wbr><span class="parameters">(<a href="../../TableName.html" title="class in org.apache.hadoop.hbase">TableName</a>&nbsp;tableName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../client/RegionInfo.html" title="interface in org.apache.hadoop.hbase.client">RegionInfo</a>&gt;&gt;&nbsp;loadOfOneTable)</span></div>
<div class="block">For all regions correctly assigned to favored nodes, we just use the stochastic balancer
 implementation. For the misplaced regions, we assign a bogus server to it and AM takes care.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="StochasticLoadBalancer.html#balanceTable(org.apache.hadoop.hbase.TableName,java.util.Map)">balanceTable</a></code>&nbsp;in class&nbsp;<code><a href="StochasticLoadBalancer.html" title="class in org.apache.hadoop.hbase.master.balancer">StochasticLoadBalancer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>tableName</code> - the table to be balanced</dd>
<dd><code>loadOfOneTable</code> - region load of servers for the specific one table</dd>
<dt>Returns:</dt>
<dd>List of plans</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2007&#x2013;2020 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
