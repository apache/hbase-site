<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ReplicationQueueStorage (Apache HBase 4.0.0-alpha-1-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.hadoop.hbase.replication, interface: ReplicationQueueStorage">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ReplicationQueueStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.hadoop.hbase.replication</a></div>
<h1 title="Interface ReplicationQueueStorage" class="title">Interface ReplicationQueueStorage</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="../master/replication/OfflineTableReplicationQueueStorage.html" title="class in org.apache.hadoop.hbase.master.replication">OfflineTableReplicationQueueStorage</a></code>, <code><a href="TableReplicationQueueStorage.html" title="class in org.apache.hadoop.hbase.replication">TableReplicationQueueStorage</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@Private
</span><span class="modifiers">public interface </span><span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-32">ReplicationQueueStorage</a></span></div>
<div class="block">Perform read/write to the replication queue storage.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#addHFileRefs(java.lang.String,java.util.List)" class="member-name-link">addHFileRefs</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;org.apache.hadoop.fs.Path,<wbr>org.apache.hadoop.fs.Path&gt;&gt;&nbsp;pairs)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Add new hfile references to the queue.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#batchUpdateHFileRefs(java.lang.String,java.util.List)" class="member-name-link">batchUpdateHFileRefs</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;hfileRefs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Add the given hfile refs to the given peer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#batchUpdateLastSequenceIds(java.util.List)" class="member-name-link">batchUpdateLastSequenceIds</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ZKReplicationQueueStorageForMigration.ZkLastPushedSeqId.html" title="class in org.apache.hadoop.hbase.replication">ZKReplicationQueueStorageForMigration.ZkLastPushedSeqId</a>&gt;&nbsp;lastPushedSeqIds)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Update last pushed sequence id for the given regions and peers.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#batchUpdateQueues(org.apache.hadoop.hbase.ServerName,java.util.List)" class="member-name-link">batchUpdateQueues</a><wbr>(<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ReplicationQueueData.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueData</a>&gt;&nbsp;datas)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Update the replication queue datas for a given region server.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="ReplicationGroupOffset.html" title="class in org.apache.hadoop.hbase.replication">ReplicationGroupOffset</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#claimQueue(org.apache.hadoop.hbase.replication.ReplicationQueueId,org.apache.hadoop.hbase.ServerName)" class="member-name-link">claimQueue</a><wbr>(<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&nbsp;queueId,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;targetServerName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Change ownership for the queue identified by queueId and belongs to a dead region server.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getAllHFileRefs()" class="member-name-link">getAllHFileRefs</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Load all hfile references in all replication queues.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getAllPeersFromHFileRefsQueue()" class="member-name-link">getAllPeersFromHFileRefsQueue</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get list of all peers from hfile reference queue.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getLastSequenceId(java.lang.String,java.lang.String)" class="member-name-link">getLastSequenceId</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;encodedRegionName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Read the max sequence id of the specific region for a given peer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="ReplicationGroupOffset.html" title="class in org.apache.hadoop.hbase.replication">ReplicationGroupOffset</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getOffsets(org.apache.hadoop.hbase.replication.ReplicationQueueId)" class="member-name-link">getOffsets</a><wbr>(<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&nbsp;queueId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get the current offset of all the WAL groups for a queue</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getReplicableHFiles(java.lang.String)" class="member-name-link">getReplicableHFiles</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get a list of all hfile references in the given peer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#hasData()" class="member-name-link">hasData</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Whether the replication queue table exists.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#listAllQueueIds(java.lang.String)" class="member-name-link">listAllQueueIds</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get a list of all queues for the specific peer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#listAllQueueIds(java.lang.String,org.apache.hadoop.hbase.ServerName)" class="member-name-link">listAllQueueIds</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get a list of all queues for the specific region server and the specific peer</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#listAllQueueIds(org.apache.hadoop.hbase.ServerName)" class="member-name-link">listAllQueueIds</a><wbr>(<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get a list of all queues for the specific region server.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ReplicationQueueData.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueData</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#listAllQueues()" class="member-name-link">listAllQueues</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get a list of all queues and the offsets.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#listAllReplicators()" class="member-name-link">listAllReplicators</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Get a list of all region servers that have outstanding replication queues.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#removeAllQueues(java.lang.String)" class="member-name-link">removeAllQueues</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Remove all the replication queues for the given peer.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#removeHFileRefs(java.lang.String,java.util.List)" class="member-name-link">removeHFileRefs</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;files)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Remove hfile references from the queue.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#removeLastSequenceIds(java.lang.String)" class="member-name-link">removeLastSequenceIds</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Remove all the max sequence id record for the given peer.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#removeLastSequenceIds(java.lang.String,java.util.List)" class="member-name-link">removeLastSequenceIds</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;encodedRegionNames)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Remove the max sequence id record for the given peer and regions.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#removeLastSequenceIdsAndHFileRefsBefore(long)" class="member-name-link">removeLastSequenceIdsAndHFileRefsBefore</a><wbr>(long&nbsp;ts)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Remove all the last sequence ids and hfile references data which are written before the given
 timestamp.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#removePeerFromHFileRefs(java.lang.String)" class="member-name-link">removePeerFromHFileRefs</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Remove a peer from hfile reference queue.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#removeQueue(org.apache.hadoop.hbase.replication.ReplicationQueueId)" class="member-name-link">removeQueue</a><wbr>(<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&nbsp;queueId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Remove a replication queue</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setLastSequenceIds(java.lang.String,java.util.Map)" class="member-name-link">setLastSequenceIds</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;lastSeqIds)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Set the max sequence id of a bunch of regions for a given peer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setOffset(org.apache.hadoop.hbase.replication.ReplicationQueueId,java.lang.String,org.apache.hadoop.hbase.replication.ReplicationGroupOffset,java.util.Map)" class="member-name-link">setOffset</a><wbr>(<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&nbsp;queueId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;walGroup,
 <a href="ReplicationGroupOffset.html" title="class in org.apache.hadoop.hbase.replication">ReplicationGroupOffset</a>&nbsp;offset,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;lastSeqIds)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Set the current offset for a specific WAL group in a given queue.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setOffset(org.apache.hadoop.hbase.replication.ReplicationQueueId,java.lang.String,org.apache.hadoop.hbase.replication.ReplicationGroupOffset,java.util.Map)">
<h3>setOffset</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-42">setOffset</a></span><wbr><span class="parameters">(<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&nbsp;queueId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;walGroup,
 <a href="ReplicationGroupOffset.html" title="class in org.apache.hadoop.hbase.replication">ReplicationGroupOffset</a>&nbsp;offset,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;lastSeqIds)</span>
        throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Set the current offset for a specific WAL group in a given queue.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>queueId</code> - the id of the queue</dd>
<dd><code>walGroup</code> - the group of the WAL, can be empty if multi wal is not enabled</dd>
<dd><code>offset</code> - the current offset of replication progress</dd>
<dd><code>lastSeqIds</code> - map with {encodedRegionName, sequenceId} pairs for serial replication.</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getOffsets(org.apache.hadoop.hbase.replication.ReplicationQueueId)">
<h3>getOffsets</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="ReplicationGroupOffset.html" title="class in org.apache.hadoop.hbase.replication">ReplicationGroupOffset</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-51">getOffsets</a></span><wbr><span class="parameters">(<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&nbsp;queueId)</span>
                                       throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Get the current offset of all the WAL groups for a queue</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>queueId</code> - the id of the queue</dd>
<dt>Returns:</dt>
<dd>a map of all offsets of the WAL groups. The key the is WAL group and the value is the
         position.</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listAllQueueIds(java.lang.String)">
<h3>listAllQueueIds</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-59">listAllQueueIds</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</span>
                                  throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Get a list of all queues for the specific peer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - the id of the peer</dd>
<dt>Returns:</dt>
<dd>a list of queueIds</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listAllQueueIds(org.apache.hadoop.hbase.ServerName)">
<h3>listAllQueueIds</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-66">listAllQueueIds</a></span><wbr><span class="parameters">(<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName)</span>
                                  throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Get a list of all queues for the specific region server.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serverName</code> - the server name of the region server that owns the set of queues</dd>
<dt>Returns:</dt>
<dd>a list of queueIds</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listAllQueueIds(java.lang.String,org.apache.hadoop.hbase.ServerName)">
<h3>listAllQueueIds</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-74">listAllQueueIds</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName)</span>
                                  throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Get a list of all queues for the specific region server and the specific peer</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - the id of the peer</dd>
<dd><code>serverName</code> - the server name of the region server that owns the set of queues</dd>
<dt>Returns:</dt>
<dd>a list of queueIds</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listAllQueues()">
<h3>listAllQueues</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ReplicationQueueData.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueData</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-80">listAllQueues</a></span>()
                                  throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Get a list of all queues and the offsets.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listAllReplicators()">
<h3>listAllReplicators</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-87">listAllReplicators</a></span>()
                             throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Get a list of all region servers that have outstanding replication queues. These servers could
 be alive, dead or from a previous run of the cluster.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a list of server names</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="claimQueue(org.apache.hadoop.hbase.replication.ReplicationQueueId,org.apache.hadoop.hbase.ServerName)">
<h3>claimQueue</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="ReplicationGroupOffset.html" title="class in org.apache.hadoop.hbase.replication">ReplicationGroupOffset</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-95">claimQueue</a></span><wbr><span class="parameters">(<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&nbsp;queueId,
 <a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;targetServerName)</span>
                                       throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Change ownership for the queue identified by queueId and belongs to a dead region server.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>queueId</code> - the id of the queue</dd>
<dd><code>targetServerName</code> - the name of the target region server</dd>
<dt>Returns:</dt>
<dd>the new PeerId and A SortedSet of WALs in its queue</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeQueue(org.apache.hadoop.hbase.replication.ReplicationQueueId)">
<h3>removeQueue</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-102">removeQueue</a></span><wbr><span class="parameters">(<a href="ReplicationQueueId.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueId</a>&nbsp;queueId)</span>
          throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Remove a replication queue</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>queueId</code> - the id of the queue to remove</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeAllQueues(java.lang.String)">
<h3>removeAllQueues</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-108">removeAllQueues</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</span>
              throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Remove all the replication queues for the given peer. Usually used when removing a peer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - the id of the peer</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLastSequenceId(java.lang.String,java.lang.String)">
<h3>getLastSequenceId</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-117">getLastSequenceId</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;encodedRegionName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</span>
                throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Read the max sequence id of the specific region for a given peer. For serial replication, we
 need the max sequenced id to decide whether we can push the next entries.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>encodedRegionName</code> - the encoded region name</dd>
<dd><code>peerId</code> - peer id</dd>
<dt>Returns:</dt>
<dd>the max sequence id of the specific region for a given peer.</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setLastSequenceIds(java.lang.String,java.util.Map)">
<h3>setLastSequenceIds</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-125">setLastSequenceIds</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&nbsp;lastSeqIds)</span>
                 throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Set the max sequence id of a bunch of regions for a given peer. Will be called when setting up
 a serial replication peer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - peer id</dd>
<dd><code>lastSeqIds</code> - map with {encodedRegionName, sequenceId} pairs for serial replication.</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeLastSequenceIds(java.lang.String)">
<h3>removeLastSequenceIds</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-131">removeLastSequenceIds</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</span>
                    throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Remove all the max sequence id record for the given peer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - peer id</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeLastSequenceIds(java.lang.String,java.util.List)">
<h3>removeLastSequenceIds</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-138">removeLastSequenceIds</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;encodedRegionNames)</span>
                    throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Remove the max sequence id record for the given peer and regions.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - peer id</dd>
<dd><code>encodedRegionNames</code> - the encoded region names</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removePeerFromHFileRefs(java.lang.String)">
<h3>removePeerFromHFileRefs</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-145">removePeerFromHFileRefs</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</span>
                      throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Remove a peer from hfile reference queue.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - peer cluster id to be removed</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addHFileRefs(java.lang.String,java.util.List)">
<h3>addHFileRefs</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-154">addHFileRefs</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../util/Pair.html" title="class in org.apache.hadoop.hbase.util">Pair</a>&lt;org.apache.hadoop.fs.Path,<wbr>org.apache.hadoop.fs.Path&gt;&gt;&nbsp;pairs)</span>
           throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Add new hfile references to the queue.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - peer cluster id to which the hfiles need to be replicated</dd>
<dd><code>pairs</code> - list of pairs of { HFile location in staging dir, HFile path in region dir which
               will be added in the queue }</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code> - if fails to add a hfile reference</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeHFileRefs(java.lang.String,java.util.List)">
<h3>removeHFileRefs</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-161">removeHFileRefs</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;files)</span>
              throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Remove hfile references from the queue.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - peer cluster id from which this hfile references needs to be removed</dd>
<dd><code>files</code> - list of hfile references to be removed</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAllPeersFromHFileRefsQueue()">
<h3>getAllPeersFromHFileRefsQueue</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-167">getAllPeersFromHFileRefsQueue</a></span>()
                                    throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Get list of all peers from hfile reference queue.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a list of peer ids</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getReplicableHFiles(java.lang.String)">
<h3>getReplicableHFiles</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-174">getReplicableHFiles</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId)</span>
                          throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Get a list of all hfile references in the given peer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - a String that identifies the peer</dd>
<dt>Returns:</dt>
<dd>a list of hfile references</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAllHFileRefs()">
<h3>getAllHFileRefs</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-181">getAllHFileRefs</a></span>()
                     throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Load all hfile references in all replication queues. This method guarantees to return a
 snapshot which contains all hfile references at the start of this call. However, some newly
 created hfile references during the call may not be included.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasData()">
<h3>hasData</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-187">hasData</a></span>()
         throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Whether the replication queue table exists.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Whether the replication queue table exists</dd>
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="batchUpdateQueues(org.apache.hadoop.hbase.ServerName,java.util.List)">
<h3>batchUpdateQueues</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-193">batchUpdateQueues</a></span><wbr><span class="parameters">(<a href="../ServerName.html" title="class in org.apache.hadoop.hbase">ServerName</a>&nbsp;serverName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ReplicationQueueData.html" title="class in org.apache.hadoop.hbase.replication">ReplicationQueueData</a>&gt;&nbsp;datas)</span>
                throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Update the replication queue datas for a given region server.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="batchUpdateLastSequenceIds(java.util.List)">
<h3>batchUpdateLastSequenceIds</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-199">batchUpdateLastSequenceIds</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="ZKReplicationQueueStorageForMigration.ZkLastPushedSeqId.html" title="class in org.apache.hadoop.hbase.replication">ZKReplicationQueueStorageForMigration.ZkLastPushedSeqId</a>&gt;&nbsp;lastPushedSeqIds)</span>
                         throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Update last pushed sequence id for the given regions and peers.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="batchUpdateHFileRefs(java.lang.String,java.util.List)">
<h3>batchUpdateHFileRefs</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-205">batchUpdateHFileRefs</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;peerId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;hfileRefs)</span>
                   throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Add the given hfile refs to the given peer.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeLastSequenceIdsAndHFileRefsBefore(long)">
<h3>removeLastSequenceIdsAndHFileRefsBefore</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/org/apache/hadoop/hbase/replication/ReplicationQueueStorage.html#line-226">removeLastSequenceIdsAndHFileRefsBefore</a></span><wbr><span class="parameters">(long&nbsp;ts)</span>
                                      throws <span class="exceptions"><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></span></div>
<div class="block">Remove all the last sequence ids and hfile references data which are written before the given
 timestamp.
 <p/>
 The data of these two types are not used by replication directly.
 <p/>
 For last sequence ids, we will check it in serial replication, to make sure that we will
 replicate all edits in order, so if there are stale data, the worst case is that we will stop
 replicating as we think we still need to finish previous ranges first, although actually we
 have already replicated them out.
 <p/>
 For hfile references, it is just used by hfile cleaner to not remove these hfiles before we
 replicate them out, so if there are stale data, the worst case is that we can not remove these
 hfiles, although actually they have already been replicated out.
 <p/>
 So it is OK for us to just bring up the cluster first, and then use this method to delete the
 stale data, i.e, the data which are written before a specific timestamp.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="ReplicationException.html" title="class in org.apache.hadoop.hbase.replication">ReplicationException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2007&#x2013;2020 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
